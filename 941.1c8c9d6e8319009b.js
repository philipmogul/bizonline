"use strict";(self.webpackChunkmatngular=self.webpackChunkmatngular||[]).push([[941],{3942:(q,f,r)=>{r.d(f,{c:()=>x});var p=r(4650);let x=(()=>{class c{constructor(){}ngOnInit(){}}return c.\u0275fac=function(_){return new(_||c)},c.\u0275cmp=p.Xpm({type:c,selectors:[["app-notification"]],inputs:{message:"message",showNotification:"showNotification"},decls:6,vars:1,consts:[[1,"wrapper1"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 52 52",1,"checkmark"],["cx","26","cy","26","r","25","fill","none",1,"checkmark__circle"],["fill","none","d","M14.1 27.2l7.1 7.2 16.7-16.8",1,"checkmark__check"],[2,"position","absolute","margin-top","150px","margin-bottom","50px","font-weight","bold"]],template:function(_,u){1&_&&(p.TgZ(0,"div",0),p.O4$(),p.TgZ(1,"svg",1),p._UZ(2,"circle",2)(3,"path",3),p.qZA(),p.kcU(),p.TgZ(4,"p",4),p._uU(5),p.qZA()()),2&_&&(p.xp6(5),p.hij(" ",u.message," "))},styles:["*[_ngcontent-%COMP%]{padding:0;margin:0}.wrapper1[_ngcontent-%COMP%]{height:100%;display:flex;justify-content:center;align-items:center;background-color:transparent}.checkmark__circle[_ngcontent-%COMP%]{stroke-dasharray:166;stroke-dashoffset:166;stroke-width:2;stroke-miterlimit:10;stroke:#7ac142;fill:none;animation:stroke .6s cubic-bezier(.65,0,.45,1) forwards}.checkmark[_ngcontent-%COMP%]{width:56px;height:56px;border-radius:50%;display:block;stroke-width:2;stroke:#fff;stroke-miterlimit:10;margin:10% auto;box-shadow:inset 0 0 #7ac142;animation:fill .4s ease-in-out .4s forwards,scale .3s ease-in-out .9s both}.checkmark__check[_ngcontent-%COMP%]{transform-origin:50% 50%;stroke-dasharray:48;stroke-dashoffset:48;animation:stroke .3s cubic-bezier(.65,0,.45,1) .8s forwards}@keyframes stroke{to{stroke-dashoffset:0}}@keyframes scale{0%,to{transform:none}50%{transform:scale3d(1.1,1.1,1)}}@keyframes fill{to{box-shadow:inset 0 0 0 30px #7ac142}}"]}),c})()},4941:(q,f,r)=>{r.r(f),r.d(f,{TransfersModule:()=>Qt});var p=r(2318),x=r(5861),c=r(7340),b=r(4313),_=r(9441),u=r(2841),t=r(4650),A=r(8423),N=r(3166),D=r(7185),J=r(1927),g=r(6895),k=r(1932),w=r(805),d=r(4006),I=r(1493),F=r(2137),S=r(5593),T=r(3087),L=r(1740),Q=r(3608),Z=r(9091),E=r(8558),H=r(8271),j=r(613),B=r(585),O=r(3942);function Y(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"p-button",47),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.showNewCustomerForm())}),t.qZA()}}function R(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"p-button",48),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.showTotal=!0)}),t.qZA()}}function K(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"tr",49)(1,"th",50),t._uU(2," Customer "),t.qZA(),t.TgZ(3,"th"),t._uU(4,"Total amount sold "),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Amount credited "),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Amount paid "),t.qZA(),t.TgZ(9,"th",51),t._uU(10," Balance "),t._UZ(11,"p-sortIcon",52),t.qZA(),t._UZ(12,"th",53),t.qZA(),t.TgZ(13,"tr")(14,"th",54)(15,"input",55),t.NdJ("input",function(o){t.CHM(e),t.oxw();const s=t.MAs(10);return t.KtG(s.filter(o.target.value,"name","contains"))}),t.qZA()()()}}function G(i,a){if(1&i&&(t.TgZ(0,"label",66),t.ALo(1,"number"),t._uU(2),t.ALo(3,"number"),t.qZA()),2&i){const e=t.oxw().$implicit;t.s9C("pTooltip",t.xi3(1,2,e.sales-e.credit_note-e.payments,".2")),t.xp6(2),t.hij(" Paid excess of ",t.xi3(3,5,e.sales-e.payments-e.credit_note,".2")," ")}}function V(i,a){if(1&i&&(t.TgZ(0,"label",67),t.ALo(1,"number"),t._uU(2," Paid in full "),t._UZ(3,"i",68),t.qZA()),2&i){const e=t.oxw().$implicit;t.s9C("pTooltip",t.xi3(1,1,e.sales-e.credit_note-e.payments,".2"))}}function $(i,a){if(1&i&&(t.TgZ(0,"label",69),t.ALo(1,"number"),t._uU(2),t.ALo(3,"number"),t.qZA()),2&i){const e=t.oxw().$implicit;t.s9C("pTooltip",t.xi3(1,2,e.sales-e.credit_note-e.payments,".2")),t.xp6(2),t.hij(" ",t.xi3(3,5,e.sales-e.credit_note-e.payments,".2")," ")}}function z(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"button",63),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,s=t.oxw(2);return t.KtG(s.showPayment(o,o.sales-o.credit_note-o.payments))}),t._UZ(1,"i",70),t._uU(2," Add payment "),t.qZA()}}function W(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"button",63),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,s=t.oxw(2);return t.KtG(s.getDebtorPayments(o))}),t._UZ(1,"i",71),t._uU(2," Show payments "),t.qZA()}}function X(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"button",63),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,s=t.oxw(2);return t.KtG(s.deleteDebtor(o))}),t._UZ(1,"i",72),t._uU(2," Delete customer "),t.qZA()}}function tt(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"tr",56)(1,"td"),t._uU(2),t.ALo(3,"titlecase"),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.ALo(6,"number"),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.ALo(9,"number"),t.qZA(),t.TgZ(10,"td"),t._uU(11),t.ALo(12,"number"),t.qZA(),t.TgZ(13,"td"),t.YNc(14,G,4,8,"label",57),t.YNc(15,V,4,4,"label",58),t.YNc(16,$,4,8,"label",59),t.qZA(),t.TgZ(17,"td")(18,"div",60)(19,"button",61),t._uU(20," Select an action "),t.qZA(),t.TgZ(21,"div",62)(22,"button",63),t.NdJ("click",function(){const s=t.CHM(e).$implicit,l=t.oxw(2);return t.KtG(l.getAllDebtorTransactions(s))}),t._UZ(23,"i",64),t._uU(24," All transactions "),t.qZA(),t.YNc(25,z,3,0,"button",65),t.TgZ(26,"button",63),t.NdJ("click",function(){const s=t.CHM(e).$implicit,l=t.oxw(2);return t.KtG(l.getDebtorSalesAndReversals(s))}),t._UZ(27,"i",64),t._uU(28," Show sales "),t.qZA(),t.YNc(29,W,3,0,"button",65),t.YNc(30,X,3,0,"button",65),t.qZA()()()()}if(2&i){const e=a.$implicit,n=t.oxw(2);t.xp6(2),t.hij(" ",t.lcZ(3,10,e.name)," "),t.xp6(3),t.hij(" ",t.xi3(6,12,e.sales,".2")," "),t.xp6(3),t.hij(" ",t.xi3(9,15,e.credit_note,".2")," "),t.xp6(3),t.hij(" ",t.xi3(12,18,e.payments,".2")," "),t.xp6(3),t.Q6J("ngIf",e.sales-e.credit_note-e.payments<0),t.xp6(1),t.Q6J("ngIf",e.sales-e.credit_note-e.payments==0),t.xp6(1),t.Q6J("ngIf",e.sales-e.credit_note-e.payments>0),t.xp6(9),t.Q6J("ngIf",n.userCanReceivePayments||n.userIsAdmin),t.xp6(4),t.Q6J("ngIf",n.userCanReceivePayments||n.userIsAdmin),t.xp6(1),t.Q6J("ngIf",n.userCanAddTransferCustomers||n.userIsAdmin)}}function et(i,a){1&i&&(t.TgZ(0,"tr")(1,"td",73),t._uU(2,"No customers found."),t.qZA()())}const h=function(){return[10,25,50]},v=function(){return["name"]};function nt(i,a){if(1&i&&(t.TgZ(0,"div",40)(1,"div",41)(2,"div",42)(3,"h4",43),t._uU(4," All transfer customers "),t.YNc(5,Y,1,0,"p-button",44),t.YNc(6,R,1,0,"p-button",45),t.qZA()(),t.TgZ(7,"div",24)(8,"div",46)(9,"p-table",4,5),t.YNc(11,K,16,0,"ng-template",6),t.YNc(12,tt,31,21,"ng-template",7),t.YNc(13,et,3,0,"ng-template",8),t.qZA()()()()()),2&i){const e=t.oxw();t.Q6J("@enter",void 0),t.xp6(5),t.Q6J("ngIf",e.userCanAddTransferCustomers||e.userIsAdmin),t.xp6(1),t.Q6J("ngIf",e.userIsAdmin),t.xp6(3),t.Q6J("value",e.debtors)("rowHover",!0)("rows",10)("showCurrentPageReport",!0)("rowsPerPageOptions",t.DdM(12,h))("loading",e.loading)("paginator",!0)("filterDelay",0)("globalFilterFields",t.DdM(13,v))}}function ot(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"form",75,76),t.NdJ("ngSubmit",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.addPayment())}),t.TgZ(2,"div",0)(3,"div",22)(4,"div",77)(5,"div",78)(6,"label",79),t._uU(7,"Amount paid"),t.qZA(),t._UZ(8,"br"),t.TgZ(9,"input",80),t.NdJ("ngModelChange",function(o){t.CHM(e);const s=t.oxw(2);return t.KtG(s.newPaymentModel.amount=o)}),t.qZA()(),t.TgZ(10,"div",81)(11,"label",79),t._uU(12,"Payment method"),t.qZA(),t.TgZ(13,"div",82)(14,"p-radioButton",83),t.NdJ("ngModelChange",function(o){t.CHM(e);const s=t.oxw(2);return t.KtG(s.newPaymentModel.channel=o)}),t.qZA(),t.TgZ(15,"label",84),t._uU(16,"Cash "),t._UZ(17,"i",85),t.qZA()(),t.TgZ(18,"div",82)(19,"p-radioButton",86),t.NdJ("ngModelChange",function(o){t.CHM(e);const s=t.oxw(2);return t.KtG(s.newPaymentModel.channel=o)}),t.qZA(),t.TgZ(20,"label",87),t._uU(21,"Mpesa "),t._UZ(22,"i",88),t.qZA()(),t.TgZ(23,"div",82)(24,"p-radioButton",89),t.NdJ("ngModelChange",function(o){t.CHM(e);const s=t.oxw(2);return t.KtG(s.newPaymentModel.channel=o)}),t.qZA(),t.TgZ(25,"label",90),t._uU(26,"Bank "),t._UZ(27,"i",91),t.qZA()()()()()(),t.TgZ(28,"p-footer")(29,"button",92),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return o.showPaymentModal=!1,o.newPaymentModel={},t.KtG(o.ngOnInit())}),t.qZA(),t._UZ(30,"button",93),t.qZA()()}if(2&i){const e=t.MAs(1),n=t.oxw(2);t.xp6(9),t.Q6J("ngModel",n.newPaymentModel.amount),t.xp6(5),t.Q6J("ngModel",n.newPaymentModel.channel),t.xp6(5),t.Q6J("ngModel",n.newPaymentModel.channel),t.xp6(5),t.Q6J("ngModel",n.newPaymentModel.channel),t.xp6(6),t.Q6J("disabled",!e.valid||""==n.newPaymentModel.amount||null==n.newPaymentModel.amount||n.newPaymentModel.amount<1||null==n.newPaymentModel.channel)}}function it(i,a){if(1&i&&t._UZ(0,"app-notification",94),2&i){const e=t.oxw(2);t.Q6J("message","Payment added!")("showNotification",e.showNotification)}}const y=function(){return{width:"30vw"}};function st(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"p-dialog",16),t.NdJ("visibleChange",function(o){t.CHM(e);const s=t.oxw();return t.KtG(s.showPaymentModal=o)}),t.ALo(1,"titlecase"),t.YNc(2,ot,31,5,"form",17),t.TgZ(3,"ngx-spinner",74),t._UZ(4,"p",10),t.qZA(),t.YNc(5,it,1,2,"app-notification",18),t.qZA()}if(2&i){const e=t.oxw();t.Akn(t.DdM(11,y)),t.Q6J("header",!e.showNotification&&e.showPaymentModal?"New payment for "+t.lcZ(1,9,e.debtorToView.name):"")("closable",!1)("visible",e.showPaymentModal)("baseZIndex",1e4),t.xp6(2),t.Q6J("ngIf",!e.showNotification),t.xp6(1),t.Q6J("fullScreen",!1),t.xp6(2),t.Q6J("ngIf",e.showNotification)}}function at(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"tr",49)(1,"th",53),t._uU(2,"Date "),t.qZA(),t.TgZ(3,"th"),t._uU(4,"Total sales "),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Total reversed "),t.qZA(),t._UZ(7,"th",53),t.qZA(),t.TgZ(8,"tr")(9,"th",95)(10,"p-calendar",96),t.NdJ("ngModelChange",function(o){t.CHM(e);const s=t.oxw();return t.KtG(s.dateOfSale=o)})("onSelect",function(o){t.CHM(e);const s=t.oxw();return t.KtG(s.getDate(o))}),t.qZA()()()}if(2&i){const e=t.oxw();t.xp6(10),t.Q6J("ngModel",e.dateOfSale)("maxDate",e.today)("touchUI",!1)("monthNavigator",!0)}}function rt(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"tr",56)(1,"td"),t._uU(2),t.ALo(3,"date"),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.ALo(6,"number"),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.ALo(9,"number"),t.qZA(),t.TgZ(10,"td")(11,"button",97),t.NdJ("click",function(){const s=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.showDebtorDateSales(s.transaction_date))}),t.qZA()()()}if(2&i){const e=a.$implicit;t.xp6(2),t.hij(" ",t.lcZ(3,3,e.transaction_date)," "),t.xp6(3),t.hij(" ",t.xi3(6,5,e.sales,".2")," "),t.xp6(3),t.hij(" ",t.xi3(9,8,e.reversed,".2")," ")}}function lt(i,a){1&i&&(t.TgZ(0,"tr")(1,"td",73),t._uU(2,"No customers found."),t.qZA()())}function pt(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"tr",49)(1,"th"),t._uU(2,"Receipt no "),t.qZA(),t.TgZ(3,"th"),t._uU(4,"Receipt total "),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Amount reversed "),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Sold by "),t.qZA(),t._UZ(9,"th"),t.qZA(),t.TgZ(10,"tr")(11,"th",98)(12,"input",99),t.NdJ("input",function(o){t.CHM(e),t.oxw();const s=t.MAs(15);return t.KtG(s.filterGlobal(o.target.value,"contains"))}),t.qZA()()()}}function ct(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"tr",56)(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.ALo(5,"number"),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.ALo(8,"number"),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.ALo(11,"titlecase"),t.qZA(),t.TgZ(12,"td")(13,"p-button",100),t.NdJ("onClick",function(){const s=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.showReceiptItems(s))}),t.qZA()()()}if(2&i){const e=a.$implicit;t.xp6(2),t.hij(" ",e.transaction_code," "),t.xp6(2),t.hij(" ",t.xi3(5,4,e.transaction_total,".2")," "),t.xp6(3),t.hij(" ",t.xi3(8,7,e.reversed,".2")," "),t.xp6(3),t.hij(" ",t.lcZ(11,10,e.sold_by)," ")}}function dt(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"tr",49)(1,"th",101),t._uU(2,"Item "),t._UZ(3,"p-sortIcon",102),t.qZA(),t.TgZ(4,"th",103),t._uU(5,"Location "),t.qZA(),t.TgZ(6,"th",103),t._uU(7,"Unit "),t.qZA(),t.TgZ(8,"th",103),t._uU(9,"Qty "),t.qZA(),t.TgZ(10,"th",103),t._uU(11,"Price "),t.qZA(),t.TgZ(12,"th",103),t._uU(13,"Total "),t.qZA()(),t.TgZ(14,"tr")(15,"th",54)(16,"input",104),t.NdJ("input",function(o){t.CHM(e),t.oxw();const s=t.MAs(1);return t.KtG(s.filter(o.target.value,"item.name","contains"))}),t.qZA()()()}}const ut=function(i){return{"background-color":i,color:"#ffffff",cursor:"pointer"}};function mt(i,a){if(1&i&&(t.TgZ(0,"tr",56)(1,"td"),t._uU(2),t.ALo(3,"titlecase"),t.qZA(),t.TgZ(4,"td")(5,"p-avatarGroup"),t._UZ(6,"p-avatar",105),t.qZA()(),t.TgZ(7,"td"),t._uU(8),t.ALo(9,"titlecase"),t.qZA(),t.TgZ(10,"td"),t._uU(11),t.ALo(12,"number"),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.ALo(15,"number"),t.qZA(),t.TgZ(16,"td"),t._uU(17),t.ALo(18,"number"),t.qZA()()),2&i){const e=a.$implicit;t.xp6(2),t.hij(" ",t.lcZ(3,7,e.item.name)," "),t.xp6(4),t.Akn(t.VKq(19,ut,e.location.color)),t.xp6(2),t.hij(" ",t.lcZ(9,9,e.unit.unit_name)," "),t.xp6(3),t.hij(" ",t.lcZ(12,11,e.qty)," "),t.xp6(3),t.hij(" ",t.xi3(15,13,e.sp,".2")," "),t.xp6(3),t.hij(" ",t.xi3(18,16,e.qty*e.sp,".2")," ")}}const _t=function(){return["item.name"]};function ht(i,a){if(1&i&&(t.TgZ(0,"p-table",11,12),t.YNc(2,dt,17,0,"ng-template",6),t.YNc(3,mt,19,21,"ng-template",7),t.qZA()),2&i){const e=t.oxw();t.Q6J("value",e.receiptToView.items)("rowHover",!0)("rows",10)("showCurrentPageReport",!0)("rowsPerPageOptions",t.DdM(8,h))("paginator",!0)("filterDelay",0)("globalFilterFields",t.DdM(9,_t))}}function gt(i,a){1&i&&(t.TgZ(0,"tr",49)(1,"th"),t._uU(2,"Date paid "),t.qZA(),t.TgZ(3,"th"),t._uU(4,"Cash amount "),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Mpesa amount "),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Bank amount "),t.qZA(),t.TgZ(9,"th"),t._uU(10,"Amount credited "),t.qZA(),t.TgZ(11,"th"),t._uU(12,"Added by "),t.qZA(),t._UZ(13,"th"),t.qZA())}function ft(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"button",107),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,s=t.oxw();return t.KtG(s.confirmDeletePayment(o))}),t.qZA()}}function bt(i,a){if(1&i&&(t.TgZ(0,"tr",56)(1,"td")(2,"label"),t._uU(3),t.ALo(4,"date"),t.qZA()(),t.TgZ(5,"td"),t._uU(6),t.ALo(7,"number"),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.ALo(10,"number"),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.ALo(13,"number"),t.qZA(),t.TgZ(14,"td"),t._uU(15),t.ALo(16,"number"),t.qZA(),t.TgZ(17,"td"),t._uU(18),t.ALo(19,"titlecase"),t.qZA(),t.TgZ(20,"td"),t.YNc(21,ft,1,0,"button",106),t.qZA()()),2&i){const e=a.$implicit;t.xp6(3),t.hij(" ",t.lcZ(4,7,e.date_paid)," "),t.xp6(3),t.hij(" ",t.xi3(7,9,e.cash,".2")," "),t.xp6(3),t.hij(" ",t.xi3(10,12,e.mpesa,".2")," "),t.xp6(3),t.hij(" ",t.xi3(13,15,e.bank,".2")," "),t.xp6(3),t.hij(" ",t.xi3(16,18,e.amount_credited,".2")," "),t.xp6(3),t.hij(" ",t.lcZ(19,21,e.added_by)," "),t.xp6(3),t.Q6J("ngIf",e.amount_credited<1)}}function Tt(i,a){1&i&&(t.TgZ(0,"tr")(1,"td",108),t._uU(2,"No records found."),t.qZA()())}function Zt(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"form",75,76),t.NdJ("ngSubmit",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.completeLimit())}),t.TgZ(2,"div",0)(3,"div",22)(4,"div",110)(5,"div",111)(6,"label",79),t._uU(7,"Sales limit amount"),t.qZA(),t._UZ(8,"br"),t.TgZ(9,"input",80),t.NdJ("ngModelChange",function(o){t.CHM(e);const s=t.oxw(2);return t.KtG(s.limitModel.amount=o)}),t.qZA()()()()(),t.TgZ(10,"p-footer")(11,"button",112),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return o.displayLimitForm=!1,t.KtG(o.limitModel={})}),t.qZA(),t._UZ(12,"button",113),t.qZA()()}if(2&i){const e=t.MAs(1),n=t.oxw(2);t.xp6(5),t.Q6J("@enter",void 0),t.xp6(4),t.Q6J("ngModel",n.limitModel.amount),t.xp6(3),t.Q6J("disabled",!e.valid||null==n.limitModel.amount||""==n.limitModel.amount)}}function yt(i,a){if(1&i&&t._UZ(0,"app-notification",94),2&i){const e=t.oxw(2);t.Q6J("message","Limit changed!")("showNotification",e.showNotification)}}function xt(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"p-dialog",16),t.NdJ("visibleChange",function(o){t.CHM(e);const s=t.oxw();return t.KtG(s.displayLimitForm=o)}),t.ALo(1,"titlecase"),t.YNc(2,Zt,13,3,"form",17),t.YNc(3,yt,1,2,"app-notification",18),t.TgZ(4,"ngx-spinner",109),t._UZ(5,"p",10),t.qZA()()}if(2&i){const e=t.oxw();t.Akn(t.DdM(11,y)),t.Q6J("header",e.showNotification?"":"Change sales limit for "+t.lcZ(1,9,e.debtorToView.name))("closable",!1)("visible",e.displayLimitForm)("baseZIndex",1e4),t.xp6(2),t.Q6J("ngIf",!e.showNotification),t.xp6(1),t.Q6J("ngIf",e.showNotification),t.xp6(1),t.Q6J("fullScreen",!1)}}function wt(i,a){1&i&&(t.TgZ(0,"label",125),t._uU(1," Mobile number must be in the format 254xxxxxxxxx. "),t.qZA()),2&i&&t.Q6J("@enter",void 0)}function vt(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"form",75,114),t.NdJ("ngSubmit",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.addNewCustomer())}),t.TgZ(2,"div",0)(3,"div",22)(4,"div",110)(5,"div",115)(6,"label",116),t._uU(7,"Customer name"),t.qZA(),t.TgZ(8,"input",117),t.NdJ("ngModelChange",function(o){t.CHM(e);const s=t.oxw();return t.KtG(s.newCustomer.name=o)}),t.qZA()()()(),t.TgZ(9,"div",22)(10,"div",118)(11,"div",115)(12,"label",119),t._uU(13,"Mobile number"),t.qZA(),t.TgZ(14,"input",120,121),t.NdJ("ngModelChange",function(o){t.CHM(e);const s=t.oxw();return t.KtG(s.newCustomer.mobile=o)}),t.qZA(),t.YNc(16,wt,2,1,"label",122),t.qZA()()()(),t.TgZ(17,"p-footer")(18,"button",123),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return o.displayCustomerForm=!1,o.newCustomer={},t.KtG(o.ngOnInit())}),t.qZA(),t._UZ(19,"button",124),t.qZA()()}if(2&i){const e=t.MAs(1),n=t.MAs(15),o=t.oxw();t.xp6(8),t.Q6J("ngModel",o.newCustomer.name),t.xp6(6),t.Q6J("ngModel",o.newCustomer.mobile),t.xp6(2),t.Q6J("ngIf",!n.valid||null!=(null==n?null:n.value)&&!o.mobileFormatCorrect(null==n?null:n.value.toString())),t.xp6(3),t.Q6J("disabled",!e.valid||""==o.newCustomer.name||""==o.newCustomer.mobile||null!=(null==n?null:n.value)&&!o.mobileFormatCorrect(null==n?null:n.value.toString()))}}function Ct(i,a){if(1&i&&t._UZ(0,"app-notification",94),2&i){const e=t.oxw();t.Q6J("message","Customer added!")("showNotification",e.showNotification)}}function At(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"button",133),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.downloadReport())}),t.qZA()}}function St(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"tr",49)(1,"th",103),t._uU(2,"Balance B.F "),t.qZA(),t.TgZ(3,"th",103),t._uU(4,"Transaction type "),t.qZA(),t.TgZ(5,"th",103),t._uU(6,"Invoice no "),t.qZA(),t.TgZ(7,"th",103),t._uU(8,"Amount "),t.qZA(),t.TgZ(9,"th",103),t._uU(10,"Payment channel "),t.qZA(),t.TgZ(11,"th",103),t._uU(12,"Posted by "),t.qZA(),t.TgZ(13,"th",103),t._uU(14,"Closing balance "),t.qZA(),t.TgZ(15,"th",126)(16,"div",127),t._uU(17," Transaction date "),t._UZ(18,"p-columnFilter",128),t.qZA()()(),t.TgZ(19,"tr")(20,"th",129)(21,"input",130),t.NdJ("input",function(o){t.CHM(e),t.oxw();const s=t.MAs(53);return t.KtG(s.filterGlobal(o.target.value,"contains"))}),t.qZA(),t.TgZ(22,"button",131),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.MAs(53).reset(),t.KtG(o.resetSupplierTransactions())}),t.qZA(),t.YNc(23,At,1,0,"button",132),t.qZA()()}if(2&i){const e=t.oxw();t.xp6(23),t.Q6J("ngIf",e.amountSupplied+e.amountPaid>0)}}function Mt(i,a){if(1&i&&(t.TgZ(0,"tr",56)(1,"td"),t._uU(2),t.ALo(3,"number"),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.ALo(6,"titlecase"),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.ALo(11,"number"),t.qZA(),t.TgZ(12,"td")(13,"label",69),t._uU(14),t.ALo(15,"titlecase"),t.qZA()(),t.TgZ(16,"td"),t._uU(17),t.ALo(18,"titlecase"),t.qZA(),t.TgZ(19,"td"),t._uU(20),t.ALo(21,"number"),t.qZA(),t.TgZ(22,"td"),t._uU(23),t.ALo(24,"date"),t.qZA()()),2&i){const e=a.$implicit;t.xp6(2),t.hij(" ",t.xi3(3,11,e.opening_balance,".2")," "),t.xp6(3),t.hij(" ",t.lcZ(6,14,e.transaction_type)," "),t.xp6(3),t.hij(" ",e.invoice_number," "),t.xp6(2),t.hij(" ",t.xi3(11,16,e.amount,".2")," "),t.xp6(3),t.Akn("payment"==e.transaction_type?"cursor: pointer":""),t.s9C("pTooltip","payment"==e.transaction_type?"Paid to: "+e.paid_to:"-"),t.xp6(1),t.hij(" ",t.lcZ(15,19,e.payment_channel)," "),t.xp6(3),t.hij(" ",t.lcZ(18,21,e.added_by)," "),t.xp6(3),t.hij(" ",t.xi3(21,23,e.closing_balance,".2")," "),t.xp6(3),t.hij(" ",t.xi3(24,26,e.date_created,"fullDate")," ")}}function Ut(i,a){1&i&&(t.TgZ(0,"tr")(1,"td",108),t._uU(2,"No records found."),t.qZA()())}const Pt=function(){return{width:"80vw"}},M=function(){return{width:"70vw"}},qt=function(){return["transaction_code","transaction_total","reversed"]},Nt=function(){return{width:"60vw"}},Dt=function(){return{width:"25vw"}},Jt=function(){return{width:"95vw"}},kt=function(){return["invoice_number","transaction_type","amount"]},It=[{path:"",component:(()=>{class i{constructor(e,n,o,s,l,U,C){this.spinner=e,this.cryptoSrv=n,this.toastr=o,this.authSrv=s,this._decimalPipe=l,this.apiSrv=U,this.confirmationService=C,this.loading=!1,this.debtors=[],this.newPaymentModel={},this.showPaymentModal=!1,this.showNotification=!1,this.debtorSalesTransactions=[],this.showDebtorSales=!1,this.debtorDateSales=[],this.showDebtorDateTransactions=!1,this.dateOfSale="",this.dateToView="",this.displayItemsDialog=!1,this.debtorPayments=[],this.showDebtorPayments=!1,this.totalOwed=0,this.showTotal=!1,this.displayLimitForm=!1,this.limitModel={},this.displayCustomerForm=!1,this.newCustomer={},this.userIsAdmin=!1,this.userCanAddTransferCustomers=!1,this.userCanReceivePayments=!1,this.supplierTransactions=[],this.showSupplierTransactions=!1,this.openingBalance=0,this.amountSupplied=0,this.amountPaid=0,this.closingBalance=0,this.filteredSupplierTransactions=[]}ngOnInit(){"admin"===this.cryptoSrv.decryptEncodedText(this.authSrv.getUserDetailToken("role"))&&(this.userIsAdmin=!0),"1"===this.cryptoSrv.decryptEncodedText(this.authSrv.getRoleToken("adding_transfer_customers"))&&(this.userCanAddTransferCustomers=!0),"1"===this.cryptoSrv.decryptEncodedText(this.authSrv.getRoleToken("reversing_transfer"))&&(this.userCanReceivePayments=!0),this.showNotification=!1,this.getAllDebtors()}getAllDebtors(){this.spinner.show();const e={action:this.cryptoSrv.encodeEncryptText("get-all-transfers-summary")};this.apiSrv.read(e).then(n=>{"error"!=n.status?"error2"!=n.status?(this.debtors=n.debtors,this.totalOwed=0,this.debtors.forEach(o=>{this.totalOwed+=parseFloat(o.sales.toString())-parseFloat(o.credit_note.toString())-parseFloat(o.payments.toString())}),this.spinner.hide(),this.loading=!1):(this.spinner.hide(),this.toastr.error("Please login again.","Login session expired!"),this.authSrv.logout()):(this.spinner.hide(),this.toastr.error(n.message))}).catch(n=>{this.toastr.error(n),this.spinner.hide()})}getDebtorSalesAndReversals(e){this.debtorToView=e,this.spinner.show();const n={action:this.cryptoSrv.encodeEncryptText("get_all_transfer_sales_and_reversals"),customer_id:this.debtorToView.id};this.apiSrv.read(n).then(o=>{"error"!=o.status?"error2"!=o.status?(this.debtorSalesTransactions=o.transactions,this.showDebtorSales=!0,this.spinner.hide(),this.loading=!1):(this.spinner.hide(),this.toastr.error("Please login again.","Login session expired!"),this.authSrv.logout()):(this.spinner.hide(),this.toastr.error(o.message))}).catch(o=>{this.toastr.error(o),this.spinner.hide()})}getDate(e){e=(e=e.toLocaleString("sv-SE",{hour12:!1})).split(" ")[0],this.debtorSalesTransactions.find(s=>s.transaction_date===e)?this.showDebtorDateSales(e):this.toastr.error("No sales for that date!")}showDebtorDateSales(e){this.dateToView=e,this.spinner.show("date");const n={action:this.cryptoSrv.encodeEncryptText("get-transfer-date-transactions"),customer_id:this.debtorToView.id,date:this.cryptoSrv.encodeEncryptText(e.toLocaleString("sv-SE",{hour12:!1}))};this.apiSrv.read(n).then(o=>{"error"!=o.status?"error2"!=o.status?(this.debtorDateSales=o.transactions,this.debtorDateSales.forEach(s=>{s.transaction_code=this.cryptoSrv.decryptEncodedText(s.transaction_code)}),this.showDebtorDateTransactions=!0,this.spinner.hide("date"),this.loading=!1):(this.spinner.hide("date"),this.toastr.error("Please login again.","Login session expired!"),this.authSrv.logout()):(this.spinner.hide("date"),this.toastr.error(o.message))}).catch(o=>{this.toastr.error(o),this.spinner.hide("date")})}showReceiptItems(e){this.receiptToView=e,this.displayItemsDialog=!0}showPayment(e,n){this.debtorToView=e,this.newPaymentModel.balance_before=n,this.showPaymentModal=!0,this.newPaymentModel.cash=0,this.newPaymentModel.mpesa=0,this.newPaymentModel.bank=0}addPayment(){this.spinner.show("new"),"cash"===this.newPaymentModel.channel?this.newPaymentModel.cash=this.newPaymentModel.amount:"mpesa"===this.newPaymentModel.channel?this.newPaymentModel.mpesa=this.newPaymentModel.amount:this.newPaymentModel.bank=this.newPaymentModel.amount;const e={action:this.cryptoSrv.encodeEncryptText("add-transfer-payment"),customer_id:this.debtorToView.id,payment_channel:this.cryptoSrv.encodeEncryptText(this.newPaymentModel.channel),cash:this.cryptoSrv.encodeEncryptText(this.newPaymentModel.cash.toString()),mpesa:this.cryptoSrv.encodeEncryptText(this.newPaymentModel.mpesa.toString()),bank:this.cryptoSrv.encodeEncryptText(this.newPaymentModel.bank.toString()),added_by:this.authSrv.getUserDetailToken("uid")};this.apiSrv.post(e).then(n=>{"error"!=n.status?"error2"!=n.status?(this.showNotification=!0,this.spinner.hide("new"),setTimeout(()=>{this.showPaymentModal=!1,this.newPaymentModel={},this.ngOnInit()},1700)):(this.spinner.hide("new"),this.toastr.error("Please login again.","Login session expired!"),this.authSrv.logout()):(this.spinner.hide("new"),this.toastr.error(n.message))}).catch(n=>{this.toastr.error(n),this.spinner.hide("new")})}getDebtorPayments(e){this.debtorToView=e,this.spinner.show();const n={action:this.cryptoSrv.encodeEncryptText("get-transfer-payments"),debtor_id:this.debtorToView.id};this.apiSrv.read(n).then(o=>{"error"!=o.status?"error2"!=o.status?(this.debtorPayments=o.payments,this.showDebtorPayments=!0,this.spinner.hide(),this.loading=!1):(this.spinner.hide(),this.toastr.error("Please login again.","Login session expired!"),this.authSrv.logout()):(this.spinner.hide(),this.toastr.error(o.message))}).catch(o=>{this.toastr.error(o),this.spinner.hide()})}showLimit(e){this.showNotification=!1,this.debtorToView=e,this.displayLimitForm=!0}deleteDebtor(e){this.confirmationService.confirm({message:"Are you sure you want to delete this transfer customer?",acceptButtonStyleClass:"p-button-primary p-button-sm",rejectButtonStyleClass:"p-button-danger p-button-sm",acceptLabel:"Yes",rejectLabel:"No",accept:()=>{this.spinner.show();const n={action:this.cryptoSrv.encodeEncryptText("delete-transfer"),customer_id:e.id,added_by:this.authSrv.getUserDetailToken("uid")};this.apiSrv.post(n).then(o=>{"error"!=o.status?"error2"!=o.status?(this.toastr.success("Transfer deleted!"),this.debtors=this.debtors.filter(s=>s.id!=e.id),this.spinner.hide()):(this.spinner.hide(),this.toastr.error("Please login again.","Login session expired!"),this.authSrv.logout()):(this.spinner.hide(),this.toastr.error(o.message))}).catch(o=>{this.toastr.error(o),this.spinner.hide()})},reject:()=>{}})}confirmDeletePayment(e){this.confirmationService.confirm({message:"Are you sure you want to delete this payment?",acceptButtonStyleClass:"p-button-primary p-button-sm",rejectButtonStyleClass:"p-button-danger p-button-sm",acceptLabel:"Yes",rejectLabel:"No",accept:()=>{this.delete(e)},reject:()=>{}})}delete(e){this.spinner.show("payment");const n={action:this.cryptoSrv.encodeEncryptText("delete-transfer-payment"),added_by:this.authSrv.getUserDetailToken("uid"),id:e.id,customer_id:this.debtorToView.id};this.apiSrv.post(n).then(o=>{"error"!=o.status?"error2"!=o.status?(this.toastr.success("Payment record deleted!"),this.debtorPayments=this.debtorPayments.filter(s=>s.id!==e.id)):(this.toastr.error("Please login again.","Login session expired!"),this.authSrv.logout()):this.toastr.error(o.message),this.spinner.hide("payment")}).catch(o=>{this.toastr.error(o),this.spinner.hide("payment")})}mobileFormatCorrect(e){return!("254"!==e.substring(0,3)||12!==e?.length||"-"===e.substring(0,1))}showNewCustomerForm(){this.newCustomer={},this.displayCustomerForm=!0}addNewCustomer(){this.spinner.show("newcustomer");const e={action:this.cryptoSrv.encodeEncryptText("add_new_transfer_customer"),name:this.cryptoSrv.encodeEncryptText(this.newCustomer.name),mobile_number:this.cryptoSrv.encodeEncryptText(this.newCustomer.mobile.toString()),added_by:this.authSrv.getUserDetailToken("uid")};this.apiSrv.post(e).then(n=>{"error"!=n.status?"error2"!=n.status?(this.showNotification=!0,setTimeout(()=>{this.displayCustomerForm=!1,this.newCustomer={},this.ngOnInit()},1700)):(this.toastr.error("Please login again.","Login session expired!"),this.authSrv.logout()):this.toastr.error(n.message),this.spinner.hide("newcustomer")}).catch(n=>{this.toastr.error(n),this.spinner.hide("newcustomer")})}getAllDebtorTransactions(e){this.debtorToView=e,this.spinner.show();const n={action:this.cryptoSrv.encodeEncryptText("get-all-transfer-transactions"),added_by:this.authSrv.getUserDetailToken("uid"),debtor_id:this.debtorToView.id};this.apiSrv.read(n).then(o=>{"error"!=o.status?"error2"!=o.status?(this.supplierTransactions=o.transactions,this.supplierTransactions.forEach(s=>{s.date_created=new Date(s.date_created)}),this.supplierTransactions=this.supplierTransactions.sort((s,l)=>l.date_created.getTime()-s.date_created.getTime()),this.showSupplierTransactions=!0,this.spinner.hide(),this.loading=!1):(this.spinner.hide(),this.toastr.error("Please login again.","Login session expired!"),this.authSrv.logout()):(this.spinner.hide(),this.toastr.error(o.message))}).catch(o=>{this.toastr.error(o),this.spinner.hide()})}filterSupplierTransactions(e){this.openingBalance=0,this.amountSupplied=0,this.amountPaid=0,this.closingBalance=0,this.openingBalance=e.filteredValue[e.filteredValue.length-1].opening_balance,e.filteredValue.forEach(n=>{"invoice"===n.transaction_type&&(this.amountSupplied+=parseFloat(n.amount.toString())),"payment"===n.transaction_type&&(this.amountPaid+=parseFloat(n.amount.toString()))}),this.closingBalance=e.filteredValue[0].closing_balance,this.filteredSupplierTransactions=e.filteredValue}resetSupplierTransactions(){this.openingBalance=0,this.amountSupplied=0,this.amountPaid=0,this.closingBalance=0,this.openingBalance=this.supplierTransactions[this.supplierTransactions.length-1].opening_balance,this.supplierTransactions.forEach(e=>{"invoice"===e.transaction_type&&(this.amountSupplied+=parseFloat(e.amount.toString())),"payment"===e.transaction_type&&(this.amountPaid+=parseFloat(e.amount.toString()))}),this.closingBalance=this.supplierTransactions[0].closing_balance}downloadReport(){this.spinner.show("transactions");let e=[];this.filteredSupplierTransactions.forEach(n=>{const o={};o.balance_bf=n.opening_balance,o.transaction_type=(0,u._)(n.transaction_type),o.amount=this._decimalPipe.transform(parseFloat(n.amount.toString()).toFixed(2),"1.2-2"),o.invoice_number=n.invoice_number,o.payment_channel=n.payment_channel,o.closing_balance=this._decimalPipe.transform(parseFloat(n.closing_balance.toString()).toFixed(2),"1.2-2"),o.transaction_date=n.date_created,o.posted_by=(0,u._)(n.added_by),o.paid_to=n.paid_to,e.push(o)}),this.downloadExcelFile(e,"Transaction history for debtor -  "+this.debtorToView.name)}downloadReportAll(){this.spinner.show("transactions");let e=[];this.filteredSupplierTransactions.forEach(n=>{const o={};o.balance_bf=n.opening_balance,o.transaction_type=(0,u._)(n.transaction_type),o.supplier=(0,u._)(n.supplier),o.amount=this._decimalPipe.transform(parseFloat(n.amount.toString()).toFixed(2),"1.2-2"),o.invoice_number=n.invoice_number,o.payment_channel=n.payment_channel,o.closing_balance=this._decimalPipe.transform(parseFloat(n.closing_balance.toString()).toFixed(2),"1.2-2"),o.transaction_date=n.date_created,o.posted_by=(0,u._)(n.added_by),o.paid_to=n.paid_to,e.push(o)}),this.downloadExcelFile(e,"Supply and payments transactions history")}downloadExcelFile(e,n){var o=this;return(0,x.Z)(function*(){const s=new b.Workbook,l=s.addWorksheet("Sheet1"),C=Object.keys(e[0]).map(m=>(0,u._)(m.split("_").join(" ")));l.addRow(C).eachCell(m=>{m.font={bold:!0}}),e.forEach(m=>{l.addRow(Object.values(m))}),yield l.protect("1234",{}),s.xlsx.writeBuffer().then(m=>{const P=new Blob([m],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});(0,_.saveAs)(P,n+".xlsx")}),o.spinner.hide("transactions")})()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(A.t2),t.Y36(N.$),t.Y36(D._W),t.Y36(J.e),t.Y36(g.JJ),t.Y36(k.s),t.Y36(w.YP))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-transfers"]],decls:107,vars:139,consts:[[1,"row"],["class","col-md-12 col-12 pl-0 ml-0",4,"ngIf"],["appendTo","body","modal","true",3,"header","closable","visible","style","baseZIndex","visibleChange",4,"ngIf"],["appendTo","body","modal","true",3,"header","closable","visible","baseZIndex","visibleChange","onHide"],["styleClass","p-datatable-customers","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"value","rowHover","rows","showCurrentPageReport","rowsPerPageOptions","loading","paginator","filterDelay","globalFilterFields"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["bdOpacity","#fff","bdColor","rgba(255,255,255,0.76)","size","medium","name","date","color","#02926e","type","ball-clip-rotate",3,"fullScreen"],[2,"color","#02926e"],["styleClass","p-datatable-customers","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"value","rowHover","rows","showCurrentPageReport","rowsPerPageOptions","paginator","filterDelay","globalFilterFields"],["dt12",""],["styleClass","p-datatable-customers","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"value","rowHover","rows","showCurrentPageReport","rowsPerPageOptions","paginator","filterDelay","globalFilterFields",4,"ngIf"],["bdOpacity","#fff","name","sell","bdColor","rgba(255,255,255,0.76)","size","medium","color","#02926e","type","ball-clip-rotate",3,"fullScreen"],["bdOpacity","#fff","name","payment","bdColor","rgba(255,255,255,0.76)","size","medium","color","#02926e","type","ball-clip-rotate",3,"fullScreen"],["appendTo","body","modal","true",3,"header","closable","visible","baseZIndex","visibleChange"],["autocomplete","off",3,"ngSubmit",4,"ngIf"],[3,"message","showNotification",4,"ngIf"],["bdOpacity","#fff","name","newcustomer","bdColor","rgba(255,255,255,0.76)","size","medium","color","#02926e","type","ball-clip-rotate",3,"fullScreen"],["appendTo","body","modal","true","header","Total debtors amount",3,"closable","visible","baseZIndex","visibleChange"],[1,"row","m-0","p-0",2,"background","#F7F7F8"],[1,"col-md-12"],[1,"card"],[1,"card-content"],[1,"card-body"],[1,"media"],[1,"media-body"],[2,"margin-bottom","0.99rem"],[1,"card-text","font-large-1"],["styleClass","p-datatable-customers","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"value","rowHover","rows","showCurrentPageReport","rowsPerPageOptions","loading","paginator","filterDelay","globalFilterFields","onFilter"],["dt89",""],[1,"row","px-2"],[1,"col-3"],[1,"card","card-inverse","bg-secondary"],[1,"media-body","text-center"],[1,"card-text"],["bdOpacity","#fff","bdColor","rgba(255,255,255,0.76)","size","medium","name","transactions","color","#02926e","type","ball-clip-rotate",3,"fullScreen"],["bdOpacity","#fff","bdColor","rgba(255,255,255,0.76)","size","medium","color","#02926e","type","ball-clip-rotate",3,"fullScreen"],["header","Confirm","icon","pi pi-exclamation-triangle","appendTo","body",3,"baseZIndex","closable"],[1,"col-md-12","col-12","pl-0","ml-0"],[1,"card","pl-0","ml-0"],[1,"card-header","pb-0"],[1,"card-title"],["label","Add a new transfer customer","icon","pi pi-plus","styleClass","float-right p-button-raised p-button-success p-button-sm",3,"click",4,"ngIf"],["icon","pi pi-eye","label","Show total debtors amount","styleClass","float-right p-button-raised p-button-info p-button-sm mr-5",3,"click",4,"ngIf"],[1,"card-body","pl-0","ml-0","pr-0","mr-0"],["label","Add a new transfer customer","icon","pi pi-plus","styleClass","float-right p-button-raised p-button-success p-button-sm",3,"click"],["icon","pi pi-eye","label","Show total debtors amount","styleClass","float-right p-button-raised p-button-info p-button-sm mr-5",3,"click"],[1,"ui-selectable-row"],["pSortableColumn","name",2,"width","15rem"],["pSortableColumn","total_amount.balance"],["field","total_amount.balance"],[2,"width","20rem"],["colspan","6"],["pInputText","","type","text","placeholder","Search name...",1,"ui-column-filter",3,"input"],[2,"word-wrap","normal"],["tooltipPosition","top","class","text-success",3,"pTooltip",4,"ngIf"],["tooltipPosition","top","class","success",3,"pTooltip",4,"ngIf"],["tooltipPosition","top",3,"pTooltip",4,"ngIf"],["ngbDropdown","","container","body","placement","bottom-start",1,"d-inline-block"],["type","button","pButton","","id","dropdownBasic1","ngbDropdownToggle","",1,"p-button-primary","p-button-outlined"],["ngbDropdownMenu","","aria-labelledby","dropdownBasic1",1,"dropdown-menu",2,"right","auto !important","left","0 !important"],["ngbDropdownItem","",3,"click"],[1,"pi","pi-list","mr-2"],["ngbDropdownItem","",3,"click",4,"ngIf"],["tooltipPosition","top",1,"text-success",3,"pTooltip"],["tooltipPosition","top",1,"success",3,"pTooltip"],[1,"fas","fa-check"],["tooltipPosition","top",3,"pTooltip"],[1,"pi","pi-plus","mr-2"],[1,"pi","pi-money-bill","mr-2"],[1,"pi","pi-trash","mr-2"],["colspan","7",2,"text-align","center"],["bdOpacity","#fff","name","new","bdColor","rgba(255,255,255,0.76)","size","medium","color","#02926e","type","ball-clip-rotate",3,"fullScreen"],["autocomplete","off",3,"ngSubmit"],["form2","ngForm"],[1,"ui-fluid","py-2"],[1,"p-field","py-2"],["for","firstname3"],["id","cash","name","amount","required","","min","0","type","number","pInputNumber","",1,"form-control",3,"ngModel","ngModelChange"],[1,"p-field","pb-2"],[1,"field-radiobutton"],["name","city","value","cash","inputId","city1",3,"ngModel","ngModelChange"],["for","city1",1,"primary"],[1,"fas","fa-money-bill"],["name","city","value","mpesa","inputId","city2",3,"ngModel","ngModelChange"],["for","city2",1,"success"],[1,"fas","fa-mobile-alt"],["name","city","value","bank","inputId","city3",3,"ngModel","ngModelChange"],["for","city3",1,"info"],[1,"fas","fa-money-check","info"],["type","button","pButton","","icon","pi pi-times","label","Close",1,"p-button-sm","p-button-danger","float-right",3,"click"],["type","submit","pButton","","icon","pi pi-check","label","Save",1,"p-button-success","p-button-sm","mr-3","float-right",3,"disabled"],[3,"message","showNotification"],["colspan","4"],["appendTo","body","name","start_date","required","","placeholder","Search date..","readonlyInput","true",3,"ngModel","maxDate","touchUI","monthNavigator","ngModelChange","onSelect"],["pButton","","type","button","icon","pi pi-list","label","Show sales",1,"p-button-sm","p-button-outlined","p-button-info",3,"click"],["colspan","5"],["pInputText","","type","text","placeholder","Search ...",1,"ui-column-filter",3,"input"],["label","Show receipt items","icon","pi pi-list","iconPos","right","styleClass","p-button-success p-button-outlined p-button-sm",3,"onClick"],["pSortableColumn","name",2,"width","10rem"],["field","name"],[2,"width","10rem"],["pInputText","","type","text","placeholder","Search item...",1,"ui-column-filter",3,"input"],["shape","circle"],["pButton","","type","button","class","p-button-outlined p-button-sm p-button-danger float-right","icon","pi pi-trash","label","Delete payment",3,"click",4,"ngIf"],["pButton","","type","button","icon","pi pi-trash","label","Delete payment",1,"p-button-outlined","p-button-sm","p-button-danger","float-right",3,"click"],["colspan","8",2,"text-align","center"],["bdOpacity","#fff","name","limit","bdColor","rgba(255,255,255,0.76)","size","medium","color","#02926e","type","ball-clip-rotate",3,"fullScreen"],[1,"ui-fluid"],[1,"p-field","py-3"],["type","button","pButton","","icon","pi pi-times","label","Close",1,"ui-button-danger","p-button-danger","float-right",3,"click"],["type","submit","pButton","","icon","pi pi-check","label","Save",1,"p-button-success","mr-3","float-right",3,"disabled"],["form3","ngForm"],[1,"p-field"],["for","cname",2,"text-transform","none"],["id","cname","name","name","type","username","required","","aria-describedby","cname-help","pInputText","",1,"form-control",3,"ngModel","ngModelChange"],[1,"ui-fluid","py-3"],["for","mobile",2,"text-transform","none"],["id","mobile","type","number","name","mobile","required","","aria-describedby","mobile-help","pInputNumber","",1,"form-control",3,"ngModel","ngModelChange"],["mobileCtrl","ngModel"],["class","danger","style","text-transform: none; font-style: itallic; font-size: 12px",4,"ngIf"],["type","button","pButton","","icon","pi pi-times","label","Close","styleClass","p-button-sm",1,"p-button-danger","float-right","small",3,"click"],["type","submit","pButton","","icon","pi pi-check","label","Add","styleClass","p-button-sm",1,"p-button-success","small","ml-3",3,"disabled"],[1,"danger",2,"text-transform","none","font-style","itallic","font-size","12px"],[2,"width","15rem"],[1,"flex","justify-content-center","align-items-center"],["type","date","field","date_created","display","menu"],["colspan","8"],["pInputText","","type","text","placeholder","Search...",1,"ui-column-filter",3,"input"],["pButton","","label","Clear filter","icon","pi pi-filter-slash",1,"p-button-outlined","p-button-sm","float-right","mr-5",3,"click"],["pButton","","label","Download Excel","class","p-button-outlined p-button-success p-button-sm float-right mr-5","icon","pi pi-download",3,"click",4,"ngIf"],["pButton","","label","Download Excel","icon","pi pi-download",1,"p-button-outlined","p-button-success","p-button-sm","float-right","mr-5",3,"click"]],template:function(e,n){if(1&e){const o=t.EpF();t.TgZ(0,"div",0),t.YNc(1,nt,14,14,"div",1),t.qZA(),t.YNc(2,st,6,12,"p-dialog",2),t.TgZ(3,"p-dialog",3),t.NdJ("visibleChange",function(l){return n.showDebtorSales=l})("onHide",function(){return n.showDebtorSales=!1,n.ngOnInit()}),t.ALo(4,"titlecase"),t.TgZ(5,"p-table",4,5),t.YNc(7,at,11,4,"ng-template",6),t.YNc(8,rt,12,11,"ng-template",7),t.YNc(9,lt,3,0,"ng-template",8),t.qZA(),t.TgZ(10,"ngx-spinner",9),t._UZ(11,"p",10),t.qZA()(),t.TgZ(12,"p-dialog",3),t.NdJ("visibleChange",function(l){return n.showDebtorDateTransactions=l})("onHide",function(){return n.showDebtorDateTransactions=!1}),t.ALo(13,"date"),t.TgZ(14,"p-table",11,12),t.YNc(16,pt,13,0,"ng-template",6),t.YNc(17,ct,14,12,"ng-template",7),t.qZA()(),t.TgZ(18,"p-dialog",3),t.NdJ("visibleChange",function(l){return n.displayItemsDialog=l})("onHide",function(){return n.displayItemsDialog=!1}),t.YNc(19,ht,4,10,"p-table",13),t.TgZ(20,"ngx-spinner",14),t._UZ(21,"p",10),t.qZA()(),t.TgZ(22,"p-dialog",3),t.NdJ("visibleChange",function(l){return n.showDebtorPayments=l})("onHide",function(){return n.showDebtorPayments=!1,n.ngOnInit()}),t.ALo(23,"titlecase"),t.TgZ(24,"p-table",4,5),t.YNc(26,gt,14,0,"ng-template",6),t.YNc(27,bt,22,23,"ng-template",7),t.YNc(28,Tt,3,0,"ng-template",8),t.qZA(),t.TgZ(29,"ngx-spinner",15),t._UZ(30,"p",10),t.qZA()(),t.YNc(31,xt,6,12,"p-dialog",2),t.TgZ(32,"p-dialog",16),t.NdJ("visibleChange",function(l){return n.displayCustomerForm=l}),t.YNc(33,vt,20,4,"form",17),t.YNc(34,Ct,1,2,"app-notification",18),t.TgZ(35,"ngx-spinner",19),t._UZ(36,"p",10),t.qZA()(),t.TgZ(37,"p-dialog",20),t.NdJ("visibleChange",function(l){return n.showTotal=l}),t.TgZ(38,"div",21)(39,"div",22)(40,"div",23)(41,"div",24)(42,"div",25)(43,"div",26)(44,"div",27)(45,"p",28),t._uU(46,"Ksh"),t.qZA(),t.TgZ(47,"h6",29),t._uU(48),t.ALo(49,"number"),t.qZA()()()()()()()()(),t.TgZ(50,"p-dialog",3),t.NdJ("visibleChange",function(l){return n.showSupplierTransactions=l})("onHide",function(){t.CHM(o);const l=t.MAs(53);return n.showSupplierTransactions=!1,l.reset(),n.resetSupplierTransactions(),n.ngOnInit(),t.KtG(n.supplierTransactions=[])}),t.ALo(51,"titlecase"),t.TgZ(52,"p-table",30,31),t.NdJ("onFilter",function(l){return n.filterSupplierTransactions(l)}),t.YNc(54,St,24,1,"ng-template",6),t.YNc(55,Mt,25,29,"ng-template",7),t.YNc(56,Ut,3,0,"ng-template",8),t.qZA(),t.TgZ(57,"div",32)(58,"div",33)(59,"div",34)(60,"div",24)(61,"div",25)(62,"div",26)(63,"div",35)(64,"p",28),t._uU(65,"Opening balance"),t.qZA(),t.TgZ(66,"h5",36),t._uU(67),t.ALo(68,"number"),t.qZA()()()()()()(),t.TgZ(69,"div",33)(70,"div",34)(71,"div",24)(72,"div",25)(73,"div",26)(74,"div",35)(75,"p",28),t._uU(76,"Amount supplied"),t.qZA(),t.TgZ(77,"h5",36),t._uU(78),t.ALo(79,"number"),t.qZA()()()()()()(),t.TgZ(80,"div",33)(81,"div",34)(82,"div",24)(83,"div",25)(84,"div",26)(85,"div",35)(86,"p",28),t._uU(87,"Amount paid"),t.qZA(),t.TgZ(88,"h5",36),t._uU(89),t.ALo(90,"number"),t.qZA()()()()()()(),t.TgZ(91,"div",33)(92,"div",34)(93,"div",24)(94,"div",25)(95,"div",26)(96,"div",35)(97,"p",28),t._uU(98,"Closing balance"),t.qZA(),t.TgZ(99,"h5",36),t._uU(100),t.ALo(101,"number"),t.qZA()()()()()()()(),t.TgZ(102,"ngx-spinner",37),t._UZ(103,"p",10),t.qZA()(),t.TgZ(104,"ngx-spinner",38),t._UZ(105,"p",10),t.qZA(),t._UZ(106,"p-confirmDialog",39)}2&e&&(t.xp6(1),t.Q6J("ngIf",!n.loading),t.xp6(1),t.Q6J("ngIf",n.showPaymentModal),t.xp6(1),t.Akn(t.DdM(123,Pt)),t.Q6J("header",n.showDebtorSales?"Sales for "+t.lcZ(4,100,n.debtorToView.name):"")("closable",!0)("visible",n.showDebtorSales)("baseZIndex",1e4),t.xp6(2),t.Q6J("value",n.debtorSalesTransactions)("rowHover",!0)("rows",10)("showCurrentPageReport",!0)("rowsPerPageOptions",t.DdM(124,h))("loading",n.loading)("paginator",!0)("filterDelay",0)("globalFilterFields",t.DdM(125,v)),t.xp6(5),t.Q6J("fullScreen",!1),t.xp6(2),t.Akn(t.DdM(126,M)),t.Q6J("header",n.showDebtorDateTransactions?"Transactions for the date: "+t.lcZ(13,102,n.dateToView):"")("closable",!0)("visible",n.showDebtorDateTransactions)("closable",!0)("baseZIndex",1e4),t.xp6(2),t.Q6J("value",n.debtorDateSales)("rowHover",!0)("rows",10)("showCurrentPageReport",!0)("rowsPerPageOptions",t.DdM(127,h))("paginator",!0)("filterDelay",0)("globalFilterFields",t.DdM(128,qt)),t.xp6(4),t.Akn(t.DdM(129,Nt)),t.Q6J("header",n.displayItemsDialog?"Items for receipt no: "+n.receiptToView.transaction_code:"")("closable",!0)("visible",n.displayItemsDialog)("closable",!0)("baseZIndex",1e4),t.xp6(1),t.Q6J("ngIf",n.displayItemsDialog),t.xp6(1),t.Q6J("fullScreen",!1),t.xp6(2),t.Akn(t.DdM(130,M)),t.Q6J("header",n.showDebtorPayments?"Payments made by "+t.lcZ(23,104,n.debtorToView.name):"")("closable",!0)("visible",n.showDebtorPayments)("baseZIndex",1e4),t.xp6(2),t.Q6J("value",n.debtorPayments)("rowHover",!0)("rows",10)("showCurrentPageReport",!0)("rowsPerPageOptions",t.DdM(131,h))("loading",n.loading)("paginator",!0)("filterDelay",0)("globalFilterFields",t.DdM(132,v)),t.xp6(5),t.Q6J("fullScreen",!1),t.xp6(2),t.Q6J("ngIf",n.displayLimitForm),t.xp6(1),t.Akn(t.DdM(133,y)),t.Q6J("header",n.showNotification?"":"New transfer customer")("closable",!1)("visible",n.displayCustomerForm)("baseZIndex",1e4),t.xp6(1),t.Q6J("ngIf",!n.showNotification),t.xp6(1),t.Q6J("ngIf",n.showNotification),t.xp6(1),t.Q6J("fullScreen",!1),t.xp6(2),t.Akn(t.DdM(134,Dt)),t.Q6J("closable",!0)("visible",n.showTotal)("baseZIndex",1e4),t.xp6(3),t.Q6J("@enter",void 0),t.xp6(8),t.Oqu(t.xi3(49,106,n.totalOwed,".2")),t.xp6(2),t.Akn(t.DdM(135,Jt)),t.Q6J("header",n.showSupplierTransactions?"All transactions for "+t.lcZ(51,109,n.debtorToView.name):"")("closable",!0)("visible",n.showSupplierTransactions)("baseZIndex",1e4),t.xp6(2),t.Q6J("value",n.supplierTransactions)("rowHover",!0)("rows",10)("showCurrentPageReport",!0)("rowsPerPageOptions",t.DdM(136,h))("loading",n.loading)("paginator",!0)("filterDelay",0)("globalFilterFields",t.DdM(137,kt)),t.xp6(15),t.hij("Ksh ",t.xi3(68,111,n.openingBalance,".2"),""),t.xp6(11),t.hij("Ksh ",t.xi3(79,114,n.amountSupplied,".2"),""),t.xp6(11),t.hij("Ksh ",t.xi3(90,117,n.amountPaid,".2"),""),t.xp6(11),t.hij("Ksh ",t.xi3(101,120,n.closingBalance,".2"),""),t.xp6(2),t.Q6J("fullScreen",!1),t.xp6(2),t.Q6J("fullScreen",!0),t.xp6(2),t.Akn(t.DdM(138,y)),t.Q6J("baseZIndex",1e4)("closable",!1))},dependencies:[g.O5,A.Ro,d._Y,d.Fj,d.wV,d.JJ,d.JL,d.Q7,d.qQ,d.On,d.F,I.V,w.$_,w.jx,F.Q,S.Hq,S.zx,T.iA,T.lQ,T.fz,T.xl,L.o,Q.u,Z.jt,Z.iD,Z.Vi,Z.TH,E.H,H.q,j.EU,B.f,O.c,g.JJ,g.rS,g.uU],data:{animation:[(0,c.X$)("enter",[(0,c.eR)("void => *",[(0,c.oB)({opacity:0}),(0,c.jt)(1e3,(0,c.oB)({opacity:1}))])])]}}),i})(),data:{title:"Expenses"}}];let Ft=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[p.Bz.forChild(It),p.Bz]}),i})();var Lt=r(4397);let Qt=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[Ft,Lt.U]}),i})()}}]);