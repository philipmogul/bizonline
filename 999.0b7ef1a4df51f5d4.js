"use strict";(self.webpackChunkmatngular=self.webpackChunkmatngular||[]).push([[999],{3942:(T,g,l)=>{l.d(g,{c:()=>d});var a=l(4650);let d=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(u){return new(u||e)},e.\u0275cmp=a.Xpm({type:e,selectors:[["app-notification"]],inputs:{message:"message",showNotification:"showNotification"},decls:6,vars:1,consts:[[1,"wrapper1"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 52 52",1,"checkmark"],["cx","26","cy","26","r","25","fill","none",1,"checkmark__circle"],["fill","none","d","M14.1 27.2l7.1 7.2 16.7-16.8",1,"checkmark__check"],[2,"position","absolute","margin-top","150px","margin-bottom","50px","font-weight","bold"]],template:function(u,h){1&u&&(a.TgZ(0,"div",0),a.O4$(),a.TgZ(1,"svg",1),a._UZ(2,"circle",2)(3,"path",3),a.qZA(),a.kcU(),a.TgZ(4,"p",4),a._uU(5),a.qZA()()),2&u&&(a.xp6(5),a.hij(" ",h.message," "))},styles:["*[_ngcontent-%COMP%]{padding:0;margin:0}.wrapper1[_ngcontent-%COMP%]{height:100%;display:flex;justify-content:center;align-items:center;background-color:transparent}.checkmark__circle[_ngcontent-%COMP%]{stroke-dasharray:166;stroke-dashoffset:166;stroke-width:2;stroke-miterlimit:10;stroke:#7ac142;fill:none;animation:stroke .6s cubic-bezier(.65,0,.45,1) forwards}.checkmark[_ngcontent-%COMP%]{width:56px;height:56px;border-radius:50%;display:block;stroke-width:2;stroke:#fff;stroke-miterlimit:10;margin:10% auto;box-shadow:inset 0 0 #7ac142;animation:fill .4s ease-in-out .4s forwards,scale .3s ease-in-out .9s both}.checkmark__check[_ngcontent-%COMP%]{transform-origin:50% 50%;stroke-dasharray:48;stroke-dashoffset:48;animation:stroke .3s cubic-bezier(.65,0,.45,1) .8s forwards}@keyframes stroke{to{stroke-dashoffset:0}}@keyframes scale{0%,to{transform:none}50%{transform:scale3d(1.1,1.1,1)}}@keyframes fill{to{box-shadow:inset 0 0 0 30px #7ac142}}"]}),e})()},4999:(T,g,l)=>{l.r(g),l.d(g,{UserAccountsModule:()=>de});var a=l(2318),d=l(7340),e=l(4650),p=l(8423),u=l(3166),h=l(7185),b=l(1927),w=l(1932),m=l(805),f=l(6895),_=l(4006),x=l(1493),C=l(2137),A=l(5593),v=l(3087),M=l(1740),y=l(666),J=l(3608),k=l(9091),q=l(5369),E=l(4920),N=l(8568),S=l(3942);function Q(s,r){if(1&s){const t=e.EpF();e.TgZ(0,"tr",19)(1,"th",20),e._uU(2," User name "),e._UZ(3,"p-sortIcon",21),e.qZA(),e.TgZ(4,"th"),e._uU(5,"Mobile number "),e.qZA(),e.TgZ(6,"th"),e._uU(7,"Role"),e.qZA(),e.TgZ(8,"th"),e._uU(9,"Activated"),e.qZA(),e._UZ(10,"th",22),e.qZA(),e.TgZ(11,"tr")(12,"th")(13,"input",23),e.NdJ("input",function(o){e.CHM(t),e.oxw();const n=e.MAs(10);return e.KtG(n.filter(o.target.value,"username","contains"))}),e.qZA()(),e._UZ(14,"th")(15,"th")(16,"th")(17,"th"),e.qZA()}}function H(s,r){if(1&s){const t=e.EpF();e.TgZ(0,"button",30),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,n=e.oxw(2);return e.KtG(n.enableUser(o))}),e.qZA()}}function I(s,r){if(1&s){const t=e.EpF();e.TgZ(0,"button",31),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,n=e.oxw(2);return e.KtG(n.disableUser(o))}),e.qZA()}}function K(s,r){if(1&s){const t=e.EpF();e.TgZ(0,"button",32),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,n=e.oxw(2);return e.KtG(n.deleteAccount(o))}),e.qZA()}}function G(s,r){if(1&s){const t=e.EpF();e.TgZ(0,"tr",24)(1,"td",25)(2,"label"),e._uU(3),e.ALo(4,"titlecase"),e.qZA()(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e.YNc(10,H,1,0,"button",26),e.YNc(11,I,1,0,"button",27),e.qZA(),e.TgZ(12,"td"),e.YNc(13,K,1,0,"button",28),e.TgZ(14,"button",29),e.NdJ("click",function(){const n=e.CHM(t).$implicit,c=e.oxw(2);return e.KtG(c.showEdit(n))}),e.qZA()()()}if(2&s){const t=r.$implicit,i=e.oxw(2);e.xp6(3),e.hij(" ",e.lcZ(4,6,t.username)," "),e.xp6(3),e.hij(" ",t.mobile," "),e.xp6(2),e.hij(" ",t.role," "),e.xp6(2),e.Q6J("ngIf",1==t.disabled&&i.authSrv.getUserDetailToken("uid")!=t.id),e.xp6(1),e.Q6J("ngIf",0==t.disabled&&i.authSrv.getUserDetailToken("uid")!=t.id),e.xp6(2),e.Q6J("ngIf",i.authSrv.getUserDetailToken("uid")!=t.id)}}function P(s,r){1&s&&(e.TgZ(0,"tr")(1,"td",33),e._uU(2,"No users found."),e.qZA()())}const U=function(){return[10,25,50]},D=function(){return["name"]};function O(s,r){if(1&s){const t=e.EpF();e.TgZ(0,"div",6)(1,"div",7)(2,"div",8)(3,"div",9)(4,"h4",10),e._uU(5," User accounts "),e.TgZ(6,"button",11),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.showNewDialog())}),e.qZA()()(),e.TgZ(7,"div",12)(8,"div",13)(9,"p-table",14,15),e.YNc(11,Q,18,0,"ng-template",16),e.YNc(12,G,15,8,"ng-template",17),e.YNc(13,P,3,0,"ng-template",18),e.qZA()()()()()()}if(2&s){const t=e.oxw();e.xp6(1),e.Q6J("@enter",void 0),e.xp6(8),e.Q6J("value",t.users)("rowHover",!0)("rows",10)("showCurrentPageReport",!0)("rowsPerPageOptions",e.DdM(11,U))("loading",t.loading)("paginator",!0)("filterDelay",0)("globalFilterFields",e.DdM(12,D))("responsive",!0)}}function F(s,r){1&s&&(e.TgZ(0,"p",55),e._uU(1," Mobile number must be in the format 254XXXXXXXXX. "),e.qZA())}function Y(s,r){if(1&s){const t=e.EpF();e.TgZ(0,"div")(1,"form",38,39),e.NdJ("ngSubmit",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.updateUser())}),e.TgZ(3,"div",40)(4,"div",41)(5,"label",42),e._uU(6,"User name"),e.qZA(),e._UZ(7,"br"),e.TgZ(8,"input",43),e.NdJ("ngModelChange",function(o){e.CHM(t);const n=e.oxw(2);return e.KtG(n.userToEdit.username=o)}),e.qZA()(),e.TgZ(9,"div",41)(10,"label",42),e._uU(11,"Mobile number"),e.qZA(),e._UZ(12,"br"),e.TgZ(13,"input",44,45),e.NdJ("ngModelChange",function(o){e.CHM(t);const n=e.oxw(2);return e.KtG(n.userToEdit.mobile=o)}),e.qZA(),e.YNc(15,F,2,0,"p",46),e.qZA(),e.TgZ(16,"div",41)(17,"label",47),e._uU(18,"Password"),e.qZA(),e._UZ(19,"br"),e.TgZ(20,"input",48),e.NdJ("ngModelChange",function(o){e.CHM(t);const n=e.oxw(2);return e.KtG(n.userToEdit.password=o)}),e.qZA()()(),e.TgZ(21,"div",49)(22,"div",50)(23,"p-footer",51),e._UZ(24,"button",52),e.TgZ(25,"button",53),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return o.showEditDialog=!1,e.KtG(o.ngOnInit())}),e.qZA()()()()(),e.TgZ(26,"ngx-spinner",54),e._UZ(27,"p",4),e.qZA()()}if(2&s){const t=e.MAs(2),i=e.MAs(14),o=e.oxw(2);e.xp6(4),e.Q6J("@enter",void 0),e.xp6(4),e.Q6J("ngModel",o.userToEdit.username),e.xp6(1),e.Q6J("@enter",void 0),e.xp6(4),e.Q6J("ngModel",o.userToEdit.mobile),e.xp6(2),e.Q6J("ngIf",!i.valid||o.onlineEvent&&null!=(null==i?null:i.value)&&!o.mobileFormatCorrect(null==i?null:i.value.toString())),e.xp6(1),e.Q6J("@enter",void 0),e.xp6(4),e.Q6J("ngModel",o.userToEdit.password),e.xp6(4),e.Q6J("disabled",!t.valid||!i.valid||o.onlineEvent&&null!=(null==i?null:i.value)&&!o.mobileFormatCorrect(null==i?null:i.value.toString())),e.xp6(2),e.Q6J("fullScreen",!1)}}function j(s,r){if(1&s){const t=e.EpF();e.TgZ(0,"div",56)(1,"div",6)(2,"div",57)(3,"div",58)(4,"label",59),e._uU(5,"User can make cash sales"),e.qZA(),e._UZ(6,"i",60),e.TgZ(7,"ui-switch",61),e.NdJ("ngModelChange",function(o){e.CHM(t);const n=e.oxw(2);return e.KtG(n.userToEdit.roles.sell_cash=o)}),e.qZA()(),e._UZ(8,"hr"),e.TgZ(9,"div",58)(10,"label",59),e._uU(11,"User can sell to debtors"),e.qZA(),e._UZ(12,"i",62),e.TgZ(13,"ui-switch",61),e.NdJ("ngModelChange",function(o){e.CHM(t);const n=e.oxw(2);return e.KtG(n.userToEdit.roles.sell_debtors=o)}),e.qZA()(),e._UZ(14,"hr"),e.TgZ(15,"div",58)(16,"label",59),e._uU(17,"User can reverse a sale"),e.qZA(),e._UZ(18,"i",63),e.TgZ(19,"ui-switch",61),e.NdJ("ngModelChange",function(o){e.CHM(t);const n=e.oxw(2);return e.KtG(n.userToEdit.roles.reversing_cash=o)}),e.qZA()(),e._UZ(20,"hr"),e.TgZ(21,"div",58)(22,"label",59),e._uU(23,"User can create customer waiting list"),e.qZA(),e._UZ(24,"i",64),e.TgZ(25,"ui-switch",61),e.NdJ("ngModelChange",function(o){e.CHM(t);const n=e.oxw(2);return e.KtG(n.userToEdit.roles.add_waiting_customer=o)}),e.qZA()(),e._UZ(26,"hr"),e.TgZ(27,"div",58)(28,"label",59),e._uU(29,"User can print receipts before selling"),e.qZA(),e._UZ(30,"i",65),e.TgZ(31,"ui-switch",61),e.NdJ("ngModelChange",function(o){e.CHM(t);const n=e.oxw(2);return e.KtG(n.userToEdit.roles.print_items=o)}),e.qZA()(),e._UZ(32,"hr"),e.TgZ(33,"div",58)(34,"label",59),e._uU(35,"User can add debtors"),e.qZA(),e._UZ(36,"i",66),e.TgZ(37,"ui-switch",61),e.NdJ("ngModelChange",function(o){e.CHM(t);const n=e.oxw(2);return e.KtG(n.userToEdit.roles.adding_new_debtors=o)}),e.qZA()(),e._UZ(38,"hr"),e.TgZ(39,"div",58)(40,"label",59),e._uU(41,"User can send messages to customers."),e.qZA(),e._UZ(42,"i",67),e.TgZ(43,"ui-switch",61),e.NdJ("ngModelChange",function(o){e.CHM(t);const n=e.oxw(2);return e.KtG(n.userToEdit.roles.sending_customer_messages=o)}),e.qZA()(),e._UZ(44,"hr"),e.TgZ(45,"div",58)(46,"label",59),e._uU(47,"User can set balance limits for debtor's"),e.qZA(),e._UZ(48,"i",68),e.TgZ(49,"ui-switch",61),e.NdJ("ngModelChange",function(o){e.CHM(t);const n=e.oxw(2);return e.KtG(n.userToEdit.roles.set_debtor_limits=o)}),e.qZA()(),e._UZ(50,"hr"),e.TgZ(51,"div",58)(52,"label",59),e._uU(53,"User can add stock"),e.qZA(),e._UZ(54,"i",69),e.TgZ(55,"ui-switch",61),e.NdJ("ngModelChange",function(o){e.CHM(t);const n=e.oxw(2);return e.KtG(n.userToEdit.roles.adding_supplier_stock=o)}),e.qZA()(),e._UZ(56,"hr"),e.TgZ(57,"div",58)(58,"label",59),e._uU(59,"User can add new suppliers"),e.qZA(),e._UZ(60,"i",70),e.TgZ(61,"ui-switch",61),e.NdJ("ngModelChange",function(o){e.CHM(t);const n=e.oxw(2);return e.KtG(n.userToEdit.roles.adding_suppliers=o)}),e.qZA()(),e._UZ(62,"hr"),e.TgZ(63,"div",58)(64,"label",59),e._uU(65,"User can add stock positive"),e.qZA(),e._UZ(66,"i",71),e.TgZ(67,"ui-switch",61),e.NdJ("ngModelChange",function(o){e.CHM(t);const n=e.oxw(2);return e.KtG(n.userToEdit.roles.adding_stock_positive=o)}),e.qZA()(),e._UZ(68,"hr"),e.TgZ(69,"div",58)(70,"label",59),e._uU(71,"User can add stock negative"),e.qZA(),e._UZ(72,"i",72),e.TgZ(73,"ui-switch",61),e.NdJ("ngModelChange",function(o){e.CHM(t);const n=e.oxw(2);return e.KtG(n.userToEdit.roles.adding_stock_negative=o)}),e.qZA()(),e._UZ(74,"hr"),e.qZA(),e.TgZ(75,"div",57)(76,"div",58)(77,"label",59),e._uU(78,"User can add expenses"),e.qZA(),e._UZ(79,"i",73),e.TgZ(80,"ui-switch",61),e.NdJ("ngModelChange",function(o){e.CHM(t);const n=e.oxw(2);return e.KtG(n.userToEdit.roles.adding_expenses=o)}),e.qZA()(),e._UZ(81,"hr"),e.TgZ(82,"div",58)(83,"label",59),e._uU(84,"User can receive debtor payments"),e.qZA(),e._UZ(85,"i",74),e.TgZ(86,"ui-switch",61),e.NdJ("ngModelChange",function(o){e.CHM(t);const n=e.oxw(2);return e.KtG(n.userToEdit.roles.receiving_debtor_payments=o)}),e.qZA()(),e._UZ(87,"hr"),e.TgZ(88,"div",58)(89,"label",59),e._uU(90,"User can add transfer shops"),e.qZA(),e._UZ(91,"i",75),e.TgZ(92,"ui-switch",61),e.NdJ("ngModelChange",function(o){e.CHM(t);const n=e.oxw(2);return e.KtG(n.userToEdit.roles.adding_transfer_customers=o)}),e.qZA()(),e._UZ(93,"hr"),e.TgZ(94,"div",76)(95,"label",59),e._uU(96,"User can transfer items to another shop"),e.qZA(),e._UZ(97,"i",77),e.TgZ(98,"ui-switch",61),e.NdJ("ngModelChange",function(o){e.CHM(t);const n=e.oxw(2);return e.KtG(n.userToEdit.roles.sell_transfer=o)}),e.qZA()(),e._UZ(99,"hr"),e.TgZ(100,"div",76)(101,"label",59),e._uU(102,"User can manage stock items"),e.qZA(),e._UZ(103,"i",78),e.TgZ(104,"ui-switch",61),e.NdJ("ngModelChange",function(o){e.CHM(t);const n=e.oxw(2);return e.KtG(n.userToEdit.roles.manage_stock=o)}),e.qZA()(),e._UZ(105,"hr"),e.TgZ(106,"div",76)(107,"label",59),e._uU(108,"User can update buying prices"),e.qZA(),e._UZ(109,"i",79),e.TgZ(110,"ui-switch",61),e.NdJ("ngModelChange",function(o){e.CHM(t);const n=e.oxw(2);return e.KtG(n.userToEdit.roles.updating_buying_price=o)}),e.qZA()(),e._UZ(111,"hr"),e.TgZ(112,"div",76)(113,"label",59),e._uU(114,"User can do stock inter location"),e.qZA(),e._UZ(115,"i",80),e.TgZ(116,"ui-switch",61),e.NdJ("ngModelChange",function(o){e.CHM(t);const n=e.oxw(2);return e.KtG(n.userToEdit.roles.adding_interlocation=o)}),e.qZA()(),e._UZ(117,"hr"),e.TgZ(118,"div",76)(119,"label",59),e._uU(120,"User can view current sales"),e.qZA(),e._UZ(121,"i",81),e.TgZ(122,"ui-switch",61),e.NdJ("ngModelChange",function(o){e.CHM(t);const n=e.oxw(2);return e.KtG(n.userToEdit.roles.current_sales=o)}),e.qZA()(),e._UZ(123,"hr"),e.TgZ(124,"div",76)(125,"label",59),e._uU(126,"User can perform stock taking"),e.qZA(),e._UZ(127,"i",82),e.TgZ(128,"ui-switch",61),e.NdJ("ngModelChange",function(o){e.CHM(t);const n=e.oxw(2);return e.KtG(n.userToEdit.roles.stock_taking=o)}),e.qZA()(),e._UZ(129,"hr"),e.TgZ(130,"div",76)(131,"label",59),e._uU(132,"User can close selling operations"),e.qZA(),e._UZ(133,"i",77),e.TgZ(134,"ui-switch",61),e.NdJ("ngModelChange",function(o){e.CHM(t);const n=e.oxw(2);return e.KtG(n.userToEdit.roles.close_sales=o)}),e.qZA()(),e._UZ(135,"hr"),e.TgZ(136,"div",76)(137,"label",59),e._uU(138,"User can view stock report"),e.qZA(),e._UZ(139,"i",83),e.TgZ(140,"ui-switch",61),e.NdJ("ngModelChange",function(o){e.CHM(t);const n=e.oxw(2);return e.KtG(n.userToEdit.roles.view_stock_report=o)}),e.qZA()(),e._UZ(141,"hr"),e.TgZ(142,"div",76)(143,"label",59),e._uU(144,"User can view sales report"),e.qZA(),e._UZ(145,"i",84),e.TgZ(146,"ui-switch",61),e.NdJ("ngModelChange",function(o){e.CHM(t);const n=e.oxw(2);return e.KtG(n.userToEdit.roles.view_sales_report=o)}),e.qZA()(),e._UZ(147,"hr"),e.qZA()(),e._UZ(148,"p"),e.TgZ(149,"div",49)(150,"div",50)(151,"p-footer",51)(152,"button",85),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.updateUserRoles())}),e.qZA(),e.TgZ(153,"button",53),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return o.showEditDialog=!1,e.KtG(o.ngOnInit())}),e.qZA()()()(),e.TgZ(154,"ngx-spinner",54),e._UZ(155,"p",4),e.qZA()()}if(2&s){const t=e.oxw(2);e.xp6(7),e.Q6J("ngModel",t.userToEdit.roles.sell_cash),e.xp6(6),e.Q6J("ngModel",t.userToEdit.roles.sell_debtors),e.xp6(6),e.Q6J("ngModel",t.userToEdit.roles.reversing_cash),e.xp6(6),e.Q6J("ngModel",t.userToEdit.roles.add_waiting_customer),e.xp6(6),e.Q6J("ngModel",t.userToEdit.roles.print_items),e.xp6(6),e.Q6J("ngModel",t.userToEdit.roles.adding_new_debtors),e.xp6(6),e.Q6J("ngModel",t.userToEdit.roles.sending_customer_messages),e.xp6(6),e.Q6J("ngModel",t.userToEdit.roles.set_debtor_limits),e.xp6(6),e.Q6J("ngModel",t.userToEdit.roles.adding_supplier_stock),e.xp6(6),e.Q6J("ngModel",t.userToEdit.roles.adding_suppliers),e.xp6(6),e.Q6J("ngModel",t.userToEdit.roles.adding_stock_positive),e.xp6(6),e.Q6J("ngModel",t.userToEdit.roles.adding_stock_negative),e.xp6(7),e.Q6J("ngModel",t.userToEdit.roles.adding_expenses),e.xp6(6),e.Q6J("ngModel",t.userToEdit.roles.receiving_debtor_payments),e.xp6(6),e.Q6J("ngModel",t.userToEdit.roles.adding_transfer_customers),e.xp6(6),e.Q6J("ngModel",t.userToEdit.roles.sell_transfer),e.xp6(6),e.Q6J("ngModel",t.userToEdit.roles.manage_stock),e.xp6(6),e.Q6J("ngModel",t.userToEdit.roles.updating_buying_price),e.xp6(6),e.Q6J("ngModel",t.userToEdit.roles.adding_interlocation),e.xp6(6),e.Q6J("ngModel",t.userToEdit.roles.current_sales),e.xp6(6),e.Q6J("ngModel",t.userToEdit.roles.stock_taking),e.xp6(6),e.Q6J("ngModel",t.userToEdit.roles.close_sales),e.xp6(6),e.Q6J("ngModel",t.userToEdit.roles.view_stock_report),e.xp6(6),e.Q6J("ngModel",t.userToEdit.roles.view_sales_report),e.xp6(8),e.Q6J("fullScreen",!1)}}function L(s,r){if(1&s&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&s){const t=r.$implicit;e.xp6(1),e.Oqu(t.name)}}function R(s,r){if(1&s&&(e.TgZ(0,"div",94)(1,"div"),e._uU(2),e.qZA()()),2&s){const t=r.$implicit;e.xp6(2),e.Oqu(t.name)}}function B(s,r){1&s&&(e.TgZ(0,"tr",19),e._UZ(1,"th"),e.TgZ(2,"th"),e._uU(3,"Location"),e.qZA(),e._UZ(4,"th",96),e.qZA())}function X(s,r){if(1&s){const t=e.EpF();e.TgZ(0,"tr",24)(1,"td"),e._uU(2),e.ALo(3,"titlecase"),e.qZA(),e.TgZ(4,"td")(5,"p-colorPicker",97),e.NdJ("ngModelChange",function(o){e.CHM(t);const n=e.oxw(4);return e.KtG(n.locationSelected.color=o)}),e.qZA()(),e.TgZ(6,"td")(7,"ui-switch",61),e.NdJ("ngModelChange",function(o){const c=e.CHM(t).$implicit;return e.KtG(c.value=o)}),e.qZA()()()}if(2&s){const t=r.$implicit,i=e.oxw(4);e.xp6(2),e.hij(" ",e.lcZ(3,3,t.key)," "),e.xp6(3),e.Q6J("ngModel",i.locationSelected.color),e.xp6(2),e.Q6J("ngModel",t.value)}}const $=function(){return["name","description"]};function z(s,r){if(1&s&&(e.TgZ(0,"p-table",95,15),e.YNc(2,B,5,0,"ng-template",16),e.YNc(3,X,8,5,"ng-template",17),e.qZA()),2&s){const t=e.oxw(3);e.Q6J("value",t.rightsToEdit)("rowHover",!0)("rows",10)("showCurrentPageReport",!0)("rowsPerPageOptions",e.DdM(8,U))("paginator",!0)("filterDelay",0)("globalFilterFields",e.DdM(9,$))}}function W(s,r){if(1&s){const t=e.EpF();e.TgZ(0,"div",49)(1,"div",50)(2,"p-footer",51)(3,"button",85),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(3);return e.KtG(o.updateUserLocationRights())}),e.qZA(),e.TgZ(4,"button",53),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(3);return o.showEditDialog=!1,e.KtG(o.ngOnInit())}),e.qZA()()()()}}function V(s,r){if(1&s){const t=e.EpF();e.TgZ(0,"div",56)(1,"div",86)(2,"div",40)(3,"div",87)(4,"label",88),e._uU(5,"Select location to set rights"),e.qZA(),e._UZ(6,"br")(7,"br"),e.TgZ(8,"p-dropdown",89),e.NdJ("onChange",function(o){e.CHM(t);const n=e.oxw(2);return e.KtG(n.updateLocationSelected(o))})("ngModelChange",function(o){e.CHM(t);const n=e.oxw(2);return e.KtG(n.locationSelected=o)}),e.YNc(9,L,2,1,"ng-template",90),e.YNc(10,R,3,1,"ng-template",91),e.qZA()()()(),e.YNc(11,z,4,10,"p-table",92),e.YNc(12,W,5,0,"div",93),e.TgZ(13,"ngx-spinner",54),e._UZ(14,"p",4),e.qZA()()}if(2&s){const t=e.oxw(2);e.xp6(8),e.Q6J("options",t.locations)("ngModel",t.locationSelected),e.xp6(3),e.Q6J("ngIf",t.rightsToEdit.length>0),e.xp6(1),e.Q6J("ngIf",t.rightsToEdit.length>0),e.xp6(1),e.Q6J("fullScreen",!1)}}function ee(s,r){if(1&s){const t=e.EpF();e.TgZ(0,"div",6)(1,"div",34)(2,"p-steps",35),e.NdJ("activeIndexChange",function(o){e.CHM(t);const n=e.oxw();return e.KtG(n.activeIndex=o)}),e.qZA(),e.YNc(3,Y,28,9,"div",36),e.YNc(4,j,156,25,"div",37),e.YNc(5,V,15,5,"div",37),e.qZA()()}if(2&s){const t=e.oxw();e.xp6(2),e.Q6J("model",t.items)("activeIndex",t.activeIndex)("readonly",!1),e.xp6(1),e.Q6J("ngIf",0===t.activeIndex),e.xp6(1),e.Q6J("ngIf",1===t.activeIndex&&t.authSrv.getUserDetailToken("uid")!=t.userToEdit.id),e.xp6(1),e.Q6J("ngIf",2===t.activeIndex&&t.authSrv.getUserDetailToken("uid")!=t.userToEdit.id)}}function te(s,r){1&s&&(e.TgZ(0,"p",55),e._uU(1," Mobile number must be in the format 254XXXXXXXXX. "),e.qZA())}function oe(s,r){if(1&s){const t=e.EpF();e.TgZ(0,"div")(1,"form",100,39)(3,"div",40)(4,"div",41)(5,"label",42),e._uU(6,"User name"),e.qZA(),e._UZ(7,"br"),e.TgZ(8,"input",43),e.NdJ("ngModelChange",function(o){e.CHM(t);const n=e.oxw(3);return e.KtG(n.newUser.username=o)}),e.qZA()(),e.TgZ(9,"div",41)(10,"label",42),e._uU(11,"Mobile number"),e.qZA(),e._UZ(12,"br"),e.TgZ(13,"input",44,45),e.NdJ("ngModelChange",function(o){e.CHM(t);const n=e.oxw(3);return e.KtG(n.newUser.mobile=o)}),e.qZA(),e.YNc(15,te,2,0,"p",46),e.qZA(),e.TgZ(16,"div",41)(17,"label",47),e._uU(18,"Password"),e.qZA(),e._UZ(19,"br"),e.TgZ(20,"input",48),e.NdJ("ngModelChange",function(o){e.CHM(t);const n=e.oxw(3);return e.KtG(n.newUser.password=o)}),e.qZA()()(),e.TgZ(21,"div",6)(22,"div",101)(23,"p-footer",51)(24,"button",102),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(3);return e.KtG(o.activeIndex=o.activeIndex+1)}),e.qZA(),e.TgZ(25,"button",103),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(3);return o.showNewUserDialog=!1,e.KtG(o.ngOnInit())}),e.qZA()()()()(),e.TgZ(26,"ngx-spinner",54),e._UZ(27,"p",4),e.qZA()()}if(2&s){const t=e.MAs(2),i=e.MAs(14),o=e.oxw(3);e.xp6(4),e.Q6J("@enter",void 0),e.xp6(4),e.Q6J("ngModel",o.newUser.username),e.xp6(1),e.Q6J("@enter",void 0),e.xp6(4),e.Q6J("ngModel",o.newUser.mobile),e.xp6(2),e.Q6J("ngIf",!i.valid||null!=(null==i?null:i.value)&&!o.mobileFormatCorrect(null==i?null:i.value.toString())),e.xp6(1),e.Q6J("@enter",void 0),e.xp6(4),e.Q6J("ngModel",o.newUser.password),e.xp6(4),e.Q6J("disabled",!t.valid||!i.valid||null!=(null==i?null:i.value)&&!o.mobileFormatCorrect(null==i?null:i.value.toString())),e.xp6(2),e.Q6J("fullScreen",!1)}}function ne(s,r){if(1&s){const t=e.EpF();e.TgZ(0,"div",56)(1,"div",6)(2,"div",57)(3,"div",58)(4,"label",59),e._uU(5,"User can make cash sales"),e.qZA(),e._UZ(6,"i",60),e.TgZ(7,"ui-switch",61),e.NdJ("ngModelChange",function(o){e.CHM(t);const n=e.oxw(3);return e.KtG(n.newUser.roles.sell_cash=o)}),e.qZA()(),e._UZ(8,"hr"),e.TgZ(9,"div",58)(10,"label",59),e._uU(11,"User can sell to debtors"),e.qZA(),e._UZ(12,"i",62),e.TgZ(13,"ui-switch",61),e.NdJ("ngModelChange",function(o){e.CHM(t);const n=e.oxw(3);return e.KtG(n.newUser.roles.sell_debtors=o)}),e.qZA()(),e._UZ(14,"hr"),e.TgZ(15,"div",58)(16,"label",59),e._uU(17,"User can reverse a sale"),e.qZA(),e._UZ(18,"i",63),e.TgZ(19,"ui-switch",61),e.NdJ("ngModelChange",function(o){e.CHM(t);const n=e.oxw(3);return e.KtG(n.newUser.roles.reversing_cash=o)}),e.qZA()(),e._UZ(20,"hr"),e.TgZ(21,"div",58)(22,"label",59),e._uU(23,"User can create customer waiting list"),e.qZA(),e._UZ(24,"i",64),e.TgZ(25,"ui-switch",61),e.NdJ("ngModelChange",function(o){e.CHM(t);const n=e.oxw(3);return e.KtG(n.newUser.roles.add_waiting_customer=o)}),e.qZA()(),e._UZ(26,"hr"),e.TgZ(27,"div",58)(28,"label",59),e._uU(29,"User can print receipts before selling"),e.qZA(),e._UZ(30,"i",65),e.TgZ(31,"ui-switch",61),e.NdJ("ngModelChange",function(o){e.CHM(t);const n=e.oxw(3);return e.KtG(n.newUser.roles.print_items=o)}),e.qZA()(),e._UZ(32,"hr"),e.TgZ(33,"div",58)(34,"label",59),e._uU(35,"User can add debtors"),e.qZA(),e._UZ(36,"i",66),e.TgZ(37,"ui-switch",61),e.NdJ("ngModelChange",function(o){e.CHM(t);const n=e.oxw(3);return e.KtG(n.newUser.roles.adding_new_debtors=o)}),e.qZA()(),e._UZ(38,"hr"),e.TgZ(39,"div",58)(40,"label",59),e._uU(41,"User can send messages to customers."),e.qZA(),e._UZ(42,"i",67),e.TgZ(43,"ui-switch",61),e.NdJ("ngModelChange",function(o){e.CHM(t);const n=e.oxw(3);return e.KtG(n.newUser.roles.sending_customer_messages=o)}),e.qZA()(),e._UZ(44,"hr"),e.TgZ(45,"div",58)(46,"label",59),e._uU(47,"User can set balance limits for debtor's"),e.qZA(),e._UZ(48,"i",68),e.TgZ(49,"ui-switch",61),e.NdJ("ngModelChange",function(o){e.CHM(t);const n=e.oxw(3);return e.KtG(n.newUser.roles.set_debtor_limits=o)}),e.qZA()(),e._UZ(50,"hr"),e.TgZ(51,"div",58)(52,"label",59),e._uU(53,"User can add stock"),e.qZA(),e._UZ(54,"i",69),e.TgZ(55,"ui-switch",61),e.NdJ("ngModelChange",function(o){e.CHM(t);const n=e.oxw(3);return e.KtG(n.newUser.roles.adding_supplier_stock=o)}),e.qZA()(),e._UZ(56,"hr"),e.TgZ(57,"div",58)(58,"label",59),e._uU(59,"User can add new suppliers"),e.qZA(),e._UZ(60,"i",70),e.TgZ(61,"ui-switch",61),e.NdJ("ngModelChange",function(o){e.CHM(t);const n=e.oxw(3);return e.KtG(n.newUser.roles.adding_suppliers=o)}),e.qZA()(),e._UZ(62,"hr"),e.TgZ(63,"div",58)(64,"label",59),e._uU(65,"User can add stock positive"),e.qZA(),e._UZ(66,"i",71),e.TgZ(67,"ui-switch",61),e.NdJ("ngModelChange",function(o){e.CHM(t);const n=e.oxw(3);return e.KtG(n.newUser.roles.adding_stock_positive=o)}),e.qZA()(),e._UZ(68,"hr"),e.qZA(),e.TgZ(69,"div",57)(70,"div",58)(71,"label",59),e._uU(72,"User can add stock negative"),e.qZA(),e._UZ(73,"i",72),e.TgZ(74,"ui-switch",61),e.NdJ("ngModelChange",function(o){e.CHM(t);const n=e.oxw(3);return e.KtG(n.newUser.roles.adding_stock_negative=o)}),e.qZA()(),e._UZ(75,"hr"),e.TgZ(76,"div",58)(77,"label",59),e._uU(78,"User can add expenses"),e.qZA(),e._UZ(79,"i",73),e.TgZ(80,"ui-switch",61),e.NdJ("ngModelChange",function(o){e.CHM(t);const n=e.oxw(3);return e.KtG(n.newUser.roles.adding_expenses=o)}),e.qZA()(),e._UZ(81,"hr"),e.TgZ(82,"div",58)(83,"label",59),e._uU(84,"User can receive debtor payments"),e.qZA(),e._UZ(85,"i",74),e.TgZ(86,"ui-switch",61),e.NdJ("ngModelChange",function(o){e.CHM(t);const n=e.oxw(3);return e.KtG(n.newUser.roles.receiving_debtor_payments=o)}),e.qZA()(),e._UZ(87,"hr"),e.TgZ(88,"div",58)(89,"label",59),e._uU(90,"User can add transfer shops"),e.qZA(),e._UZ(91,"i",75),e.TgZ(92,"ui-switch",61),e.NdJ("ngModelChange",function(o){e.CHM(t);const n=e.oxw(3);return e.KtG(n.newUser.roles.adding_transfer_customers=o)}),e.qZA()(),e._UZ(93,"hr"),e.TgZ(94,"div",76)(95,"label",59),e._uU(96,"User can transfer items to another shop"),e.qZA(),e._UZ(97,"i",77),e.TgZ(98,"ui-switch",61),e.NdJ("ngModelChange",function(o){e.CHM(t);const n=e.oxw(3);return e.KtG(n.newUser.roles.sell_transfer=o)}),e.qZA()(),e._UZ(99,"hr"),e.TgZ(100,"div",76)(101,"label",59),e._uU(102,"User can manage stock items"),e.qZA(),e._UZ(103,"i",78),e.TgZ(104,"ui-switch",61),e.NdJ("ngModelChange",function(o){e.CHM(t);const n=e.oxw(3);return e.KtG(n.newUser.roles.manage_stock=o)}),e.qZA()(),e._UZ(105,"hr"),e.TgZ(106,"div",76)(107,"label",59),e._uU(108,"User can update buying prices"),e.qZA(),e._UZ(109,"i",79),e.TgZ(110,"ui-switch",61),e.NdJ("ngModelChange",function(o){e.CHM(t);const n=e.oxw(3);return e.KtG(n.newUser.roles.updating_buying_price=o)}),e.qZA()(),e._UZ(111,"hr"),e.TgZ(112,"div",76)(113,"label",59),e._uU(114,"User can do stock inter location"),e.qZA(),e._UZ(115,"i",80),e.TgZ(116,"ui-switch",61),e.NdJ("ngModelChange",function(o){e.CHM(t);const n=e.oxw(3);return e.KtG(n.newUser.roles.adding_interlocation=o)}),e.qZA()(),e._UZ(117,"hr"),e.TgZ(118,"div",76)(119,"label",59),e._uU(120,"User can view current sales"),e.qZA(),e._UZ(121,"i",81),e.TgZ(122,"ui-switch",61),e.NdJ("ngModelChange",function(o){e.CHM(t);const n=e.oxw(3);return e.KtG(n.newUser.roles.current_sales=o)}),e.qZA()(),e._UZ(123,"hr"),e.TgZ(124,"div",76)(125,"label",59),e._uU(126,"User can perform stock taking"),e.qZA(),e._UZ(127,"i",82),e.TgZ(128,"ui-switch",61),e.NdJ("ngModelChange",function(o){e.CHM(t);const n=e.oxw(3);return e.KtG(n.newUser.roles.stock_taking=o)}),e.qZA()(),e._UZ(129,"hr"),e.TgZ(130,"div",76)(131,"label",59),e._uU(132,"User can close selling operations"),e.qZA(),e._UZ(133,"i",77),e.TgZ(134,"ui-switch",61),e.NdJ("ngModelChange",function(o){e.CHM(t);const n=e.oxw(3);return e.KtG(n.newUser.roles.close_sales=o)}),e.qZA()(),e._UZ(135,"hr"),e.qZA()(),e._UZ(136,"p"),e.TgZ(137,"div",6)(138,"div",101)(139,"p-footer",51)(140,"button",104),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(3);return e.KtG(o.createUser())}),e.qZA(),e.TgZ(141,"button",105),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(3);return e.KtG(o.activeIndex=o.activeIndex-1)}),e.qZA()()()(),e.TgZ(142,"ngx-spinner",54),e._UZ(143,"p",4),e.qZA()()}if(2&s){const t=e.oxw(3);e.xp6(7),e.Q6J("ngModel",t.newUser.roles.sell_cash),e.xp6(6),e.Q6J("ngModel",t.newUser.roles.sell_debtors),e.xp6(6),e.Q6J("ngModel",t.newUser.roles.reversing_cash),e.xp6(6),e.Q6J("ngModel",t.newUser.roles.add_waiting_customer),e.xp6(6),e.Q6J("ngModel",t.newUser.roles.print_items),e.xp6(6),e.Q6J("ngModel",t.newUser.roles.adding_new_debtors),e.xp6(6),e.Q6J("ngModel",t.newUser.roles.sending_customer_messages),e.xp6(6),e.Q6J("ngModel",t.newUser.roles.set_debtor_limits),e.xp6(6),e.Q6J("ngModel",t.newUser.roles.adding_supplier_stock),e.xp6(6),e.Q6J("ngModel",t.newUser.roles.adding_suppliers),e.xp6(6),e.Q6J("ngModel",t.newUser.roles.adding_stock_positive),e.xp6(7),e.Q6J("ngModel",t.newUser.roles.adding_stock_negative),e.xp6(6),e.Q6J("ngModel",t.newUser.roles.adding_expenses),e.xp6(6),e.Q6J("ngModel",t.newUser.roles.receiving_debtor_payments),e.xp6(6),e.Q6J("ngModel",t.newUser.roles.adding_transfer_customers),e.xp6(6),e.Q6J("ngModel",t.newUser.roles.sell_transfer),e.xp6(6),e.Q6J("ngModel",t.newUser.roles.manage_stock),e.xp6(6),e.Q6J("ngModel",t.newUser.roles.updating_buying_price),e.xp6(6),e.Q6J("ngModel",t.newUser.roles.adding_interlocation),e.xp6(6),e.Q6J("ngModel",t.newUser.roles.current_sales),e.xp6(6),e.Q6J("ngModel",t.newUser.roles.stock_taking),e.xp6(6),e.Q6J("ngModel",t.newUser.roles.close_sales),e.xp6(8),e.Q6J("fullScreen",!1)}}function ie(s,r){if(1&s){const t=e.EpF();e.TgZ(0,"div",6)(1,"div",34)(2,"p-steps",35),e.NdJ("activeIndexChange",function(o){e.CHM(t);const n=e.oxw(2);return e.KtG(n.activeIndex=o)}),e.qZA(),e.YNc(3,oe,28,9,"div",36),e.YNc(4,ne,144,23,"div",37),e.qZA()()}if(2&s){const t=e.oxw(2);e.xp6(2),e.Q6J("model",t.newUserMenu)("activeIndex",t.activeIndex)("readonly",!0),e.xp6(1),e.Q6J("ngIf",0===t.activeIndex),e.xp6(1),e.Q6J("ngIf",1===t.activeIndex)}}function se(s,r){if(1&s&&e._UZ(0,"app-notification",106),2&s){const t=e.oxw(2);e.Q6J("message","User account created!")("showNotification",t.showNotification)}}const Z=function(){return{width:"70vw"}};function re(s,r){if(1&s){const t=e.EpF();e.TgZ(0,"p-dialog",98),e.NdJ("visibleChange",function(o){e.CHM(t);const n=e.oxw();return e.KtG(n.showNewUserDialog=o)}),e.YNc(1,ie,5,5,"div",0),e.YNc(2,se,1,2,"app-notification",99),e.qZA()}if(2&s){const t=e.oxw();e.Akn(e.DdM(8,Z)),e.Q6J("header",t.showNotification?"":"New user")("closable",!1)("visible",t.showNewUserDialog)("baseZIndex",1e4),e.xp6(1),e.Q6J("ngIf",!t.showNotification),e.xp6(1),e.Q6J("ngIf",t.showNotification)}}const le=function(){return{width:"30vw"}},ae=[{path:"",component:(()=>{class s{constructor(t,i,o,n,c,ue){this.spinner=t,this.cryptoSrv=i,this.toastr=o,this.authSrv=n,this.apiSrv=c,this.confirmationService=ue,this.loading=!0,this.users=[],this.locations=[],this.showEditDialog=!1,this.items=[{label:"Login details"},{label:"User rights"},{label:"Location rights"}],this.newUserMenu=[{label:"Login details"},{label:"User rights"}],this.activeIndex=0,this.userToEdit={},this.defaultUserRoles={},this.defaultLocationRights={},this.newUser={},this.showNewUserDialog=!1,this.rightsToEdit=[],this.showNotification=!1,this.userIsAdmin=!1}ngOnInit(){"admin"===this.cryptoSrv.decryptEncodedText(this.authSrv.getUserDetailToken("role"))?(this.rightsToEdit=[],this.locationSelected={},this.activeIndex=0,this.getAllUsers()):(this.toastr.error("You have no rights to access that page!"),this.authSrv.logout())}getAllUsers(){this.spinner.show();const t={action:this.cryptoSrv.encodeEncryptText("get-all-users"),added_by:this.authSrv.getUserDetailToken("uid")};this.apiSrv.read(t).then(i=>{"error"!=i.status?"error2"!=i.status?(this.users=i.users,this.locations=i.locations,this.users.forEach(o=>{null!=o.roles?Object.keys(o.roles).forEach(n=>{o.roles[n]=parseInt(this.cryptoSrv.decryptEncodedText(o.roles[n].toString()),10)}):(Object.keys(this.defaultUserRoles).forEach(n=>{this.defaultUserRoles[n]=0}),o.roles=this.defaultUserRoles)}),this.spinner.hide(),this.loading=!1):(this.spinner.hide(),this.toastr.error("Please login again.","Login session expired!"),this.authSrv.logout()):(this.spinner.hide(),this.toastr.error(i.message))}).catch(i=>{this.toastr.error(i),this.spinner.hide()})}showEdit(t){this.activeIndex=0,this.showEditDialog=!0,this.userToEdit=t}updateUser(){this.spinner.show("details");const t={action:this.cryptoSrv.encodeEncryptText("update-user-details"),added_by:this.authSrv.getUserDetailToken("uid"),uid:this.userToEdit.id,username:this.cryptoSrv.encodeEncryptText(this.userToEdit.username),password:this.cryptoSrv.encodeEncryptText(this.userToEdit.password),mobile:this.cryptoSrv.encodeEncryptText(this.userToEdit.mobile.toString())};this.apiSrv.post(t).then(i=>{"error"!=i.status?"error2"!=i.status?(this.toastr.success("Details updated!"),this.ngOnInit()):(this.toastr.error("Please login again.","Login session expired!"),this.authSrv.logout()):this.toastr.error(i.message),this.spinner.hide("details")}).catch(i=>{this.toastr.error(i),this.spinner.hide()})}updateLocationSelected(t){this.locationSelected=t.value,this.spinner.show();const i={action:this.cryptoSrv.encodeEncryptText("get-user-location-rights"),user_id:this.userToEdit.id,location_id:t.value.id};this.apiSrv.read(i).then(o=>{if("error"!=o.status)if("error2"!=o.status){Object.keys(o.rights).forEach(c=>{o.rights[c]=parseInt(this.cryptoSrv.decryptEncodedText(o.rights[c].toString()),10)});let n=Object.keys(o.rights).map(c=>({key:c.split("_").join(" "),value:o.rights[c]}));this.rightsToEdit=n,this.spinner.hide(),this.loading=!1}else this.spinner.hide(),this.toastr.error("Please login again.","Login session expired!"),this.authSrv.logout();else this.spinner.hide(),this.toastr.error(o.message)}).catch(o=>{this.toastr.error(o),this.spinner.hide()})}updateUserRoles(){this.spinner.show("details");let t=this.apiSrv.deepCopy(this.userToEdit.roles);Object.keys(t).forEach(o=>{t[o]=this.cryptoSrv.encodeEncryptText((+t[o]).toString())});const i={action:this.cryptoSrv.encodeEncryptText("update-user-roles"),added_by:this.authSrv.getUserDetailToken("uid"),uid:this.userToEdit.id,roles:t};this.apiSrv.post(i).then(o=>{"error"!=o.status?"error2"!=o.status?(this.toastr.success("User rights updated!"),this.getAllUsers()):(this.toastr.error("Please login again.","Login session expired!"),this.authSrv.logout()):this.toastr.error(o.message),this.spinner.hide("details")}).catch(o=>{this.toastr.error(o),this.spinner.hide()})}updateUserLocationRights(){this.spinner.show("details");let t={};this.rightsToEdit.forEach(o=>{let n=o.key.split(" ").join("_");t[n]=this.cryptoSrv.encodeEncryptText((+o.value).toString())});const i={action:this.cryptoSrv.encodeEncryptText("update-user-location-rights"),added_by:this.authSrv.getUserDetailToken("uid"),uid:this.userToEdit.id,location_id:this.locationSelected.id,roles:t};this.apiSrv.post(i).then(o=>{"error"!=o.status?"error2"!=o.status?(this.toastr.success("Location rights updated!"),this.getAllUsers()):(this.toastr.error("Please login again.","Login session expired!"),this.authSrv.logout()):this.toastr.error(o.message),this.spinner.hide("details")}).catch(o=>{this.toastr.error(o),this.spinner.hide()})}disableUser(t){this.confirmationService.confirm({message:"User will not be able to sign in. Do you want to deactivate this account?",acceptButtonStyleClass:"p-button-primary p-button-sm",rejectButtonStyleClass:"p-button-danger p-button-sm",acceptLabel:"Yes",rejectLabel:"No",accept:()=>{this.spinner.show();const i={action:this.cryptoSrv.encodeEncryptText("disable-user-account"),uid:t.id,added_by:this.authSrv.getUserDetailToken("uid")};this.apiSrv.post(i).then(o=>{"error"!=o.status?"error2"!=o.status?(this.toastr.success("Account deactivated!"),this.ngOnInit()):(this.spinner.hide(),this.toastr.error("Please login again.","Login session expired!"),this.authSrv.logout()):(this.spinner.hide(),this.toastr.error(o.message))}).catch(o=>{this.toastr.error(o),this.spinner.hide()})},reject:()=>{}})}enableUser(t){this.spinner.show();const i={action:this.cryptoSrv.encodeEncryptText("enable-user-account"),uid:t.id,added_by:this.authSrv.getUserDetailToken("uid")};this.apiSrv.post(i).then(o=>{"error"!=o.status?"error2"!=o.status?(this.toastr.success("Account activated!"),this.ngOnInit()):(this.spinner.hide(),this.toastr.error("Please login again.","Login session expired!"),this.authSrv.logout()):(this.spinner.hide(),this.toastr.error(o.message))}).catch(o=>{this.toastr.error(o),this.spinner.hide()})}showNewDialog(){this.showNotification=!1,this.newUser={},this.newUser.roles={},this.activeIndex=0,Object.keys(this.newUser.roles).forEach(t=>{this.newUser.roles[t]=0}),this.showNewUserDialog=!0}mobileFormatCorrect(t){return!("254"!==t.substring(0,3)||12!==t?.length&&13!==t?.length||"-"===t.substring(0,1))}createUser(){this.confirmationService.confirm({message:"After the account is created you will need to asign the user location rights. Do you want to create this account?",acceptButtonStyleClass:"p-button-primary p-button-sm",rejectButtonStyleClass:"p-button-danger p-button-sm",acceptLabel:"Yes",rejectLabel:"No",accept:()=>{this.addUser()},reject:()=>{}})}addUser(){this.spinner.show("details");let t=this.apiSrv.deepCopy(this.newUser.roles);Object.keys(t).forEach(o=>{t[o]=this.cryptoSrv.encodeEncryptText((+t[o]).toString())});const i={action:this.cryptoSrv.encodeEncryptText("create-user-account"),added_by:this.authSrv.getUserDetailToken("uid"),username:this.cryptoSrv.encodeEncryptText(this.newUser.username),mobile:this.cryptoSrv.encodeEncryptText(this.newUser.mobile.toString()),password:this.cryptoSrv.encodeEncryptText(this.newUser.password),roles:t};this.apiSrv.post(i).then(o=>{"error"!=o.status?"error2"!=o.status?(this.showNotification=!0,setTimeout(()=>{this.getAllUsers(),this.showNewUserDialog=!1},1750)):(this.toastr.error("Please login again.","Login session expired!"),this.authSrv.logout()):this.toastr.error(o.message),this.spinner.hide("details")}).catch(o=>{this.toastr.error(o),this.spinner.hide()})}deleteAccount(t){this.confirmationService.confirm({message:"Any transactions done by this user will still show the user name. Do you want to delete this account? ",acceptButtonStyleClass:"p-button-primary p-button-sm",rejectButtonStyleClass:"p-button-danger p-button-sm",acceptLabel:"Yes",rejectLabel:"No",accept:()=>{this.spinner.show();const i={action:this.cryptoSrv.encodeEncryptText("delete-user-account"),uid:t.id,added_by:this.authSrv.getUserDetailToken("uid")};this.apiSrv.post(i).then(o=>{"error"!=o.status?"error2"!=o.status?(this.toastr.success("Account deleted!"),this.ngOnInit()):(this.spinner.hide(),this.toastr.error("Please login again.","Login session expired!"),this.authSrv.logout()):(this.spinner.hide(),this.toastr.error(o.message))}).catch(o=>{this.toastr.error(o),this.spinner.hide()})},reject:()=>{}})}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(p.t2),e.Y36(u.$),e.Y36(h._W),e.Y36(b.e),e.Y36(w.s),e.Y36(m.YP))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-user-accounts"]],decls:7,vars:14,consts:[["class","row",4,"ngIf"],["appendTo","body","modal","true","header","Edit user",3,"closable","visible","baseZIndex","visibleChange","onHide"],["appendTo","body","modal","true",3,"header","closable","visible","style","baseZIndex","visibleChange",4,"ngIf"],["bdOpacity","#fff","bdColor","rgba(255,255,255,0.76)","size","medium","color","#02926e","type","ball-clip-rotate",3,"fullScreen"],[2,"color","#02926e"],["header","Confirm","icon","pi pi-exclamation-triangle","appendTo","body",3,"baseZIndex"],[1,"row"],[1,"col-md-12","col-12","pl-0","ml-0"],[1,"card","pl-0","ml-0"],[1,"card-header","pb-0"],[1,"card-title"],["pButton","","type","button","icon","fas fa-user-plus","label","Add a new user account",1,"p-button-raised","p-button-sm","p-button-primary","float-right",3,"click"],[1,"card-content"],[1,"card-body","pl-0","ml-0","pr-0","mr-0"],["styleClass","p-datatable-customers","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"value","rowHover","rows","showCurrentPageReport","rowsPerPageOptions","loading","paginator","filterDelay","globalFilterFields","responsive"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[1,"ui-selectable-row"],["pSortableColumn","name",2,"width","15rem"],["field","username"],[2,"width","40rem"],["pInputText","","type","text","placeholder","Search name...",1,"ui-column-filter",3,"input"],[2,"word-wrap","normal"],[2,"white-space","nowrap"],["pButton","","type","button","class","p-button-raised p-button-sm p-button-danger","icon","fas fa-lock","pTooltip","Click to activate account","tooltipPosition","top",3,"click",4,"ngIf"],["pButton","","type","button","class","p-button-raised p-button-sm p-button-primary","icon","fas fa-lock-open","pTooltip","Click to deactivate account","tooltipPosition","top",3,"click",4,"ngIf"],["pButton","","type","button","class","p-button-raised p-button-sm p-button-danger float-right","icon","fas fa-trash","label","Delete acount","pTooltip","Click to delete account","tooltipPosition","top",3,"click",4,"ngIf"],["pButton","","type","button","icon","fas fa-edit","label","Edit user details","pTooltip","Click to edit account","tooltipPosition","top",1,"p-button-raised","p-button-sm","p-button-primary","float-right","mr-3",3,"click"],["pButton","","type","button","icon","fas fa-lock","pTooltip","Click to activate account","tooltipPosition","top",1,"p-button-raised","p-button-sm","p-button-danger",3,"click"],["pButton","","type","button","icon","fas fa-lock-open","pTooltip","Click to deactivate account","tooltipPosition","top",1,"p-button-raised","p-button-sm","p-button-primary",3,"click"],["pButton","","type","button","icon","fas fa-trash","label","Delete acount","pTooltip","Click to delete account","tooltipPosition","top",1,"p-button-raised","p-button-sm","p-button-danger","float-right",3,"click"],["colspan","5",2,"text-align","center"],[1,"col-md-12","mt-3"],[3,"model","activeIndex","readonly","activeIndexChange"],[4,"ngIf"],["class","mt-4",4,"ngIf"],["autocomplete","off",3,"ngSubmit"],["form2","ngForm"],[1,"ui-fluid"],[1,"p-field","py-2"],["for","firstname3"],["id","firstname3","name","name","required","","type","text","pInputText","",1,"form-control",3,"ngModel","ngModelChange"],["id","firstname3","name","mobile","required","","type","number","pInputNumber","",1,"form-control",3,"ngModel","ngModelChange"],["mobileCtrl","ngModel"],["style","font-style: itallic; font-size: 12px","class","text-danger",4,"ngIf"],["for","firstname4"],["id","firstname4","name","password","required","","type","text","pInputText","",1,"form-control",3,"ngModel","ngModelChange"],[1,"row","text-center"],[1,"col-md-6","offset-md-3","mt-3"],[1,"text-center","mt-3"],["type","submit","pButton","","icon","pi pi-check","label","Update",1,"p-button-primary","p-button-sm","mr-5",3,"disabled"],["type","button","pButton","","icon","pi pi-times","label","Cancel",1,"ui-button-danger","p-button-sm","p-button-danger",3,"click"],["bdOpacity","#fff","bdColor","rgba(255,255,255,0.76)","size","medium","name","details","color","#02926e","type","ball-clip-rotate",3,"fullScreen"],[1,"text-danger",2,"font-style","itallic","font-size","12px"],[1,"mt-4"],[1,"col-md-6"],[1,"p-field-checkbox",2,"display","initial"],["for","sf"],["placement","bottom","triggers","mouseenter:mouseleave","ngbPopover","This will assign the user the rights to sell to customers who buy using cash or mobile money.","popoverTitle","Making cash sales",1,"fas","fa-info-circle","ml-2","info",2,"cursor","pointer"],[1,"float-right",3,"ngModel","ngModelChange"],["placement","bottom","triggers","mouseenter:mouseleave","ngbPopover","This will assign the user the rights to sell items to debtor's who will pay later (differed payment sale).","popoverTitle","Selling to debtors",1,"fas","fa-info-circle","ml-2","info",2,"cursor","pointer"],["placement","bottom","triggers","mouseenter:mouseleave","ngbPopover","This will assign the user the rights to reverse a cash sale or a debtor (differed payment) sale.","popoverTitle","Reversing sales",1,"fas","fa-info-circle","ml-2","info",2,"cursor","pointer"],["placement","bottom","triggers","mouseenter:mouseleave","ngbPopover","This will assign the user the rights to add customers to a waiting list before making payments.","popoverTitle","Waiting list",1,"fas","fa-info-circle","ml-2","info",2,"cursor","pointer"],["placement","bottom","triggers","mouseenter:mouseleave","ngbPopover","This will assign the user the rights to print receipts before a payment is made.","popoverTitle","Printing receipts",1,"fas","fa-info-circle","ml-2","info",2,"cursor","pointer"],["placement","bottom","triggers","mouseenter:mouseleave","ngbPopover","This will assign the user the rights to add new debtors to the system. This will also include the rights to change any debtor personal details.","popoverTitle","Adding debtors",1,"fas","fa-info-circle","ml-2","info",2,"cursor","pointer"],["placement","bottom","triggers","mouseenter:mouseleave","ngbPopover","This will assign the user the rights to send message notifications or promotion messages to customers. Customers involve only the debtor's.","popoverTitle","Sending messages.",1,"fas","fa-info-circle","ml-2","info",2,"cursor","pointer"],["placement","bottom","triggers","mouseenter:mouseleave","ngbPopover","This will assign the user the rights to set balance limits for each debtor.","popoverTitle","Setting debtor limits.",1,"fas","fa-info-circle","ml-2","info",2,"cursor","pointer"],["placement","bottom","triggers","mouseenter:mouseleave","ngbPopover","This will assign the user the rights to add stock received from suppliers inform of invoices.","popoverTitle","Adding stock",1,"fas","fa-info-circle","ml-2","info",2,"cursor","pointer"],["placement","bottom","triggers","mouseenter:mouseleave","ngbPopover","This will assign the user the rights to add new suppliers into the system.","popoverTitle","Adding suppliers",1,"fas","fa-info-circle","ml-2","info",2,"cursor","pointer"],["placement","bottom","triggers","mouseenter:mouseleave","ngbPopover","This will assign the user the rights to add stock positive.","popoverTitle","Adding stock positive",1,"fas","fa-info-circle","ml-2","info",2,"cursor","pointer"],["placement","bottom","triggers","mouseenter:mouseleave","ngbPopover","This will assign the user the rights to add stock negative.","popoverTitle","Adding stock negative",1,"fas","fa-info-circle","ml-2","info",2,"cursor","pointer"],["placement","bottom","triggers","mouseenter:mouseleave","ngbPopover","This will assign the user the rights to add any daily expense incurred.","popoverTitle","Adding daily expenses",1,"fas","fa-info-circle","ml-2","info",2,"cursor","pointer"],["placement","bottom","triggers","mouseenter:mouseleave","ngbPopover","This will assign the user the rights to receive and update payments for a debtor (pending payments).","popoverTitle","Receive debtor payment",1,"fas","fa-info-circle","ml-2","info",2,"cursor","pointer"],["placement","bottom","triggers","mouseenter:mouseleave","ngbPopover","This will assign the user the rights to add new shops for transfering items.","popoverTitle","Adding transfer shops",1,"fas","fa-info-circle","ml-2","info",2,"cursor","pointer"],[1,"p-field-checkbox","mb-3",2,"display","initial"],["placement","bottom","triggers","mouseenter:mouseleave","ngbPopover","This will assign the user the rights to transfer items to another shop.","popoverTitle","Transfer items",1,"fas","fa-info-circle","ml-2","info",2,"cursor","pointer"],["placement","bottom","triggers","mouseenter:mouseleave","ngbPopover","This will assign the user the rights to manage items.","popoverTitle","Manage items",1,"fas","fa-info-circle","ml-2","info",2,"cursor","pointer"],["placement","bottom","triggers","mouseenter:mouseleave","ngbPopover","This will assign the user the rights to update item buying prices.","popoverTitle","Update buying price",1,"fas","fa-info-circle","ml-2","info",2,"cursor","pointer"],["placement","bottom","triggers","mouseenter:mouseleave","ngbPopover","This will assign the user the rights to transfer stock from one location to another.","popoverTitle","Stock interlocation",1,"fas","fa-info-circle","ml-2","info",2,"cursor","pointer"],["placement","bottom","triggers","mouseenter:mouseleave","ngbPopover","This will assign the user rights to view their current day transactions.","popoverTitle","Current sales",1,"fas","fa-info-circle","ml-2","info",2,"cursor","pointer"],["placement","bottom","triggers","mouseenter:mouseleave","ngbPopover","This will assign the user the rights to perform stock taking.","popoverTitle","Stock taking",1,"fas","fa-info-circle","ml-2","info",2,"cursor","pointer"],["placement","bottom","triggers","mouseenter:mouseleave","ngbPopover","This will assign the user the rights to view stock movement.","popoverTitle","Stock report",1,"fas","fa-info-circle","ml-2","info",2,"cursor","pointer"],["placement","bottom","triggers","mouseenter:mouseleave","ngbPopover","This will assign the user the rights to view sales.","popoverTitle","Stock report",1,"fas","fa-info-circle","ml-2","info",2,"cursor","pointer"],["type","submit","pButton","","icon","pi pi-check","label","Update",1,"p-button-primary","p-button-sm","mr-5",3,"click"],[1,"col-md-12","text-center"],[1,"p-field","pb-3"],["for","location"],["placeholder","Select a location","name","location","appendTo","body","optionLabel","name","filter","true",3,"options","ngModel","onChange","ngModelChange"],["pTemplate","selectedItem"],["pTemplate","item"],["styleClass","p-datatable-customers","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"value","rowHover","rows","showCurrentPageReport","rowsPerPageOptions","paginator","filterDelay","globalFilterFields",4,"ngIf"],["class","row text-center",4,"ngIf"],[1,"ui-helper-clearfix"],["styleClass","p-datatable-customers","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"value","rowHover","rows","showCurrentPageReport","rowsPerPageOptions","paginator","filterDelay","globalFilterFields"],[2,"width","20rem"],["disabled","true",3,"ngModel","ngModelChange"],["appendTo","body","modal","true",3,"header","closable","visible","baseZIndex","visibleChange"],[3,"message","showNotification",4,"ngIf"],["autocomplete","off"],[1,"col-md-10","offset-md-1","mt-3"],["type","button","pButton","","icon","pi pi-arrow-right","iconPos","right","label","Next",1,"p-button-primary","float-right","p-button-sm",3,"disabled","click"],["type","button","pButton","","icon","pi pi-times","label","Cancel",1,"ui-button-danger","float-left","p-button-sm","p-button-danger",3,"click"],["type","submit","pButton","","icon","pi pi-check","label","Finish",1,"p-button-primary","float-right","p-button-sm",3,"click"],["type","button","pButton","","icon","pi pi-arrow-left","label","Back",1,"p-button-sm","float-left","p-button-secondary",3,"click"],[3,"message","showNotification"]],template:function(t,i){1&t&&(e.YNc(0,O,14,13,"div",0),e.TgZ(1,"p-dialog",1),e.NdJ("visibleChange",function(n){return i.showEditDialog=n})("onHide",function(){return i.ngOnInit()}),e.YNc(2,ee,6,6,"div",0),e.qZA(),e.YNc(3,re,3,9,"p-dialog",2),e.TgZ(4,"ngx-spinner",3),e._UZ(5,"p",4),e.qZA(),e._UZ(6,"p-confirmDialog",5)),2&t&&(e.Q6J("ngIf",!i.loading),e.xp6(1),e.Akn(e.DdM(12,Z)),e.Q6J("closable",!0)("visible",i.showEditDialog)("baseZIndex",1e4),e.xp6(1),e.Q6J("ngIf",i.showEditDialog),e.xp6(1),e.Q6J("ngIf",i.showNewUserDialog),e.xp6(1),e.Q6J("fullScreen",!0),e.xp6(2),e.Akn(e.DdM(13,le)),e.Q6J("baseZIndex",1e4))},dependencies:[f.O5,p.Ro,_._Y,_.Fj,_.wV,_.JJ,_.JL,_.Q7,_.On,_.F,x.V,m.$_,m.jx,C.Q,A.Hq,v.iA,v.lQ,v.fz,M.o,y.Lt,J.u,k.o8,q.zH,E.R,N.o,S.c,f.rS],styles:["label[_ngcontent-%COMP%]{text-transform:none}[_nghost-%COMP%]     p-colorpicker .p-colorpicker .p-colorpicker-preview{border-radius:30px}[_nghost-%COMP%]     p-dialog .p-dialog-header{border-radius:30px!important}[_nghost-%COMP%]     .p-dialog .p-dialog-footer{border-bottom-right-radius:30px}"],data:{animation:[(0,d.X$)("enter",[(0,d.eR)("void => *",[(0,d.oB)({opacity:0}),(0,d.jt)(1e3,(0,d.oB)({opacity:1}))])])]}}),s})(),data:{title:"Expenses"}}];let ce=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[a.Bz.forChild(ae),a.Bz]}),s})();var _e=l(4397);let de=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[ce,_e.U]}),s})()}}]);