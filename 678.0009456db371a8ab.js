"use strict";(self.webpackChunkmatngular=self.webpackChunkmatngular||[]).push([[678],{4678:(F,Z,l)=>{l.r(Z),l.d(Z,{DebtorsModule:()=>co});var _=l(2318),d=l(5861),m=l(7340),g=l(2841),u=l(6895),w=l(4159),C=l.n(w),Q=l(4313),L=l(9441),A=l(3583),t=l(4650),S=l(8423),H=l(3166),V=l(7185),G=l(1927),Y=l(1932),K=l(7052),D=l(805),h=l(4006),j=l(1493),O=l(2137),q=l(5593),x=l(3087),B=l(5722),R=l(1740),$=l(8235),z=l(666),W=l(3608),y=l(9091),X=l(2435),tt=l(8558),et=l(8271),ot=l(613),it=l(585),nt=l(3054),st=l(3942);const rt=["pdfTable"],at=["op"];function lt(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"p-button",62),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.showNewCustomerForm())}),t.qZA()}}function ct(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"p-button",63),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.showTotal=!0)}),t.qZA()}}function pt(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"tr",64)(1,"th",65),t._uU(2," Customer "),t.qZA(),t.TgZ(3,"th"),t._uU(4,"Total amount sold "),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Amount credited "),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Amount paid "),t.qZA(),t.TgZ(9,"th"),t._uU(10,"Balance "),t.qZA(),t.TgZ(11,"th"),t._uU(12,"Sales limit "),t.qZA(),t._UZ(13,"th",66),t.qZA(),t.TgZ(14,"tr")(15,"th",67)(16,"input",68),t.NdJ("input",function(i){t.CHM(e),t.oxw();const s=t.MAs(10);return t.KtG(s.filterGlobal(i.target.value,"contains"))}),t.qZA()()()}}function dt(n,r){if(1&n&&(t.TgZ(0,"label",81),t.ALo(1,"number"),t._uU(2),t.ALo(3,"number"),t.qZA()),2&n){const e=t.oxw().$implicit;t.s9C("pTooltip",t.xi3(1,2,e.sales-e.credit_note-e.payments,".2")),t.xp6(2),t.hij(" Paid excess of ",t.xi3(3,5,e.payments-(e.sales-e.credit_note),".2")," ")}}function _t(n,r){if(1&n&&(t.TgZ(0,"label",82),t.ALo(1,"number"),t._uU(2," Paid in full "),t._UZ(3,"i",83),t.qZA()),2&n){const e=t.oxw().$implicit;t.s9C("pTooltip",t.xi3(1,1,e.sales-e.credit_note-e.payments,".2"))}}function ut(n,r){if(1&n&&(t.TgZ(0,"label",73),t.ALo(1,"number"),t._uU(2),t.ALo(3,"number"),t.qZA()),2&n){const e=t.oxw().$implicit;t.s9C("pTooltip",t.xi3(1,2,e.sales-e.credit_note-e.payments,".2")),t.xp6(2),t.hij(" ",t.xi3(3,5,e.sales-e.credit_note-e.payments,".1")," ")}}function mt(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",77),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit,s=t.oxw(2);return t.KtG(s.showPeriodForm(i))}),t._UZ(1,"i",84),t._uU(2," Get statement "),t.qZA()}}function ht(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",77),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit,s=t.oxw(2);return t.KtG(s.showPayment(i,i.sales-i.credit_note-i.payments))}),t._UZ(1,"i",85),t._uU(2," Add payment "),t.qZA()}}function gt(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",77),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit,s=t.oxw(2);return t.KtG(s.getDebtorPayments(i))}),t._UZ(1,"i",86),t._uU(2," Show payments "),t.qZA()}}function bt(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",77),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit,s=t.oxw(2);return t.KtG(s.showLimit(i))}),t._UZ(1,"i",87),t._uU(2," Change sales limit "),t.qZA()}}function ft(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",77),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit,s=t.oxw(2);return s.displaySmsDialog=!0,t.KtG(s.debtorToView=i)}),t._UZ(1,"i",88),t._uU(2," Send sms "),t.qZA()}}function Tt(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",77),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit,s=t.oxw(2);return t.KtG(s.deleteDebtor(i))}),t._UZ(1,"i",89),t._uU(2," Delete debtor "),t.qZA()}}function vt(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"tr",69)(1,"td"),t._uU(2),t.ALo(3,"titlecase"),t.TgZ(4,"p")(5,"small")(6,"i"),t._uU(7),t.qZA()()()(),t.TgZ(8,"td"),t._uU(9),t.ALo(10,"number"),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.ALo(13,"number"),t.qZA(),t.TgZ(14,"td"),t._uU(15),t.ALo(16,"number"),t.qZA(),t.TgZ(17,"td"),t.YNc(18,dt,4,8,"label",70),t.YNc(19,_t,4,4,"label",71),t.YNc(20,ut,4,8,"label",72),t.qZA(),t.TgZ(21,"td")(22,"label",73),t.ALo(23,"number"),t._uU(24),t.ALo(25,"number"),t.qZA()(),t.TgZ(26,"td")(27,"div",74)(28,"button",75),t._uU(29," Select an action "),t.qZA(),t.TgZ(30,"div",76)(31,"button",77),t.NdJ("click",function(){const s=t.CHM(e).$implicit,a=t.oxw(2);return t.KtG(a.getAllDebtorTransactions(s))}),t._UZ(32,"i",78),t._uU(33," All transactions "),t.qZA(),t.YNc(34,mt,3,0,"button",79),t.YNc(35,ht,3,0,"button",79),t.TgZ(36,"button",77),t.NdJ("click",function(){const s=t.CHM(e).$implicit,a=t.oxw(2);return t.KtG(a.getDebtorSalesAndReversals(s))}),t._UZ(37,"i",78),t._uU(38," Show sales "),t.qZA(),t.YNc(39,gt,3,0,"button",79),t.YNc(40,bt,3,0,"button",79),t.TgZ(41,"button",77),t.NdJ("click",function(){const s=t.CHM(e).$implicit,a=t.oxw(2);return t.KtG(a.showCustomerInvoicesDialog(s))}),t._UZ(42,"i",80),t._uU(43," Show invoices "),t.qZA(),t.YNc(44,ft,3,0,"button",79),t.YNc(45,Tt,3,0,"button",79),t.qZA()()()()}if(2&n){const e=r.$implicit,o=t.oxw(2);t.xp6(2),t.hij(" ",t.lcZ(3,16,e.name)," "),t.xp6(5),t.Oqu(e.mobile_number),t.xp6(2),t.hij(" ",t.xi3(10,18,e.sales,".2")," "),t.xp6(3),t.hij(" ",t.xi3(13,21,e.credit_note,".2")," "),t.xp6(3),t.hij(" ",t.xi3(16,24,e.payments,".2")," "),t.xp6(3),t.Q6J("ngIf",e.sales-e.credit_note-e.payments<0),t.xp6(1),t.Q6J("ngIf",e.sales-e.credit_note-e.payments==0),t.xp6(1),t.Q6J("ngIf",e.sales-e.credit_note-e.payments>0),t.xp6(2),t.s9C("pTooltip",t.xi3(23,27,e.sales_limit,".2")),t.xp6(2),t.hij(" ",t.xi3(25,30,e.sales_limit,".2")," "),t.xp6(10),t.Q6J("ngIf",e.sales>0),t.xp6(1),t.Q6J("ngIf",o.userCanReceivePayments||o.userIsAdmin),t.xp6(4),t.Q6J("ngIf",o.userCanReceivePayments||o.userIsAdmin),t.xp6(1),t.Q6J("ngIf",o.userCanSetLimits||o.userIsAdmin),t.xp6(4),t.Q6J("ngIf",o.userIsAdmin||o.userCanSendSms),t.xp6(1),t.Q6J("ngIf",o.userCanAddDebtors||o.userIsAdmin)}}function Zt(n,r){1&n&&(t.TgZ(0,"tr")(1,"td",90),t._uU(2,"No customers found."),t.qZA()())}const b=function(){return[10,25,50]},xt=function(){return["name","mobile_number"]};function yt(n,r){if(1&n&&(t.TgZ(0,"div",55)(1,"div",56)(2,"div",57)(3,"h4",58),t._uU(4," All debtors "),t.YNc(5,lt,1,0,"p-button",59),t.YNc(6,ct,1,0,"p-button",60),t.qZA()(),t.TgZ(7,"div",25)(8,"div",61)(9,"p-table",5,6),t.YNc(11,pt,17,0,"ng-template",7),t.YNc(12,vt,46,33,"ng-template",8),t.YNc(13,Zt,3,0,"ng-template",9),t.qZA()()()()()),2&n){const e=t.oxw();t.Q6J("@enter",void 0),t.xp6(5),t.Q6J("ngIf",e.userCanAddDebtors||e.userIsAdmin),t.xp6(1),t.Q6J("ngIf",e.userIsAdmin),t.xp6(3),t.Q6J("value",e.debtors)("rowHover",!0)("rows",10)("showCurrentPageReport",!0)("rowsPerPageOptions",t.DdM(12,b))("loading",e.loading)("paginator",!0)("filterDelay",0)("globalFilterFields",t.DdM(13,xt))}}function wt(n,r){1&n&&(t.TgZ(0,"small",103),t._uU(1," End date should be greator than start date "),t.qZA())}function Ct(n,r){1&n&&(t.TgZ(0,"small",103),t._uU(1," Period should not exceed 1 year. "),t.qZA())}function Dt(n,r){1&n&&t._UZ(0,"button",104)}function At(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"form",92,93),t.NdJ("ngSubmit",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.getCustomerStatement())}),t.TgZ(2,"div",0)(3,"div",23)(4,"div",94)(5,"div",95)(6,"label",96),t._uU(7,"Start Date"),t.qZA(),t._UZ(8,"br"),t.TgZ(9,"p-calendar",97),t.NdJ("ngModelChange",function(i){t.CHM(e);const s=t.oxw(2);return t.KtG(s.periodStartDate=i)}),t.qZA()(),t.TgZ(10,"div",95)(11,"label",96),t._uU(12,"End Date"),t.qZA(),t._UZ(13,"br"),t.TgZ(14,"p-calendar",98),t.NdJ("ngModelChange",function(i){t.CHM(e);const s=t.oxw(2);return t.KtG(s.periodEndDate=i)}),t.qZA(),t._UZ(15,"p"),t.YNc(16,wt,2,0,"small",99),t.YNc(17,Ct,2,0,"small",99),t.qZA()()()(),t.TgZ(18,"p-footer",100)(19,"button",101),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.showStatementsForm=!1)}),t.qZA(),t.YNc(20,Dt,1,0,"button",102),t.qZA()()}if(2&n){const e=t.oxw(2);t.xp6(9),t.Q6J("ngModel",e.periodStartDate)("maxDate",e.today)("monthNavigator",!0),t.xp6(5),t.Q6J("ngModel",e.periodEndDate)("monthNavigator",!0)("minDate",e.periodStartDate)("maxDate",e.today)("readonlyInput",!0),t.xp6(2),t.Q6J("ngIf",e.periodEndDate<e.periodStartDate&&""!=e.periodEndDate.toString()&&""!=e.periodStartDate.toString()),t.xp6(1),t.Q6J("ngIf",""!=e.periodEndDate.toString()&&""!=e.periodStartDate.toString()&&e.getDifferenceInDays()>365.25),t.xp6(3),t.Q6J("ngIf",e.periodEndDate>=e.periodStartDate&&""!=e.periodEndDate.toString()&&""!=e.periodStartDate.toString()&&e.getDifferenceInDays()<=365.25)}}const M=function(){return{width:"25vw"}};function St(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"p-dialog",91),t.NdJ("visibleChange",function(i){t.CHM(e);const s=t.oxw();return t.KtG(s.showStatementsForm=i)}),t.YNc(1,At,21,11,"form",18),t.TgZ(2,"ngx-spinner",40),t._UZ(3,"p",11),t.qZA()()}if(2&n){const e=t.oxw();t.Akn(t.DdM(7,M)),t.Q6J("closable",!1)("visible",e.showStatementsForm)("baseZIndex",1e5),t.xp6(1),t.Q6J("ngIf",e.showStatementsForm),t.xp6(1),t.Q6J("fullScreen",!1)}}function qt(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"form",92,106),t.NdJ("ngSubmit",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.addPayment())}),t.TgZ(2,"div",0)(3,"div",23)(4,"div",107)(5,"div",108)(6,"label",96),t._uU(7,"Amount paid"),t.qZA(),t._UZ(8,"br"),t.TgZ(9,"input",109),t.NdJ("ngModelChange",function(i){t.CHM(e);const s=t.oxw(2);return t.KtG(s.newPaymentModel.amount=i)}),t.qZA()(),t.TgZ(10,"div",110)(11,"label",96),t._uU(12,"Payment method"),t.qZA(),t.TgZ(13,"div",111)(14,"p-radioButton",112),t.NdJ("ngModelChange",function(i){t.CHM(e);const s=t.oxw(2);return t.KtG(s.newPaymentModel.channel=i)}),t.qZA(),t.TgZ(15,"label",113),t._uU(16,"Cash "),t._UZ(17,"i",114),t.qZA()(),t.TgZ(18,"div",111)(19,"p-radioButton",115),t.NdJ("ngModelChange",function(i){t.CHM(e);const s=t.oxw(2);return t.KtG(s.newPaymentModel.channel=i)}),t.qZA(),t.TgZ(20,"label",116),t._uU(21,"Mpesa "),t._UZ(22,"i",117),t.qZA()(),t.TgZ(23,"div",111)(24,"p-radioButton",118),t.NdJ("ngModelChange",function(i){t.CHM(e);const s=t.oxw(2);return t.KtG(s.newPaymentModel.channel=i)}),t.qZA(),t.TgZ(25,"label",119),t._uU(26,"Bank "),t._UZ(27,"i",120),t.qZA()()()()()(),t.TgZ(28,"p-footer")(29,"button",121),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return i.showPaymentModal=!1,i.newPaymentModel={},t.KtG(i.ngOnInit())}),t.qZA(),t._UZ(30,"button",122),t.qZA()()}if(2&n){const e=t.MAs(1),o=t.oxw(2);t.xp6(9),t.Q6J("ngModel",o.newPaymentModel.amount),t.xp6(5),t.Q6J("ngModel",o.newPaymentModel.channel),t.xp6(5),t.Q6J("ngModel",o.newPaymentModel.channel),t.xp6(5),t.Q6J("ngModel",o.newPaymentModel.channel),t.xp6(6),t.Q6J("disabled",!e.valid||""==o.newPaymentModel.amount||null==o.newPaymentModel.amount||o.newPaymentModel.amount<1||null==o.newPaymentModel.channel)}}function Mt(n,r){if(1&n&&t._UZ(0,"app-notification",123),2&n){const e=t.oxw(2);t.Q6J("message","Payment added!")("showNotification",e.showNotification)}}const v=function(){return{width:"30vw"}};function Ut(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"p-dialog",17),t.NdJ("visibleChange",function(i){t.CHM(e);const s=t.oxw();return t.KtG(s.showPaymentModal=i)}),t.ALo(1,"titlecase"),t.YNc(2,qt,31,5,"form",18),t.TgZ(3,"ngx-spinner",105),t._UZ(4,"p",11),t.qZA(),t.YNc(5,Mt,1,2,"app-notification",19),t.qZA()}if(2&n){const e=t.oxw();t.Akn(t.DdM(11,v)),t.Q6J("header",!e.showNotification&&e.showPaymentModal?"New payment for "+t.lcZ(1,9,e.debtorToView.name):"")("closable",!1)("visible",e.showPaymentModal)("baseZIndex",1e4),t.xp6(2),t.Q6J("ngIf",!e.showNotification),t.xp6(1),t.Q6J("fullScreen",!1),t.xp6(2),t.Q6J("ngIf",e.showNotification)}}function It(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"tr",64)(1,"th",66),t._uU(2,"Date "),t.qZA(),t.TgZ(3,"th"),t._uU(4,"Total sales "),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Total reversed "),t.qZA(),t._UZ(7,"th",66),t.qZA(),t.TgZ(8,"tr")(9,"th",124)(10,"p-calendar",125),t.NdJ("ngModelChange",function(i){t.CHM(e);const s=t.oxw();return t.KtG(s.dateOfSale=i)})("onSelect",function(i){t.CHM(e);const s=t.oxw();return t.KtG(s.getDate(i))}),t.qZA()()()}if(2&n){const e=t.oxw();t.xp6(10),t.Q6J("ngModel",e.dateOfSale)("maxDate",e.today)("touchUI",!1)("monthNavigator",!0)}}function Nt(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"tr",69)(1,"td"),t._uU(2),t.ALo(3,"date"),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.ALo(6,"number"),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.ALo(9,"number"),t.qZA(),t.TgZ(10,"td")(11,"button",126),t.NdJ("click",function(){const s=t.CHM(e).$implicit,a=t.oxw();return t.KtG(a.showDebtorDateSales(s.transaction_date))}),t.qZA()()()}if(2&n){const e=r.$implicit;t.xp6(2),t.hij(" ",t.lcZ(3,3,e.transaction_date)," "),t.xp6(3),t.hij(" ",t.xi3(6,5,e.sales,".2")," "),t.xp6(3),t.hij(" ",t.xi3(9,8,e.reversed,".2")," ")}}function Jt(n,r){1&n&&(t.TgZ(0,"tr")(1,"td",90),t._uU(2,"No customers found."),t.qZA()())}function kt(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"tr",64)(1,"th"),t._uU(2,"Receipt no "),t.qZA(),t.TgZ(3,"th"),t._uU(4,"Receipt total "),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Amount reversed "),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Sold by "),t.qZA(),t._UZ(9,"th"),t.qZA(),t.TgZ(10,"tr")(11,"th",127)(12,"input",128),t.NdJ("input",function(i){t.CHM(e),t.oxw();const s=t.MAs(16);return t.KtG(s.filterGlobal(i.target.value,"contains"))}),t.qZA()()()}}function Pt(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"tr",69)(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.ALo(5,"number"),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.ALo(8,"number"),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.ALo(11,"titlecase"),t.qZA(),t.TgZ(12,"td")(13,"p-button",129),t.NdJ("onClick",function(){const s=t.CHM(e).$implicit,a=t.oxw();return t.KtG(a.showReceiptItems(s))}),t.qZA()()()}if(2&n){const e=r.$implicit;t.xp6(2),t.hij(" ",e.transaction_code," "),t.xp6(2),t.hij(" ",t.xi3(5,4,e.transaction_total,".2")," "),t.xp6(3),t.hij(" ",t.xi3(8,7,e.reversed,".2")," "),t.xp6(3),t.hij(" ",t.lcZ(11,10,e.sold_by)," ")}}function Et(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"tr",64)(1,"th",130),t._uU(2,"Item "),t._UZ(3,"p-sortIcon",131),t.qZA(),t.TgZ(4,"th",132),t._uU(5,"Location "),t.qZA(),t.TgZ(6,"th",132),t._uU(7,"Unit "),t.qZA(),t.TgZ(8,"th",132),t._uU(9,"Qty "),t.qZA(),t.TgZ(10,"th",132),t._uU(11,"Price "),t.qZA(),t.TgZ(12,"th",132),t._uU(13,"Total "),t.qZA()(),t.TgZ(14,"tr")(15,"th",133)(16,"input",134),t.NdJ("input",function(i){t.CHM(e),t.oxw();const s=t.MAs(1);return t.KtG(s.filter(i.target.value,"item.name","contains"))}),t.qZA()()()}}const U=function(n){return{"background-color":n,color:"#ffffff",cursor:"pointer"}};function Ft(n,r){if(1&n&&(t.TgZ(0,"tr",69)(1,"td"),t._uU(2),t.ALo(3,"titlecase"),t.qZA(),t.TgZ(4,"td")(5,"p-avatarGroup"),t._UZ(6,"p-avatar",135),t.qZA()(),t.TgZ(7,"td"),t._uU(8),t.ALo(9,"titlecase"),t.qZA(),t.TgZ(10,"td"),t._uU(11),t.ALo(12,"number"),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.ALo(15,"number"),t.qZA(),t.TgZ(16,"td"),t._uU(17),t.ALo(18,"number"),t.qZA()()),2&n){const e=r.$implicit;t.xp6(2),t.hij(" ",t.lcZ(3,7,e.item.name)," "),t.xp6(4),t.Akn(t.VKq(19,U,e.location.color)),t.xp6(2),t.hij(" ",t.lcZ(9,9,e.unit.unit_name)," "),t.xp6(3),t.hij(" ",t.lcZ(12,11,e.qty)," "),t.xp6(3),t.hij(" ",t.xi3(15,13,e.sp,".2")," "),t.xp6(3),t.hij(" ",t.xi3(18,16,e.qty*e.sp,".2")," ")}}const Qt=function(){return["item.name"]};function Lt(n,r){if(1&n&&(t.TgZ(0,"p-table",12,13),t.YNc(2,Et,17,0,"ng-template",7),t.YNc(3,Ft,19,21,"ng-template",8),t.qZA()),2&n){const e=t.oxw();t.Q6J("value",e.receiptToView.items)("rowHover",!0)("rows",10)("showCurrentPageReport",!0)("rowsPerPageOptions",t.DdM(8,b))("paginator",!0)("filterDelay",0)("globalFilterFields",t.DdM(9,Qt))}}function Ht(n,r){1&n&&(t.TgZ(0,"tr",64)(1,"th"),t._uU(2,"Date paid "),t.qZA(),t.TgZ(3,"th"),t._uU(4,"Balance before "),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Cash amount "),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Mpesa amount "),t.qZA(),t.TgZ(9,"th"),t._uU(10,"Bank amount "),t.qZA(),t.TgZ(11,"th"),t._uU(12,"Amount credited "),t.qZA(),t.TgZ(13,"th"),t._uU(14,"Added by "),t.qZA(),t._UZ(15,"th"),t.qZA())}function Vt(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",137),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit,s=t.oxw();return t.KtG(s.confirmDeletePayment(i))}),t.qZA()}}function Gt(n,r){if(1&n&&(t.TgZ(0,"tr",69)(1,"td")(2,"label"),t._uU(3),t.ALo(4,"date"),t.qZA()(),t.TgZ(5,"td"),t._uU(6),t.ALo(7,"number"),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.ALo(10,"number"),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.ALo(13,"number"),t.qZA(),t.TgZ(14,"td"),t._uU(15),t.ALo(16,"number"),t.qZA(),t.TgZ(17,"td"),t._uU(18),t.ALo(19,"number"),t.qZA(),t.TgZ(20,"td"),t._uU(21),t.ALo(22,"titlecase"),t.qZA(),t.TgZ(23,"td"),t.YNc(24,Vt,1,0,"button",136),t.qZA()()),2&n){const e=r.$implicit,o=t.oxw();t.xp6(3),t.hij(" ",t.lcZ(4,8,e.date_paid)," "),t.xp6(3),t.hij(" ",t.xi3(7,10,e.balance_before,".2")," "),t.xp6(3),t.hij(" ",t.xi3(10,13,e.cash,".2")," "),t.xp6(3),t.hij(" ",t.xi3(13,16,e.mpesa,".2")," "),t.xp6(3),t.hij(" ",t.xi3(16,19,e.bank,".2")," "),t.xp6(3),t.hij(" ",t.xi3(19,22,e.amount_credited,".2")," "),t.xp6(3),t.hij(" ",t.lcZ(22,25,e.added_by)," "),t.xp6(3),t.Q6J("ngIf",e.amount_credited<1&&o.dateIsToday(e.date_paid)&&o.userIsCurrent(e.added_by)||o.userIsAdmin&&e.amount_credited<1)}}function Yt(n,r){1&n&&(t.TgZ(0,"tr")(1,"td",138),t._uU(2,"No records found."),t.qZA()())}function Kt(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"form",92,106),t.NdJ("ngSubmit",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.completeLimit())}),t.TgZ(2,"div",0)(3,"div",23)(4,"div",140)(5,"div",141)(6,"label",96),t._uU(7,"Sales limit amount"),t.qZA(),t._UZ(8,"br"),t.TgZ(9,"input",109),t.NdJ("ngModelChange",function(i){t.CHM(e);const s=t.oxw(2);return t.KtG(s.limitModel.amount=i)}),t.qZA()()()()(),t.TgZ(10,"p-footer")(11,"button",142),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return i.displayLimitForm=!1,t.KtG(i.limitModel={})}),t.qZA(),t._UZ(12,"button",143),t.qZA()()}if(2&n){const e=t.MAs(1),o=t.oxw(2);t.xp6(5),t.Q6J("@enter",void 0),t.xp6(4),t.Q6J("ngModel",o.limitModel.amount),t.xp6(3),t.Q6J("disabled",!e.valid||null==o.limitModel.amount||""==o.limitModel.amount)}}function jt(n,r){if(1&n&&t._UZ(0,"app-notification",123),2&n){const e=t.oxw(2);t.Q6J("message","Limit changed!")("showNotification",e.showNotification)}}function Ot(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"p-dialog",17),t.NdJ("visibleChange",function(i){t.CHM(e);const s=t.oxw();return t.KtG(s.displayLimitForm=i)}),t.ALo(1,"titlecase"),t.YNc(2,Kt,13,3,"form",18),t.YNc(3,jt,1,2,"app-notification",19),t.TgZ(4,"ngx-spinner",139),t._UZ(5,"p",11),t.qZA()()}if(2&n){const e=t.oxw();t.Akn(t.DdM(11,v)),t.Q6J("header",e.showNotification?"":"Change sales limit for "+t.lcZ(1,9,e.debtorToView.name))("closable",!1)("visible",e.displayLimitForm)("baseZIndex",1e4),t.xp6(2),t.Q6J("ngIf",!e.showNotification),t.xp6(1),t.Q6J("ngIf",e.showNotification),t.xp6(1),t.Q6J("fullScreen",!1)}}function Bt(n,r){1&n&&(t.TgZ(0,"label",155),t._uU(1," Mobile number must be in the format 254xxxxxxxxx. "),t.qZA()),2&n&&t.Q6J("@enter",void 0)}function Rt(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"form",92,144),t.NdJ("ngSubmit",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.addNewCustomer())}),t.TgZ(2,"div",0)(3,"div",23)(4,"div",140)(5,"div",95)(6,"label",145),t._uU(7,"Customer name"),t.qZA(),t.TgZ(8,"input",146),t.NdJ("ngModelChange",function(i){t.CHM(e);const s=t.oxw();return t.KtG(s.newCustomer.name=i)}),t.qZA()()()(),t.TgZ(9,"div",23)(10,"div",147)(11,"div",95)(12,"label",148),t._uU(13,"Mobile number"),t.qZA(),t.TgZ(14,"input",149,150),t.NdJ("ngModelChange",function(i){t.CHM(e);const s=t.oxw();return t.KtG(s.newCustomer.mobile=i)}),t.qZA(),t.YNc(16,Bt,2,1,"label",151),t.qZA()()(),t.TgZ(17,"div",23)(18,"div",140)(19,"div",152)(20,"label",96),t._uU(21,"Sales limit amount"),t.qZA(),t._UZ(22,"br"),t.TgZ(23,"input",109),t.NdJ("ngModelChange",function(i){t.CHM(e);const s=t.oxw();return t.KtG(s.newCustomer.limit=i)}),t.qZA()()()()(),t.TgZ(24,"p-footer")(25,"button",153),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return i.displayCustomerForm=!1,i.newCustomer={},t.KtG(i.ngOnInit())}),t.qZA(),t._UZ(26,"button",154),t.qZA()()}if(2&n){const e=t.MAs(1),o=t.MAs(15),i=t.oxw();t.xp6(8),t.Q6J("ngModel",i.newCustomer.name),t.xp6(6),t.Q6J("ngModel",i.newCustomer.mobile),t.xp6(2),t.Q6J("ngIf",!o.valid||null!=(null==o?null:o.value)&&!i.mobileFormatCorrect(null==o?null:o.value.toString())),t.xp6(3),t.Q6J("@enter",void 0),t.xp6(4),t.Q6J("ngModel",i.newCustomer.limit),t.xp6(3),t.Q6J("disabled",!e.valid||""==i.newCustomer.name||""==i.newCustomer.mobile||null!=(null==o?null:o.value)&&!i.mobileFormatCorrect(null==o?null:o.value.toString()))}}function $t(n,r){if(1&n&&t._UZ(0,"app-notification",123),2&n){const e=t.oxw();t.Q6J("message","Debtor added!")("showNotification",e.showNotification)}}function zt(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",0)(1,"div",156)(2,"button",157),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.showInvoiceFormDialog(i.customerToEdit))}),t.qZA()()()}}function Wt(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",158),t._uU(1," \xa0 "),t.TgZ(2,"span",159),t._UZ(3,"i",160),t.TgZ(4,"input",161),t.NdJ("input",function(i){t.CHM(e),t.oxw();const s=t.MAs(56);return t.KtG(s.filterGlobal(i.target.value,"contains"))}),t.qZA()()()}}function Xt(n,r){1&n&&(t.TgZ(0,"tr",64)(1,"th",162),t._uU(2,"Invoice number "),t.qZA(),t.TgZ(3,"th",132),t._uU(4,"Invoice amount "),t.qZA(),t.TgZ(5,"th",132),t._uU(6,"Invoice date "),t.qZA(),t.TgZ(7,"th",132),t._uU(8,"Date created "),t.qZA(),t.TgZ(9,"th",132),t._uU(10,"Created by "),t.qZA(),t._UZ(11,"th",66),t.qZA())}function te(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",77),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit,s=t.oxw();return t.KtG(s.showEditInvoice(i))}),t._UZ(1,"i",165),t._uU(2," Edit invoice number "),t.qZA()}}function ee(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",77),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit,s=t.oxw();return t.KtG(s.generateInvoiceDocument(i))}),t._UZ(1,"i",166),t._uU(2," Download invoice "),t.qZA()}}function oe(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"tr",69,163)(2,"td"),t._uU(3),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.ALo(6,"number"),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.ALo(9,"date"),t.qZA(),t.TgZ(10,"td"),t._uU(11),t.ALo(12,"date"),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.ALo(15,"titlecase"),t.qZA(),t.TgZ(16,"td",null,164)(18,"div",74)(19,"button",75),t._uU(20," Select an action "),t.qZA(),t.TgZ(21,"div",76),t.YNc(22,te,3,0,"button",79),t.TgZ(23,"button",77),t.NdJ("click",function(){const s=t.CHM(e).$implicit,a=t.oxw();return t.KtG(a.showInvoiceItemsDialog(s))}),t._UZ(24,"i",78),t._uU(25," Show invoice items "),t.qZA(),t.YNc(26,ee,3,0,"button",79),t.TgZ(27,"button",77),t.NdJ("click",function(){const s=t.CHM(e).$implicit,a=t.oxw();return t.KtG(a.showDeleteInvoiceConfirm(s))}),t._UZ(28,"i",89),t._uU(29," Delete invoice "),t.qZA()()()()()}if(2&n){const e=r.$implicit,o=t.oxw();t.xp6(3),t.hij(" ",e.number," "),t.xp6(2),t.hij(" ",t.xi3(6,7,e.invoice_total,".2")," "),t.xp6(3),t.hij(" ",t.lcZ(9,10,e.date)," "),t.xp6(3),t.hij(" ",t.lcZ(12,12,e.date_created)," "),t.xp6(3),t.hij(" ",t.lcZ(15,14,e.created_by)," "),t.xp6(8),t.Q6J("ngIf",o.userCanReceivePayments||o.userIsAdmin),t.xp6(4),t.Q6J("ngIf",o.userCanReceivePayments||o.userIsAdmin)}}function ie(n,r){1&n&&(t.TgZ(0,"tr")(1,"td",167),t._uU(2,"No invoices found."),t.qZA()())}const I=function(){return{width:"40vw"}};function ne(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"p-dialog",168),t.NdJ("visibleChange",function(i){t.CHM(e);const s=t.oxw();return t.KtG(s.displayEditInvoiceDialog=i)}),t.TgZ(1,"form",92,93),t.NdJ("ngSubmit",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.editInvoice())}),t.TgZ(3,"div",0)(4,"div",23)(5,"div",169)(6,"div",95)(7,"label",170),t._uU(8,"Invoice title"),t.qZA(),t.TgZ(9,"input",171),t.NdJ("ngModelChange",function(i){t.CHM(e);const s=t.oxw();return t.KtG(s.invoiceToEdit.title=i)}),t.qZA()()()(),t.TgZ(10,"div",23)(11,"div",169)(12,"div",95)(13,"label",145),t._uU(14,"Invoice number"),t.qZA(),t.TgZ(15,"input",172),t.NdJ("ngModelChange",function(i){t.CHM(e);const s=t.oxw();return t.KtG(s.invoiceToEdit.number=i)}),t.qZA()()()(),t.TgZ(16,"div",23)(17,"div",173)(18,"div",95)(19,"label",174),t._uU(20,"Invoice date"),t.qZA(),t._UZ(21,"br"),t.TgZ(22,"p-calendar",175),t.NdJ("ngModelChange",function(i){t.CHM(e);const s=t.oxw();return t.KtG(s.invoiceToEdit.date=i)}),t.qZA()()()()(),t.TgZ(23,"p-footer")(24,"button",176),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.hideEditInvoice())}),t.qZA(),t._UZ(25,"button",177),t.qZA()(),t.TgZ(26,"ngx-spinner",178),t._UZ(27,"p",11),t.qZA()()}if(2&n){const e=t.oxw();t.Akn(t.DdM(12,I)),t.Q6J("closable",!1)("visible",e.displayEditInvoiceDialog)("baseZIndex",1e4),t.xp6(9),t.Q6J("ngModel",e.invoiceToEdit.title),t.xp6(6),t.Q6J("ngModel",e.invoiceToEdit.number),t.xp6(7),t.Q6J("ngModel",e.invoiceToEdit.date)("baseZIndex",1e4)("monthNavigator",!0),t.xp6(3),t.Q6J("disabled",""===e.invoiceToEdit.title||""===e.invoiceToEdit.number||""===(null==e.invoiceToEdit?null:e.invoiceToEdit.date.toString())),t.xp6(1),t.Q6J("fullScreen",!1)}}function se(n,r){if(1&n&&(t.TgZ(0,"div",194)(1,"span"),t._uU(2),t.qZA()()),2&n){const e=r.$implicit;t.xp6(2),t.Oqu(e.name)}}function re(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"tr",64)(1,"th",130),t._uU(2,"Item "),t._UZ(3,"p-sortIcon",131),t.qZA(),t.TgZ(4,"th",189),t._uU(5,"Category "),t._UZ(6,"p-sortIcon",190),t.qZA(),t.TgZ(7,"th",132),t._uU(8,"Locations "),t.qZA(),t._UZ(9,"th",132),t.qZA(),t.TgZ(10,"tr")(11,"th")(12,"input",191),t.NdJ("input",function(i){t.CHM(e),t.oxw();const s=t.MAs(8);return t.KtG(s.filter(i.target.value,"name","contains"))}),t.qZA()(),t.TgZ(13,"th")(14,"p-multiSelect",192),t.NdJ("onChange",function(i){t.CHM(e);const s=t.oxw(2);return t.KtG(s.onCategoryChange(i))}),t.YNc(15,se,3,1,"ng-template",193),t.qZA()(),t._UZ(16,"th")(17,"th"),t.qZA()}if(2&n){const e=t.oxw(2);t.xp6(14),t.Q6J("options",e.categories)}}function ae(n,r){if(1&n&&t._UZ(0,"p-avatar",200),2&n){const e=r.index,o=t.oxw(4);t.Akn(t.VKq(2,U,o.locations[e].color))}}const le=function(){return[]};function ce(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"p-avatarGroup",198),t.NdJ("click",function(i){t.CHM(e);const s=t.oxw().$implicit,a=t.oxw(2);return t.KtG(a.showLocationsQuantity(s,i))}),t.YNc(1,ae,1,4,"p-avatar",199),t.qZA()}if(2&n){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",t.DdM(1,le).constructor(e.locations_count))}}function pe(n,r){1&n&&(t.TgZ(0,"small",201),t._uU(1," Missing units "),t.qZA())}function de(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"p-button",202),t.NdJ("onClick",function(){t.CHM(e);const i=t.oxw().$implicit,s=t.oxw(2);return t.KtG(s.selectItem(i))}),t.qZA()}if(2&n){const e=t.oxw().$implicit,o=t.oxw(2);t.Q6J("loading",null!=o.itemToViewLocations&&o.itemToViewLocations.id===e.id&&o.loading2)}}function _e(n,r){1&n&&(t.TgZ(0,"small",201),t._uU(1," Selling price is low "),t.qZA())}function ue(n,r){if(1&n&&(t.TgZ(0,"tr",69)(1,"td"),t._uU(2),t.ALo(3,"titlecase"),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.ALo(6,"titlecase"),t.qZA(),t.TgZ(7,"td"),t.YNc(8,ce,2,2,"p-avatarGroup",195),t.YNc(9,pe,2,0,"small",196),t.qZA(),t.TgZ(10,"td"),t.YNc(11,de,1,1,"p-button",197),t.YNc(12,_e,2,0,"small",196),t.qZA()()),2&n){const e=r.$implicit;t.xp6(2),t.hij(" ",t.lcZ(3,6,e.name)," "),t.xp6(3),t.hij(" ",t.lcZ(6,8,e.category.name)," "),t.xp6(3),t.Q6J("ngIf",e.locations_count>0&&1==e.min_unit_ok),t.xp6(1),t.Q6J("ngIf",e.units<1||0==e.min_unit_ok),t.xp6(2),t.Q6J("ngIf",e.locations_count>0&&e.units>0&&1==e.min_unit_ok),t.xp6(1),t.Q6J("ngIf",e.units<1||e.locations_count<1||0==e.min_unit_ok)}}function me(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"tr",64)(1,"th",162),t._uU(2,"Item "),t.qZA(),t.TgZ(3,"th"),t._uU(4,"Unit "),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Qty "),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Sp "),t.qZA(),t._UZ(9,"th"),t.qZA(),t.TgZ(10,"tr")(11,"th",127)(12,"input",203),t.NdJ("input",function(i){t.CHM(e),t.oxw();const s=t.MAs(19);return t.KtG(s.filter(i.target.value,"item","contains"))}),t.qZA()()()}}function he(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"tr",69)(1,"td",204)(2,"label"),t._uU(3),t.ALo(4,"titlecase"),t.qZA()(),t.TgZ(5,"td"),t._uU(6),t.ALo(7,"titlecase"),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.ALo(10,"number"),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.ALo(13,"number"),t.qZA(),t.TgZ(14,"td")(15,"button",205),t.NdJ("click",function(){const s=t.CHM(e).$implicit,a=t.oxw(2);return t.KtG(a.showDeleteInvoiceItemConfirm(s))}),t.qZA()()()}if(2&n){const e=r.$implicit;t.xp6(3),t.hij(" ",t.lcZ(4,4,e.item)," "),t.xp6(3),t.hij(" ",t.lcZ(7,6,e.unit.unit_name)," "),t.xp6(3),t.hij(" ",t.lcZ(10,8,e.unit_quantity)," "),t.xp6(3),t.hij(" ",t.xi3(13,10,e.selling_price,".2")," ")}}function ge(n,r){1&n&&(t.TgZ(0,"tr")(1,"td",206),t._uU(2,"No items found."),t.qZA()())}const N=function(){return["name","description"]};function be(n,r){if(1&n&&(t.TgZ(0,"div",0)(1,"div",179)(2,"div",24)(3,"div",180)(4,"h4",181),t._uU(5," Select item to sell "),t.qZA()(),t.TgZ(6,"div",182)(7,"p-table",12,183),t.YNc(9,re,18,1,"ng-template",7),t.YNc(10,ue,13,10,"ng-template",8),t.qZA()()()(),t.TgZ(11,"div",184)(12,"div",185)(13,"div",57)(14,"h4",58),t._uU(15," Invoice items "),t.qZA()(),t.TgZ(16,"div",25)(17,"div",61)(18,"p-table",34,186),t.YNc(20,me,13,0,"ng-template",7),t.YNc(21,he,16,13,"ng-template",8),t.YNc(22,ge,3,0,"ng-template",9),t.qZA()()(),t.TgZ(23,"ngx-spinner",187),t._UZ(24,"p",11),t.qZA()()(),t.TgZ(25,"ngx-spinner",188),t._UZ(26,"p",11),t.qZA()()),2&n){const e=t.oxw();t.xp6(2),t.Q6J("@enter",void 0),t.xp6(5),t.Q6J("value",e.allProducts)("rowHover",!0)("rows",10)("showCurrentPageReport",!0)("rowsPerPageOptions",t.DdM(21,b))("paginator",!0)("filterDelay",0)("globalFilterFields",t.DdM(22,N)),t.xp6(11),t.Q6J("value",e.invoiceToView.items)("rowHover",!0)("rows",10)("showCurrentPageReport",!0)("rowsPerPageOptions",t.DdM(23,b))("loading",e.loading)("paginator",!0)("filterDelay",0)("globalFilterFields",t.DdM(24,N))("responsive",!0),t.xp6(5),t.Q6J("fullScreen",!1),t.xp6(2),t.Q6J("fullScreen",!1)}}function fe(n,r){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.xp6(1),t.Oqu(e.unit_name)}}function Te(n,r){if(1&n&&(t.TgZ(0,"div",219)(1,"div"),t._uU(2),t.qZA()()),2&n){const e=r.$implicit;t.xp6(2),t.Oqu(e.unit_name)}}function ve(n,r){if(1&n&&(t.TgZ(0,"small",220),t._uU(1),t.qZA()),2&n){const e=t.oxw(3);t.xp6(1),t.hij(" ",e.quantityError," ")}}function Ze(n,r){1&n&&(t.TgZ(0,"small",221),t._uU(1," Selling price is lower than buying price "),t.qZA())}function xe(n,r){if(1&n&&(t.TgZ(0,"small",221),t._uU(1),t.qZA()),2&n){const e=t.oxw(3);t.xp6(1),t.hij(" ",e.priceError2," ")}}function ye(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"form",92,106),t.NdJ("ngSubmit",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.addInvoiceItem())}),t.TgZ(2,"div",0)(3,"div",23)(4,"div",140)(5,"div",152)(6,"label",207),t._uU(7,"Unit to sell"),t.qZA(),t._UZ(8,"br"),t.TgZ(9,"p-dropdown",208),t.NdJ("onChange",function(i){t.CHM(e);const s=t.oxw(2);return t.KtG(s.updateUnitSelected(i))})("ngModelChange",function(i){t.CHM(e);const s=t.oxw(2);return t.KtG(s.itemToSellModel.unit=i)}),t.YNc(10,fe,2,1,"ng-template",209),t.YNc(11,Te,3,1,"ng-template",193),t.qZA()(),t.TgZ(12,"div",152)(13,"label",210),t._uU(14,"Unit quantity to sell"),t.qZA(),t.TgZ(15,"input",211),t.NdJ("input",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.checkQuantity())})("ngModelChange",function(i){t.CHM(e);const s=t.oxw(2);return t.KtG(s.itemToSellModel.unit_quantity=i)}),t.qZA(),t.YNc(16,ve,2,1,"small",212),t.qZA(),t.TgZ(17,"div",152)(18,"label",210),t._uU(19,"Unit selling price"),t.qZA(),t.TgZ(20,"input",213),t.NdJ("input",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.confirmPrice())})("ngModelChange",function(i){t.CHM(e);const s=t.oxw(2);return t.KtG(s.itemToSellModel.unit_price=i)}),t.qZA(),t.YNc(21,Ze,2,0,"small",214),t.YNc(22,xe,2,1,"small",214),t.qZA(),t.TgZ(23,"div",152)(24,"label",215),t._uU(25,"Total price"),t.qZA(),t._UZ(26,"input",216),t.qZA()()()(),t.TgZ(27,"p-footer")(28,"button",217),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.hideSellForm())}),t.qZA(),t._UZ(29,"button",218),t.qZA()()}if(2&n){const e=t.MAs(1),o=t.oxw(2);t.xp6(9),t.Q6J("options",o.itemToSellModel.selling_units)("ngModel",o.itemToSellModel.unit),t.xp6(6),t.Q6J("disabled",null==o.itemToSellModel.unit)("ngModel",o.itemToSellModel.unit_quantity),t.xp6(1),t.Q6J("ngIf",""!=o.quantityError),t.xp6(4),t.Q6J("disabled",null==o.itemToSellModel.unit||0==o.itemToSellModel.unit_quantity)("ngModel",o.itemToSellModel.unit_price),t.xp6(1),t.Q6J("ngIf",""!=o.priceError),t.xp6(1),t.Q6J("ngIf",""!=o.priceError2),t.xp6(4),t.Q6J("disabled",!0)("value",o.itemToSellModel.total_price),t.xp6(3),t.Q6J("disabled",!e.valid||o.itemToSellModel.unit_quantity<1||o.itemToSellModel.unit_price<0||null==o.itemToSellModel.unit)}}function we(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"p-dialog",17),t.NdJ("visibleChange",function(i){t.CHM(e);const s=t.oxw();return t.KtG(s.displaySellDialog=i)}),t.YNc(1,ye,30,12,"form",18),t.TgZ(2,"ngx-spinner",15),t._UZ(3,"p",11),t.qZA()()}if(2&n){const e=t.oxw();t.Akn(t.DdM(8,v)),t.Q6J("header",e.displaySellDialog?e.itemToSellModel.name:"")("closable",!1)("visible",e.displaySellDialog)("baseZIndex",1e4),t.xp6(1),t.Q6J("ngIf",!e.showNotification),t.xp6(1),t.Q6J("fullScreen",!1)}}function Ce(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"form",92,93),t.NdJ("ngSubmit",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.createInvoice())}),t.TgZ(2,"div",0)(3,"div",23)(4,"div",169)(5,"div",95)(6,"label",170),t._uU(7,"Invoice title"),t.qZA(),t.TgZ(8,"input",222),t.NdJ("ngModelChange",function(i){t.CHM(e);const s=t.oxw();return t.KtG(s.newInvoice.title=i)}),t.qZA()()()(),t.TgZ(9,"div",23)(10,"div",169)(11,"div",95)(12,"label",145),t._uU(13,"Invoice number"),t.qZA(),t.TgZ(14,"input",172),t.NdJ("ngModelChange",function(i){t.CHM(e);const s=t.oxw();return t.KtG(s.newInvoice.number=i)}),t.qZA()()()(),t.TgZ(15,"div",23)(16,"div",173)(17,"div",95)(18,"label",223),t._uU(19,"Invoice date"),t.qZA(),t._UZ(20,"br"),t.TgZ(21,"p-calendar",224),t.NdJ("ngModelChange",function(i){t.CHM(e);const s=t.oxw();return t.KtG(s.newInvoice.date=i)}),t.qZA()()()()(),t.TgZ(22,"p-footer",100)(23,"button",176),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.hideInvoiceForm())}),t.qZA(),t._UZ(24,"button",225),t.qZA()()}if(2&n){const e=t.MAs(1),o=t.oxw();t.xp6(8),t.Q6J("ngModel",o.newInvoice.title),t.xp6(6),t.Q6J("ngModel",o.newInvoice.number),t.xp6(7),t.Q6J("ngModel",o.newInvoice.date)("baseZIndex",1e4)("monthNavigator",!0),t.xp6(3),t.Q6J("disabled",!e.valid||""==o.newInvoice.title||""===o.newInvoice.number||""===o.newInvoice.date.toString())}}function De(n,r){1&n&&(t.TgZ(0,"tr")(1,"th"),t._uU(2,"#"),t.qZA(),t.TgZ(3,"th"),t._uU(4,"Item"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Unit"),t.qZA(),t.TgZ(7,"th",261),t._uU(8,"Quantity"),t.qZA(),t.TgZ(9,"th",261),t._uU(10,"Price"),t.qZA(),t.TgZ(11,"th",261),t._uU(12,"Total price"),t.qZA()())}function Ae(n,r){if(1&n&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.ALo(3,"number"),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.ALo(6,"titlecase"),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.ALo(9,"titlecase"),t.qZA(),t.TgZ(10,"td",261),t._uU(11),t.ALo(12,"number"),t.qZA(),t.TgZ(13,"td",261),t._uU(14),t.ALo(15,"number"),t.qZA(),t.TgZ(16,"td",261),t._uU(17),t.ALo(18,"number"),t.qZA()()),2&n){const e=r.$implicit;t.xp6(2),t.hij(" ",t.lcZ(3,6,e.no)," "),t.xp6(3),t.hij(" ",t.lcZ(6,8,e.item)," "),t.xp6(3),t.hij(" ",t.lcZ(9,10,e.unit.unit_name)," "),t.xp6(3),t.hij(" ",t.lcZ(12,12,e.unit_quantity)," "),t.xp6(3),t.hij(" ",t.xi3(15,14,e.selling_price,".2-2")," "),t.xp6(3),t.hij(" ",t.xi3(18,17,e.unit_quantity*e.selling_price,".2-2")," ")}}function Se(n,r){if(1&n&&(t.TgZ(0,"label"),t._uU(1),t.qZA()),2&n){const e=r.$implicit,o=t.oxw(3);t.xp6(1),t.hij("",o.cryptoSrv.decryptEncodedText(e),",")}}function qe(n,r){if(1&n&&(t.TgZ(0,"div",262)(1,"div",263)(2,"p",264),t._uU(3,"Additional Information"),t.qZA(),t.TgZ(4,"ol",265)(5,"li",266),t._uU(6,"Terms: Due on demand"),t.qZA(),t.TgZ(7,"li",266),t._uU(8,"Goods not returnable without prior arrangement"),t.qZA(),t.TgZ(9,"li",266),t._uU(10,"Do not give cash to the delivery persons"),t.qZA(),t.TgZ(11,"li",266),t._uU(12,"All complains should be made within 24 hours of receiving the goods"),t.qZA()(),t.TgZ(13,"p",267),t._uU(14,"Contacts"),t.qZA(),t.TgZ(15,"ul",268)(16,"li",266),t._uU(17,"Phone: "),t.YNc(18,Se,2,1,"label",269),t.qZA()()(),t.TgZ(19,"div",263)(20,"p",270),t._uU(21,"Total due"),t.qZA(),t.TgZ(22,"div",271)(23,"table",272)(24,"tbody")(25,"tr")(26,"td"),t._uU(27,"Total items amount"),t.qZA(),t.TgZ(28,"td",273),t._uU(29),t.ALo(30,"number"),t.qZA()(),t.TgZ(31,"tr")(32,"td"),t._uU(33,"TAX "),t.qZA(),t.TgZ(34,"td",273),t._uU(35,"Ksh 0.00"),t.qZA()(),t.TgZ(36,"tr",274)(37,"td",275),t._uU(38,"Total to pay"),t.qZA(),t.TgZ(39,"td",276),t._uU(40),t.ALo(41,"number"),t.qZA()()()()()()()),2&n){const e=t.oxw(2);t.xp6(18),t.Q6J("ngForOf",e.shopDetail.contacts),t.xp6(11),t.hij("Ksh ",t.xi3(30,3,e.invoiceToView.invoice_total,".2-2"),""),t.xp6(11),t.hij("Ksh ",t.xi3(41,6,e.invoiceToView.invoice_total,".2-2"),"")}}function Me(n,r){1&n&&(t.TgZ(0,"tr")(1,"th"),t._uU(2,"#"),t.qZA(),t.TgZ(3,"th"),t._uU(4,"Item"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Unit"),t.qZA(),t.TgZ(7,"th",261),t._uU(8,"Quantity"),t.qZA()())}function Ue(n,r){if(1&n&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.ALo(3,"number"),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.ALo(6,"titlecase"),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.ALo(9,"titlecase"),t.qZA(),t.TgZ(10,"td",261),t._uU(11),t.ALo(12,"number"),t.qZA()()),2&n){const e=r.$implicit;t.xp6(2),t.hij(" ",t.lcZ(3,4,e.no)," "),t.xp6(3),t.hij(" ",t.lcZ(6,6,e.item)," "),t.xp6(3),t.hij(" ",t.lcZ(9,8,e.unit.unit_name)," "),t.xp6(3),t.hij(" ",t.lcZ(12,10,e.unit_quantity)," ")}}function Ie(n,r){if(1&n&&(t.TgZ(0,"label"),t._uU(1),t.qZA()),2&n){const e=r.$implicit,o=t.oxw(3);t.xp6(1),t.hij("",o.cryptoSrv.decryptEncodedText(e),",")}}function Ne(n,r){if(1&n&&(t.TgZ(0,"div",262)(1,"div",277)(2,"div",0)(3,"div",278)(4,"p",264),t._uU(5,"Additional Information"),t.qZA(),t.TgZ(6,"ol",265)(7,"li",266),t._uU(8,"Terms: Due on demand"),t.qZA(),t.TgZ(9,"li",266),t._uU(10,"Goods not returnable without prior arrangement"),t.qZA(),t.TgZ(11,"li",266),t._uU(12,"Do not give cash to the delivery persons"),t.qZA(),t.TgZ(13,"li",266),t._uU(14,"All complains should be made within 24 hours of receiving the goods"),t.qZA()(),t.TgZ(15,"p",267),t._uU(16,"Contacts"),t.qZA(),t.TgZ(17,"ul",268)(18,"li",266),t._uU(19,"Phone: "),t.YNc(20,Ie,2,1,"label",269),t.qZA()()(),t.TgZ(21,"div",279)(22,"p",280),t._uU(23," Received by: "),t.qZA(),t._UZ(24,"hr",281),t.qZA(),t.TgZ(25,"div",279)(26,"p",280),t._uU(27," Sign: "),t.qZA(),t._UZ(28,"hr",281),t.qZA(),t.TgZ(29,"div",279)(30,"p",280),t._uU(31," Date: "),t.qZA(),t._UZ(32,"hr",281),t.qZA()()()()),2&n){const e=t.oxw(2);t.xp6(20),t.Q6J("ngForOf",e.shopDetail.contacts)}}const Je=function(){return{height:"6px","margin-top":"20px"}};function ke(n,r){1&n&&t._UZ(0,"p-progressBar",282),2&n&&t.Akn(t.DdM(2,Je))}function Pe(n,r){1&n&&(t.TgZ(0,"p",283),t._uU(1,"Processing..."),t.qZA())}function Ee(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",284),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.downloadInvoice())}),t.qZA()}if(2&n){const e=t.oxw(2);t.Q6J("disabled",e.downloadClicked)}}function Fe(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",285),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.downloadDelivery())}),t.qZA()}if(2&n){const e=t.oxw(2);t.Q6J("disabled",e.downloadClicked)}}const Qe=function(n){return{width:n}};function Le(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"p-dialog",226),t.NdJ("visibleChange",function(i){t.CHM(e);const s=t.oxw();return t.KtG(s.displayReportDialog=i)}),t.TgZ(1,"div",227)(2,"div",228,229)(4,"div",230)(5,"div",231)(6,"div",232)(7,"div",233)(8,"div",27),t._UZ(9,"img",234),t.TgZ(10,"div",235)(11,"ul",236)(12,"li",237),t._uU(13),t.qZA(),t.TgZ(14,"li"),t._uU(15),t.qZA(),t.TgZ(16,"li"),t._uU(17),t.qZA()()()()(),t.TgZ(18,"div",238)(19,"h2",239),t._uU(20),t.qZA(),t.TgZ(21,"p",240),t._uU(22),t.qZA(),t.TgZ(23,"ul",241)(24,"li"),t._uU(25,"Amount to pay"),t.qZA(),t.TgZ(26,"li",242),t._uU(27),t.ALo(28,"number"),t.qZA()()()(),t.TgZ(29,"div",243)(30,"div",244)(31,"p",245),t._uU(32,"Invoice To"),t.qZA()(),t.TgZ(33,"div",233)(34,"ul",236)(35,"li",246),t._uU(36),t.ALo(37,"titlecase"),t.qZA()()(),t.TgZ(38,"div",238)(39,"p")(40,"span",247),t._uU(41,"Invoice Date :"),t.qZA(),t._uU(42),t.ALo(43,"date"),t.qZA()()(),t.TgZ(44,"div",248)(45,"div",249)(46,"div",23)(47,"p-table",250),t.YNc(48,De,13,0,"ng-template",7),t.YNc(49,Ae,19,20,"ng-template",8),t.qZA()()(),t.YNc(50,qe,42,9,"div",251),t.qZA()()()(),t.TgZ(51,"div",252,253)(53,"div",230)(54,"div",231)(55,"div",232)(56,"div",233)(57,"div",27),t._UZ(58,"img",234),t.TgZ(59,"div",235)(60,"ul",236)(61,"li",237),t._uU(62),t.qZA(),t.TgZ(63,"li"),t._uU(64),t.qZA(),t.TgZ(65,"li"),t._uU(66),t.qZA()()()()(),t.TgZ(67,"div",238)(68,"h3",254),t._uU(69,"Delivery Note"),t.qZA(),t.TgZ(70,"p")(71,"span",247),t._uU(72,"Delivery No: "),t.qZA(),t._uU(73),t.qZA(),t.TgZ(74,"p",240)(75,"span",247),t._uU(76,"INV Ref: "),t.qZA(),t._uU(77),t.qZA()()(),t.TgZ(78,"div",243)(79,"div",244)(80,"p",245),t._uU(81,"Ship To"),t.qZA()(),t.TgZ(82,"div",233)(83,"ul",236)(84,"li",246),t._uU(85),t.ALo(86,"titlecase"),t.qZA(),t.TgZ(87,"li",246),t._uU(88),t.qZA()()(),t.TgZ(89,"div",238)(90,"p")(91,"span",247),t._uU(92,"Delivery Date: "),t.qZA(),t._uU(93),t.ALo(94,"date"),t.qZA()()(),t.TgZ(95,"div",248)(96,"div",249)(97,"div",23)(98,"p-table",250),t.YNc(99,Me,9,0,"ng-template",7),t.YNc(100,Ue,13,12,"ng-template",8),t.qZA()()(),t.YNc(101,Ne,33,1,"div",251),t.qZA()()()()(),t.TgZ(102,"p-footer"),t.YNc(103,ke,1,3,"p-progressBar",255),t.YNc(104,Pe,2,0,"p",256),t.YNc(105,Ee,1,1,"button",257),t.YNc(106,Fe,1,1,"button",258),t.TgZ(107,"button",259),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.displayReportDialog=!1)}),t.qZA()(),t.TgZ(108,"ngx-spinner",260)(109,"p",11),t._uU(110,"Preparing..."),t.qZA()()()}if(2&n){const e=t.oxw();t.Akn(t.VKq(41,Qe,e.vw)),t.Q6J("closable",!1)("visible",e.displayReportDialog)("baseZIndex",1e4),t.xp6(13),t.hij(" ",e.cryptoSrv.decryptEncodedText(e.shopDetail.name)," "),t.xp6(2),t.Oqu(e.cryptoSrv.decryptEncodedText(e.shopDetail.description)),t.xp6(2),t.hij("Location: ",e.cryptoSrv.decryptEncodedText(e.shopDetail.location),""),t.xp6(3),t.Oqu(e.invoiceToView.title),t.xp6(2),t.hij("# INV-",e.invoiceToView.number,""),t.xp6(5),t.hij("Ksh ",t.xi3(28,30,e.invoiceToView.invoice_total,".2-2"),""),t.xp6(9),t.Oqu(t.lcZ(37,33,e.debtorToView.name)),t.xp6(6),t.Oqu(t.lcZ(43,35,e.invoiceToView.date)),t.xp6(5),t.Q6J("value",e.invoiceToView.items),t.xp6(3),t.Q6J("ngIf",e.visiblesummary),t.xp6(12),t.hij(" ",e.cryptoSrv.decryptEncodedText(e.shopDetail.name)," "),t.xp6(2),t.Oqu(e.cryptoSrv.decryptEncodedText(e.shopDetail.description)),t.xp6(2),t.hij("Location: ",e.cryptoSrv.decryptEncodedText(e.shopDetail.location),""),t.xp6(7),t.Oqu(e.invoiceToView.number),t.xp6(4),t.Oqu(e.invoiceToView.title),t.xp6(8),t.Oqu(t.lcZ(86,37,e.debtorToView.name)),t.xp6(3),t.Oqu(e.debtorToView.mobile_number),t.xp6(5),t.Oqu(t.lcZ(94,39,e.invoiceToView.date)),t.xp6(5),t.Q6J("value",e.invoiceToView.items),t.xp6(3),t.Q6J("ngIf",e.visiblesummary),t.xp6(2),t.Q6J("ngIf",e.downloadClicked),t.xp6(1),t.Q6J("ngIf",e.downloadClicked),t.xp6(1),t.Q6J("ngIf",e.invoiceToView.invoice_total>0),t.xp6(1),t.Q6J("ngIf",e.invoiceToView.invoice_total>0),t.xp6(2),t.Q6J("fullScreen",!1)}}function He(n,r){1&n&&(t.TgZ(0,"label",155),t._uU(1," Mobile number must be in the format 254xxxxxxxxx. "),t.qZA()),2&n&&t.Q6J("@enter",void 0)}function Ve(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"p-dialog",17),t.NdJ("visibleChange",function(i){t.CHM(e);const s=t.oxw();return t.KtG(s.displaySmsDialog=i)}),t.ALo(1,"titlecase"),t.TgZ(2,"form",92,106),t.NdJ("ngSubmit",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.sendSms())}),t.TgZ(4,"div",0)(5,"div",23)(6,"div",147)(7,"div",95)(8,"label",148),t._uU(9,"Mobile number"),t.qZA(),t.TgZ(10,"input",149,150),t.NdJ("ngModelChange",function(i){t.CHM(e);const s=t.oxw();return t.KtG(s.mobile=i)}),t.qZA(),t.YNc(12,He,2,1,"label",151),t.qZA()()(),t.TgZ(13,"div",23)(14,"div",140)(15,"div",152)(16,"label",286),t._uU(17,"Message"),t.qZA(),t.TgZ(18,"textarea",287),t.NdJ("ngModelChange",function(i){t.CHM(e);const s=t.oxw();return t.KtG(s.message=i)}),t._uU(19,"                  "),t.qZA()()()()(),t.TgZ(20,"p-footer"),t._UZ(21,"button",288),t.TgZ(22,"button",289),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return i.message="",t.KtG(i.displaySmsDialog=!1)}),t.qZA()()(),t.TgZ(23,"ngx-spinner",105),t._UZ(24,"p",11),t.qZA()()}if(2&n){const e=t.MAs(3),o=t.MAs(11),i=t.oxw();t.Akn(t.DdM(13,v)),t.MGl("header","Send sms to ",t.lcZ(1,11,i.debtorToView.name),""),t.Q6J("closable",!1)("visible",i.displaySmsDialog)("baseZIndex",1e4),t.xp6(10),t.Q6J("ngModel",i.mobile),t.xp6(2),t.Q6J("ngIf",!o.valid||null!=(null==o?null:o.value)&&!i.mobileFormatCorrect(null==o?null:o.value.toString())),t.xp6(6),t.Q6J("ngModel",i.message),t.xp6(3),t.Q6J("disabled",!e.valid||""==i.message||!i.mobileFormatCorrect(null==o?null:o.value.toString())),t.xp6(2),t.Q6J("fullScreen",!1)}}function Ge(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",296),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.downloadReport())}),t.qZA()}}function Ye(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"tr",64)(1,"th",132),t._uU(2,"Balance B.F "),t.qZA(),t.TgZ(3,"th",132),t._uU(4,"Transaction type "),t.qZA(),t.TgZ(5,"th",132),t._uU(6,"Invoice no "),t.qZA(),t.TgZ(7,"th",132),t._uU(8,"Amount "),t.qZA(),t.TgZ(9,"th",132),t._uU(10,"Payment channel "),t.qZA(),t.TgZ(11,"th",132),t._uU(12,"Posted by "),t.qZA(),t.TgZ(13,"th",132),t._uU(14,"Closing balance "),t.qZA(),t.TgZ(15,"th",162)(16,"div",290),t._uU(17," Transaction date "),t._UZ(18,"p-columnFilter",291),t.qZA()()(),t.TgZ(19,"tr")(20,"th",292)(21,"input",293),t.NdJ("input",function(i){t.CHM(e),t.oxw();const s=t.MAs(78);return t.KtG(s.filterGlobal(i.target.value,"contains"))}),t.qZA(),t.TgZ(22,"button",294),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.MAs(78).reset(),t.KtG(i.resetSupplierTransactions())}),t.qZA(),t.YNc(23,Ge,1,0,"button",295),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(23),t.Q6J("ngIf",e.amountSupplied+e.amountPaid>0)}}function Ke(n,r){if(1&n&&(t.TgZ(0,"tr",69)(1,"td"),t._uU(2),t.ALo(3,"number"),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.ALo(6,"titlecase"),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.ALo(11,"number"),t.qZA(),t.TgZ(12,"td")(13,"label",73),t._uU(14),t.ALo(15,"titlecase"),t.qZA()(),t.TgZ(16,"td"),t._uU(17),t.ALo(18,"titlecase"),t.qZA(),t.TgZ(19,"td"),t._uU(20),t.ALo(21,"number"),t.qZA(),t.TgZ(22,"td"),t._uU(23),t.ALo(24,"date"),t.qZA()()),2&n){const e=r.$implicit;t.xp6(2),t.hij(" ",t.xi3(3,11,e.opening_balance,".2")," "),t.xp6(3),t.hij(" ",t.lcZ(6,14,e.transaction_type)," "),t.xp6(3),t.hij(" ",e.invoice_number," "),t.xp6(2),t.hij(" ",t.xi3(11,16,e.amount,".2")," "),t.xp6(3),t.Akn("payment"==e.transaction_type?"cursor: pointer":""),t.s9C("pTooltip","payment"==e.transaction_type?"Paid to: "+e.paid_to:"-"),t.xp6(1),t.hij(" ",t.lcZ(15,19,e.payment_channel)," "),t.xp6(3),t.hij(" ",t.lcZ(18,21,e.added_by)," "),t.xp6(3),t.hij(" ",t.xi3(21,23,e.closing_balance,".2")," "),t.xp6(3),t.hij(" ",t.xi3(24,26,e.date_created,"fullDate")," ")}}function je(n,r){1&n&&(t.TgZ(0,"tr")(1,"td",297),t._uU(2,"No records found."),t.qZA()())}function Oe(n,r){if(1&n&&(t.TgZ(0,"th"),t._uU(1),t.ALo(2,"titlecase"),t.ALo(3,"number"),t.TgZ(4,"p",299)(5,"i",266),t._uU(6),t.ALo(7,"number"),t.qZA()()()),2&n){const e=r.$implicit;t.xp6(1),t.AsE(" ",t.lcZ(2,3,e.unit_name)," (",t.lcZ(3,5,e.unit_quantity),") "),t.xp6(5),t.Oqu("@Ksh "+t.lcZ(7,7,e.recom_selling_price))}}function Be(n,r){if(1&n&&(t.TgZ(0,"tr"),t._UZ(1,"th"),t.TgZ(2,"th"),t._uU(3,"Location"),t.qZA(),t.YNc(4,Oe,8,9,"th",269),t.qZA()),2&n){const e=t.oxw(2);t.xp6(4),t.Q6J("ngForOf",e.itemToViewLocations.selling_units)}}function Re(n,r){if(1&n&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&n){const e=r.$implicit,o=t.oxw().$implicit,i=t.oxw(2);t.xp6(1),t.hij(" ",i.getLocationUnitQuantity(o.location_quantity,i.itemToViewLocations.selling_units)[e.unit_name]," ")}}const $e=function(n){return{"background-color":n,color:"#ffffff"}};function ze(n,r){if(1&n&&(t.TgZ(0,"tr")(1,"td"),t._UZ(2,"p-avatar",200),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.ALo(5,"titlecase"),t.qZA(),t.YNc(6,Re,2,1,"td",269),t.qZA()),2&n){const e=r.$implicit,o=t.oxw(2);t.xp6(2),t.Akn(t.VKq(6,$e,e.location.color)),t.xp6(2),t.Oqu(t.lcZ(5,4,e.location.name)),t.xp6(2),t.Q6J("ngForOf",o.itemToViewLocations.selling_units)}}function We(n,r){if(1&n&&(t.TgZ(0,"p-table",298),t.YNc(1,Be,5,1,"ng-template",7),t.YNc(2,ze,7,8,"ng-template",8),t.qZA()),2&n){const e=t.oxw();t.Q6J("value",e.itemToViewLocations.locations_qty)("paginator",!1)("rows",5)}}const Xe=function(){return{width:"80vw"}},J=function(){return["name"]},k=function(){return{width:"70vw"}},to=function(){return["transaction_code","transaction_total","reversed"]},eo=function(){return{width:"60vw"}},oo=function(){return{width:"90vw"}},io=function(){return["title","number"]},P=function(){return{width:"95vw"}},no=function(){return["invoice_number","transaction_type","amount"]},so=function(){return{width:"500px"}},ro=[{path:"",component:(()=>{class n{constructor(e,o,i,s,a,c,p,T,f){this.spinner=e,this.cryptoSrv=o,this.toastr=i,this.authSrv=s,this.apiSrv=a,this._decimalPipe=c,this.pdf=p,this.cdr=T,this.confirmationService=f,this.currentDisplaySize={width:window.innerWidth,height:window.innerHeight},this.vw="85vw",this.loading=!1,this.debtors=[],this.newPaymentModel={},this.showPaymentModal=!1,this.showNotification=!1,this.debtorSalesTransactions=[],this.showDebtorSales=!1,this.debtorDateSales=[],this.showDebtorDateTransactions=!1,this.dateOfSale="",this.dateToView="",this.displayItemsDialog=!1,this.debtorPayments=[],this.showDebtorPayments=!1,this.totalOwed=0,this.showTotal=!1,this.displayLimitForm=!1,this.limitModel={},this.displayCustomerForm=!1,this.newCustomer={},this.userCanAddDebtors=!1,this.userIsAdmin=!1,this.userCanSetLimits=!1,this.userCanReceivePayments=!1,this.customerInvoices=[],this.showInvoicesDialog=!1,this.invoiceToEdit={},this.displayEditInvoiceDialog=!1,this.allProducts=[],this.invoiceToView={},this.showInvoiceItems=!1,this.displaySellDialog=!1,this.itemToSellModel={},this.activateSellForm=!1,this.availableUnits=[],this.priceError="",this.quantityError="",this.priceError2="",this.customerToEdit={},this.showInvoiceForm=!1,this.newInvoice={},this.shopDetail={},this.displayReportDialog=!1,this.cols=[],this.ordersToPrint=[],this.displaySmsDialog=!1,this.message="",this.mobile="254",this.userCanSendSms=!1,this.supplierTransactions=[],this.showSupplierTransactions=!1,this.openingBalance=0,this.amountSupplied=0,this.amountPaid=0,this.closingBalance=0,this.filteredSupplierTransactions=[],this.loading2=!1,this.downloadClicked=!1,this.screenshots=[],this.visiblesummary=!0,this.periodEndDate=new Date,this.periodStartDate=new Date,this.showStatementsForm=!1,this.periodFrom=new Date,this.periodTo=new Date,this.periodTransactions=[]}onResize(e){this.currentDisplaySize={width:window.innerWidth,height:window.innerHeight},window.innerWidth>1280&&window.innerWidth<=1366&&(this.vw="80vw"),window.innerWidth<=1280&&(this.vw="75vw"),window.innerWidth>1366&&(this.vw="65vw")}ngOnInit(){this.showNotification=!1,this.getAllDebtors(),"admin"===this.cryptoSrv.decryptEncodedText(this.authSrv.getUserDetailToken("role"))&&(this.userIsAdmin=!0),"1"===this.cryptoSrv.decryptEncodedText(this.authSrv.getRoleToken("adding_new_debtors"))&&(this.userCanAddDebtors=!0),"1"===this.cryptoSrv.decryptEncodedText(this.authSrv.getRoleToken("set_debtor_limits"))&&(this.userCanSetLimits=!0),"1"===this.cryptoSrv.decryptEncodedText(this.authSrv.getRoleToken("receiving_debtor_payments"))&&(this.userCanReceivePayments=!0),"1"===this.cryptoSrv.decryptEncodedText(this.authSrv.getRoleToken("sending_customer_messages"))&&(this.userCanSendSms=!0)}getAllDebtors(){this.spinner.show();const e={action:this.cryptoSrv.encodeEncryptText("get-all-debtor-summary"),added_by:this.authSrv.getUserDetailToken("uid")};this.apiSrv.read(e).then(o=>{"error"!=o.status?"error2"!=o.status?(this.debtors=o.debtors,this.totalOwed=0,this.debtors.forEach(i=>{this.totalOwed+=i.sales-i.credit_note-i.payments}),this.debtors=this.debtors.sort((i,s)=>s.sales-s.credit_note-s.payments-(i.sales-i.credit_note-i.payments)),this.spinner.hide(),this.loading=!1):(this.spinner.hide(),this.toastr.error("Please login again.","Login session expired!"),this.authSrv.logout()):(this.spinner.hide(),this.toastr.error(o.message))}).catch(o=>{this.toastr.error(o),this.spinner.hide()})}getDebtorSalesAndReversals(e){this.debtorToView=e,this.spinner.show();const o={action:this.cryptoSrv.encodeEncryptText("get_all_debtor_sales_and_reversals"),customer_id:this.debtorToView.id};this.apiSrv.read(o).then(i=>{"error"!=i.status?"error2"!=i.status?(this.debtorSalesTransactions=i.transactions,this.showDebtorSales=!0,this.spinner.hide(),this.loading=!1):(this.spinner.hide(),this.toastr.error("Please login again.","Login session expired!"),this.authSrv.logout()):(this.spinner.hide(),this.toastr.error(i.message))}).catch(i=>{this.toastr.error(i),this.spinner.hide()})}showPeriodForm(e){this.debtorToView=e,this.periodEndDate=new Date,this.periodStartDate=new Date,this.showStatementsForm=!0}getCustomerStatement(){this.spinner.show("invoice");const e={action:this.cryptoSrv.encodeEncryptText("get-debtor-period-statement"),customer_id:this.debtorToView.id,from:this.cryptoSrv.encodeEncryptText(this.periodStartDate.toLocaleString("sv-SE",{hour12:!1})),to:this.cryptoSrv.encodeEncryptText(this.periodEndDate.toLocaleString("sv-SE",{hour12:!1}))};this.apiSrv.read(e).then(o=>{if(this.spinner.hide("invoice"),"error"!==o.status)if("error2"!==o.status)if(o.transactions.length>0){this.periodTransactions=o.transactions;const i=o.transactions.length>0?this.periodTransactions[o.transactions.length-1].closing_balance:0;this.shopDetail=o.shop,this.showStatementsForm=!1,this.pdf.downloadStatement(this.shopDetail,this.periodTransactions,this.debtorToView,i,this.periodStartDate,this.periodEndDate)}else this.toastr.warning("No transactions made in that period!");else this.spinner.hide("invoice"),this.toastr.error("Please login again.","Login session expired!"),this.authSrv.logout();else this.spinner.hide("invoice"),this.toastr.error(o.message)},o=>{this.spinner.hide("invoice"),"401"===o?(this.toastr.error("Please login again.","Login session expired!"),this.authSrv.logout()):"402"===o?(this.toastr.error("Could not fetch your company data. Try again later!","Database error!"),this.authSrv.logout()):this.toastr.error("Something bad happened. Try again later!","Oops")})}downloadStatement(){}getDifferenceInDays(){if(this.periodFrom){const e=new Date(this.periodFrom.toLocaleDateString("sv-SE"));return(new Date(this.periodTo.toLocaleDateString("sv-SE")).getTime()-e.getTime())/864e5}return 0}getDate(e){e=(e=e.toLocaleString("sv-SE",{hour12:!1})).split(" ")[0],this.debtorSalesTransactions.find(s=>s.transaction_date===e)?this.showDebtorDateSales(e):this.toastr.error("No sales for that date!")}showDebtorDateSales(e){this.dateToView=e,this.spinner.show("date");const o={action:this.cryptoSrv.encodeEncryptText("get-debtor-date-transactions"),customer_id:this.debtorToView.id,date:this.cryptoSrv.encodeEncryptText(e.toLocaleString("sv-SE",{hour12:!1}))};this.apiSrv.read(o).then(i=>{"error"!=i.status?"error2"!=i.status?(this.debtorDateSales=i.transactions,this.debtorDateSales.forEach(s=>{s.transaction_code=this.cryptoSrv.decryptEncodedText(s.transaction_code)}),this.showDebtorDateTransactions=!0,this.spinner.hide("date"),this.loading=!1):(this.spinner.hide("date"),this.toastr.error("Please login again.","Login session expired!"),this.authSrv.logout()):(this.spinner.hide("date"),this.toastr.error(i.message))}).catch(i=>{this.toastr.error(i),this.spinner.hide("date")})}showReceiptItems(e){this.receiptToView=e,this.displayItemsDialog=!0}getAllDebtorTransactions(e){this.debtorToView=e,this.spinner.show();const o={action:this.cryptoSrv.encodeEncryptText("get-all-debtor-transactions"),added_by:this.authSrv.getUserDetailToken("uid"),debtor_id:this.debtorToView.id};this.apiSrv.read(o).then(i=>{"error"!=i.status?"error2"!=i.status?(this.supplierTransactions=i.transactions,this.supplierTransactions.forEach(s=>{s.date_created=new Date(s.date_created)}),this.supplierTransactions=this.supplierTransactions.sort((s,a)=>a.date_created.getTime()-s.date_created.getTime()),this.showSupplierTransactions=!0,this.spinner.hide(),this.loading=!1):(this.spinner.hide(),this.toastr.error("Please login again.","Login session expired!"),this.authSrv.logout()):(this.spinner.hide(),this.toastr.error(i.message))}).catch(i=>{this.toastr.error(i),this.spinner.hide()})}filterSupplierTransactions(e){this.openingBalance=0,this.amountSupplied=0,this.amountPaid=0,this.closingBalance=0,this.openingBalance=e.filteredValue[e.filteredValue.length-1].opening_balance,e.filteredValue.forEach(o=>{"invoice"===o.transaction_type&&(this.amountSupplied+=parseFloat(o.amount.toString())),"payment"===o.transaction_type&&(this.amountPaid+=parseFloat(o.amount.toString()))}),this.closingBalance=e.filteredValue[0].closing_balance,this.filteredSupplierTransactions=e.filteredValue}resetSupplierTransactions(){this.openingBalance=0,this.amountSupplied=0,this.amountPaid=0,this.closingBalance=0,this.openingBalance=this.supplierTransactions[this.supplierTransactions.length-1].opening_balance,this.supplierTransactions.forEach(e=>{"invoice"===e.transaction_type&&(this.amountSupplied+=parseFloat(e.amount.toString())),"payment"===e.transaction_type&&(this.amountPaid+=parseFloat(e.amount.toString()))}),this.closingBalance=this.supplierTransactions[0].closing_balance}showPayment(e,o){this.debtorToView=e,this.newPaymentModel.balance_before=o,this.showPaymentModal=!0,this.newPaymentModel.cash=0,this.newPaymentModel.mpesa=0,this.newPaymentModel.bank=0}addPayment(){this.spinner.show("new"),"cash"===this.newPaymentModel.channel?this.newPaymentModel.cash=this.newPaymentModel.amount:"mpesa"===this.newPaymentModel.channel?this.newPaymentModel.mpesa=this.newPaymentModel.amount:this.newPaymentModel.bank=this.newPaymentModel.amount;const e={action:this.cryptoSrv.encodeEncryptText("add-debtor-payment"),customer_id:this.debtorToView.id,balance:this.cryptoSrv.encodeEncryptText(this.newPaymentModel.balance_before.toString()),cash:this.cryptoSrv.encodeEncryptText(this.newPaymentModel.cash.toString()),mpesa:this.cryptoSrv.encodeEncryptText(this.newPaymentModel.mpesa.toString()),bank:this.cryptoSrv.encodeEncryptText(this.newPaymentModel.bank.toString()),added_by:this.authSrv.getUserDetailToken("uid")};this.apiSrv.post(e).then(o=>{"error"!=o.status?"error2"!=o.status?(this.showNotification=!0,this.spinner.hide("new"),setTimeout(()=>{this.showPaymentModal=!1,this.newPaymentModel={},this.ngOnInit()},1700)):(this.spinner.hide("new"),this.toastr.error("Please login again.","Login session expired!"),this.authSrv.logout()):(this.spinner.hide("new"),this.toastr.error(o.message))}).catch(o=>{this.toastr.error(o),this.spinner.hide("new")})}getDebtorPayments(e){this.debtorToView=e,this.spinner.show();const o={action:this.cryptoSrv.encodeEncryptText("get-debtor-payments"),debtor_id:this.debtorToView.id};this.apiSrv.read(o).then(i=>{"error"!=i.status?"error2"!=i.status?(this.debtorPayments=i.payments,this.showDebtorPayments=!0,this.spinner.hide(),this.loading=!1):(this.spinner.hide(),this.toastr.error("Please login again.","Login session expired!"),this.authSrv.logout()):(this.spinner.hide(),this.toastr.error(i.message))}).catch(i=>{this.toastr.error(i),this.spinner.hide()})}dateIsToday(e){let o=new Date(e),i=new Date;return i.setHours(0,0,0,0),o.toDateString()===i.toDateString()}userIsCurrent(e){return e===this.cryptoSrv.decryptEncodedText(this.authSrv.getUserDetailToken("nm"))}showLimit(e){this.showNotification=!1,this.debtorToView=e,this.displayLimitForm=!0}completeLimit(){this.spinner.show("limit");const e={action:this.cryptoSrv.encodeEncryptText("change-debtor-limit"),customer_id:this.debtorToView.id,amount:this.cryptoSrv.encodeEncryptText(this.limitModel.amount.toString()),added_by:this.authSrv.getUserDetailToken("uid")};this.apiSrv.post(e).then(o=>{"error"!=o.status?"error2"!=o.status?(this.showNotification=!0,this.spinner.hide("limit"),setTimeout(()=>{this.displayLimitForm=!1,this.limitModel={},this.ngOnInit()},1700)):(this.spinner.hide("limit"),this.toastr.error("Please login again.","Login session expired!"),this.authSrv.logout()):(this.spinner.hide("limit"),this.toastr.error(o.message))}).catch(o=>{this.toastr.error(o),this.spinner.hide("limit")})}deleteDebtor(e){this.confirmationService.confirm({message:"Are you sure you want to delete this debtor?",acceptButtonStyleClass:"p-button-primary p-button-sm",rejectButtonStyleClass:"p-button-danger p-button-sm",acceptLabel:"Yes",rejectLabel:"No",accept:()=>{this.spinner.show();const o={action:this.cryptoSrv.encodeEncryptText("delete-debtor"),customer_id:e.id,added_by:this.authSrv.getUserDetailToken("uid")};this.apiSrv.post(o).then(i=>{"error"!=i.status?"error2"!=i.status?(this.toastr.success("Debtor deleted!"),this.debtors=this.debtors.filter(s=>s.id!=e.id),this.spinner.hide()):(this.spinner.hide(),this.toastr.error("Please login again.","Login session expired!"),this.authSrv.logout()):(this.spinner.hide(),this.toastr.error(i.message))}).catch(i=>{this.toastr.error(i),this.spinner.hide()})},reject:()=>{}})}confirmDeletePayment(e){this.confirmationService.confirm({message:"Are you sure you want to delete this payment?",acceptButtonStyleClass:"p-button-primary p-button-sm",rejectButtonStyleClass:"p-button-danger p-button-sm",acceptLabel:"Yes",rejectLabel:"No",accept:()=>{this.delete(e)},reject:()=>{}})}delete(e){this.spinner.show("payment");const o={action:this.cryptoSrv.encodeEncryptText("delete-debtor-payment"),added_by:this.authSrv.getUserDetailToken("uid"),id:e.id,customer_id:this.debtorToView.id};this.apiSrv.post(o).then(i=>{"error"!=i.status?"error2"!=i.status?(this.toastr.success("Payment record deleted!"),this.debtorPayments=this.debtorPayments.filter(s=>s.id!==e.id)):(this.toastr.error("Please login again.","Login session expired!"),this.authSrv.logout()):this.toastr.error(i.message),this.spinner.hide("payment")}).catch(i=>{this.toastr.error(i),this.spinner.hide("payment")})}mobileFormatCorrect(e){return!("254"!==e.substring(0,3)||12!==e?.length||"-"===e.substring(0,1))}showNewCustomerForm(){this.newCustomer={},this.displayCustomerForm=!0}addNewCustomer(){this.spinner.show("newcustomer");const e={action:this.cryptoSrv.encodeEncryptText("add_new_debtor"),name:this.cryptoSrv.encodeEncryptText(this.newCustomer.name),mobile_number:this.cryptoSrv.encodeEncryptText(this.newCustomer.mobile.toString()),sales_limit:this.cryptoSrv.encodeEncryptText(this.newCustomer.limit.toString()),added_by:this.authSrv.getUserDetailToken("uid")};this.apiSrv.post(e).then(o=>{"error"!=o.status?"error2"!=o.status?(this.showNotification=!0,setTimeout(()=>{this.displayCustomerForm=!1,this.newCustomer={},this.ngOnInit()},1700)):(this.toastr.error("Please login again.","Login session expired!"),this.authSrv.logout()):this.toastr.error(o.message),this.spinner.hide("newcustomer")}).catch(o=>{this.toastr.error(o),this.spinner.hide("newcustomer")})}showCustomerInvoicesDialog(e){this.debtorToView=this.apiSrv.deepCopy(e),this.spinner.show(),this.spinner.show("invoices");const o={action:this.cryptoSrv.encodeEncryptText("get_customer_invoices"),customer_id:this.debtorToView.id};this.apiSrv.read(o).then(i=>{this.spinner.hide(),this.spinner.hide("invoices"),"error"!==i.status?"error2"!==i.status?(this.customerInvoices=i.Invoices,this.showInvoicesDialog=!0,this.loading=!1):(this.toastr.error("Please login again.","Login session expired!"),this.authSrv.logout()):this.toastr.error(i.message)},i=>{this.spinner.hide(),this.spinner.hide("invoices"),"401"===i?(this.spinner.hide(),this.toastr.error("Please login again.","Login session expired!"),this.authSrv.logout()):"402"===i?(this.spinner.hide(),this.toastr.error("Could not fetch your company data. Try again later!","Database error!"),this.authSrv.logout()):(this.spinner.hide(),this.toastr.error("Something bad happened. Try again later!","Oops"))})}showEditInvoice(e){this.invoiceToEdit=this.apiSrv.deepCopy(e),this.invoiceToEdit.date=new Date(this.invoiceToEdit.date),this.displayEditInvoiceDialog=!0}editInvoice(){this.spinner.show("editinvoice");const e={action:this.cryptoSrv.encodeEncryptText("update_customer_invoice"),id:this.invoiceToEdit.id,customer_id:this.debtorToView.id,invoice_number:this.cryptoSrv.encodeEncryptText(this.invoiceToEdit.number),title:this.cryptoSrv.encodeEncryptText(this.invoiceToEdit.title),invoice_date:this.cryptoSrv.encodeEncryptText(this.invoiceToEdit.date.toLocaleDateString("sv-SE")),created_by:this.authSrv.getUserDetailToken("uid")};this.apiSrv.post(e).then(o=>{this.spinner.hide("editinvoice"),"error"!==o.status?"error2"!==o.status?(this.toastr.success("Invoice updated!"),this.customerInvoices=o.Invoices,this.hideEditInvoice()):(this.toastr.error("Please login again.","Login session expired!"),this.authSrv.logout()):this.toastr.error(o.message)},o=>{this.spinner.hide("editinvoice"),this.toastr.error("Could not add!")})}hideEditInvoice(){this.invoiceToEdit={},this.displayEditInvoiceDialog=!1}showInvoiceItemsDialog(e){this.getAllProducts(e)}getAllProducts(e){this.spinner.show("invoices");const o={action:this.cryptoSrv.encodeEncryptText("get-all-stock-new"),added_by:this.authSrv.getUserDetailToken("uid")};this.apiSrv.read(o).then(i=>{this.spinner.hide("invoices"),"error"!==i.status?"error2"!==i.status?(this.allProducts=i.data.stock,this.locations=i.data.locations,this.allProducts.forEach(s=>{s.attention=0,parseInt(s.prices_ok.toString())>0?(s.prices_ok=!1,s.sp_units_ok=!1,s.attention=1):(s.prices_ok=!0,s.sp_units_ok=!0),parseInt(s.min_qty_ok.toString())<1||parseInt(s.min_qty_ok.toString())>1?(s.min_qty_ok=!1,s.min_unit_ok=!1,s.attention=1):(s.min_qty_ok=!0,s.min_unit_ok=!0),s.locations_count=parseInt(s.locations_count.toString()),s.category=i.data.categories.find(a=>a.id===s.category_id),s.vat=i.data.vat_records.find(a=>a.id===s.vat_id)}),this.allProducts=this.allProducts.sort((s,a)=>a.attention-s.attention),this.invoiceToView=e,this.showInvoiceItems=!0):(this.toastr.error("Please login again.","Login session expired!"),this.authSrv.logout()):this.toastr.error(i.message)},i=>{this.spinner.hide("invoices"),"401"===i?(this.spinner.hide(),this.toastr.error("Please login again.","Login session expired!"),this.authSrv.logout()):"402"===i?(this.spinner.hide(),this.toastr.error("Could not fetch your company data. Try again later!","Database error!"),this.authSrv.logout()):(this.spinner.hide(),this.toastr.error("Something bad happened. Try again later!","Oops"))})}selectItem(e){if(e.selling_units)this.itemToSellModel.location=null,this.showNotification=!1,this.activateSellForm=!1,this.itemToSellModel=e,this.itemToSellModel.unit=e.selling_units[0],this.itemToSellModel.unit_price=this.itemToSellModel.unit.recom_selling_price,this.itemToSellModel.discount=0,this.itemToSellModel.total_price=0,this.availableUnits=[],this.displaySellDialog=!0,this.checkPrice();else{this.loading2=!0;let o=this.allProducts.find(s=>s.id===e.id);this.itemToViewLocations=o;const i={action:this.cryptoSrv.encodeEncryptText("get_item_all_locations_quantity"),item_id:e.id,added_by:this.authSrv.getUserDetailToken("uid")};this.apiSrv.read(i).then(s=>{"error"!=s.status?"error2"!=s.status?(o.selling_units=s.selling_units,o.locations_qty=s.locations_qty,o.total_qty=s.total_qty,o.locations=s.locations,this.itemToSellModel.location=null,this.showNotification=!1,this.activateSellForm=!1,this.itemToSellModel=e,this.itemToSellModel.unit=e.selling_units[0],this.itemToSellModel.unit_price=this.itemToSellModel.unit.recom_selling_price,this.itemToSellModel.discount=0,this.itemToSellModel.total_price=0,this.availableUnits=[],this.displaySellDialog=!0,this.checkPrice(),this.loading2=!1):(this.loading2=!1,this.toastr.error("Please login again.","Login session expired!"),this.authSrv.logout()):(this.loading2=!1,this.toastr.error(s.message))}).catch(s=>{this.toastr.error(s),this.loading2=!1})}}checkPrice(){parseInt(this.itemToSellModel.buying_price),parseInt(this.itemToSellModel.unit_price)}updateLocationSelected(e){this.itemToSellModel.location_id=e.value.location.id,this.itemToSellModel.location=e.value,this.itemToSellModel.unit_quantity=0,this.itemToSellModel.unit=null}updateUnitSelected(e){this.itemToSellModel.unit_id=e.value.id,this.itemToSellModel.unit=e.value,this.itemToSellModel.unit_price=this.itemToSellModel.unit.recom_selling_price,this.itemToSellModel.unit_quantity=0,this.checkPrice()}checkQuantity(){this.itemToSellModel.total_price=parseFloat(this.itemToSellModel.unit_quantity)*parseFloat(this.itemToSellModel.unit_price),this.itemToSellModel.total_price=this._decimalPipe.transform(this.itemToSellModel.total_price,"1.2-2"),this.quantityError=""}confirmPrice(){this.itemToSellModel.total_price=parseFloat(this.itemToSellModel.unit_quantity)*parseFloat(this.itemToSellModel.unit_price),this.itemToSellModel.total_price=this._decimalPipe.transform(this.itemToSellModel.total_price,"1.2-2"),this.priceError2=""}hideSellForm(){this.displaySellDialog=!1}showInvoiceFormDialog(e){this.customerToEdit=this.apiSrv.deepCopy(e),this.newInvoice={},this.showInvoiceForm=!0}createInvoice(){this.spinner.show("invoice");let e="";e=this.debtorToView.id;const o={action:this.cryptoSrv.encodeEncryptText("add_new_customer_invoice"),customer_id:this.debtorToView.id,invoice_number:this.cryptoSrv.encodeEncryptText(this.newInvoice.number),title:this.cryptoSrv.encodeEncryptText(this.newInvoice.title),invoice_date:this.cryptoSrv.encodeEncryptText(this.newInvoice.date.toLocaleDateString("sv-SE")),created_by:this.authSrv.getUserDetailToken("uid")};this.apiSrv.post(o).then(i=>{this.spinner.hide("invoice"),"error"!==i.status?"error2"!==i.status?(this.toastr.success("Invoice created!"),this.showInvoiceForm=!1,this.showCustomerInvoicesDialog(this.debtorToView)):(this.toastr.error("Please login again.","Login session expired!"),this.authSrv.logout()):(this.spinner.hide("invoice"),this.toastr.error(i.message))},i=>{this.spinner.hide("invoice"),this.toastr.error("Could not add!")})}hideInvoiceForm(){this.showInvoiceForm=!1,this.newInvoice={}}addInvoiceItem(){this.spinner.show("sell");const e={action:this.cryptoSrv.encodeEncryptText("add_customer_invoice_item"),invoice_id:this.invoiceToView.id,item_id:this.itemToSellModel.id,unit:this.itemToSellModel.unit.id,unit_quantity:this.cryptoSrv.encodeEncryptText(this.itemToSellModel.unit_quantity.toString()),item_price:this.cryptoSrv.encodeEncryptText(this.itemToSellModel.unit_price.toString()),added_by:this.authSrv.getUserDetailToken("uid")};this.apiSrv.post(e).then(o=>{this.spinner.hide("sell"),"error"!==o.status?"error2"!==o.status?(this.displaySellDialog=!1,this.invoiceToView.items=o.items,this.itemToSellModel={},this.toastr.success("Item added!")):(this.toastr.error("Please login again.","Login session expired!"),this.authSrv.logout()):this.toastr.error(o.message)},o=>{this.spinner.hide("sell"),this.toastr.error(o)})}showDeleteInvoiceItemConfirm(e){this.confirmationService.confirm({message:"Are you sure you want to delete this item?",acceptButtonStyleClass:"p-button-primary p-button-sm",rejectButtonStyleClass:"p-button-danger p-button-sm",accept:()=>{this.spinner.show("deleteitem");const o={action:this.cryptoSrv.encodeEncryptText("delete_customer_invoice_item"),invoice_id:this.invoiceToView.id,item_id:e.id,added_by:this.authSrv.getUserDetailToken("uid")};this.apiSrv.post(o).then(i=>{this.spinner.hide("deleteitem"),"error"!==i.status?(this.invoiceToView.items=this.invoiceToView.items.filter(s=>s.id!=e.id),this.toastr.success("Item deleted!")):this.toastr.error(i.message)},i=>{this.spinner.hide("deleteitem"),this.toastr.error("Could not delete item!")})},reject:()=>{}})}generateInvoiceDocument(e){this.invoiceToView=e,this.spinner.show("invoices");const o={action:this.cryptoSrv.encodeEncryptText("get_shop_details")};this.apiSrv.read(o).then(i=>{this.spinner.hide("invoices"),"error"!==i.status?"error2"!==i.status?(this.shopDetail=i.shop,this.updateRowGroupMetaData()):(this.toastr.error("Please login again.","Login session expired!"),this.authSrv.logout()):this.toastr.error(i.message)},i=>{this.spinner.hide("invoices"),"401"===i?(this.toastr.error("Please login again.","Login session expired!"),this.authSrv.logout()):"402"===i?(this.toastr.error("Could not fetch your company data. Try again later!","Database error!"),this.authSrv.logout()):this.toastr.error("Something bad happened. Try again later!","Oops")})}updateRowGroupMetaData(){if(this.rowGroupMetadata={},this.invoiceToView.items){let e=1;for(let o=0;o<this.invoiceToView.items.length;o++){this.invoiceToView.items[o].no=e,e++;let s=this.invoiceToView.items[o].item;0==o?this.rowGroupMetadata[s]={index:0,size:1}:s===this.invoiceToView.items[o-1].item_name?this.rowGroupMetadata[s].size++:this.rowGroupMetadata[s]={index:o,size:1}}this.displayReportDialog=!0}}captureReport(){const e=document.getElementById("pdfTable");C()(e,{width:e.scrollWidth,height:e.scrollHeight,scale:3}).then(o=>{o.style.transform="rotate(90deg)",o.style.width="600px",o.style.height="800px";const i=o.toDataURL("image/png"),s=document.createElement("a");s.href=i,s.download="screenshot.png",s.click()})}downloadInvoiceOld(){var e=this;return(0,d.Z)(function*(){function o(a){return i.apply(this,arguments)}function i(){return(i=(0,d.Z)(function*(a){return new Promise(c=>setTimeout(c,a))})).apply(this,arguments)}e.downloadClicked=!0;let s=14;if("85vw"===e.vw&&(s=16),e.currentDisplaySize.width>=1366&&(s=16),e.invoiceToView.items.length>=s){e.visiblesummary=!1,e.cdr.detectChanges();let a=e.apiSrv.deepCopy(e.invoiceToView.items),c=0,p=s;for(e.invoiceToView.items=a.slice(c,p);e.invoiceToView.items.length>0;)e.invoiceToView.items.length<s&&(e.visiblesummary=!0),yield(0,d.Z)(function*(){yield o(1e3),yield e.takeScreenshot(),c+=s,p+=s,e.invoiceToView.items=a.slice(c,p)})(),e.visiblesummary&&(e.invoiceToView.items=[]);a.length==s&&(e.visiblesummary=!0,yield(0,d.Z)(function*(){yield o(1e3),yield e.takeScreenshot()})()),e.invoiceToView.items=a,e.savePdfNew(),e.downloadClicked=!1}else yield(0,d.Z)(function*(){yield o(1e3),yield e.takeScreenshot()})(),e.savePdfNew(),e.downloadClicked=!1})()}downloadInvoice(){var e=this;return(0,d.Z)(function*(){e.pdf.downloadInvoice(e.invoiceToView,e.shopDetail,e.debtorToView)})()}downloadDeliveryOld(){var e=this;return(0,d.Z)(function*(){function o(a){return i.apply(this,arguments)}function i(){return(i=(0,d.Z)(function*(a){return new Promise(c=>setTimeout(c,a))})).apply(this,arguments)}e.downloadClicked=!0;let s=14;if("85vw"===e.vw&&(s=16),e.currentDisplaySize.width>=1366&&(s=16),e.invoiceToView.items.length>=s){e.visiblesummary=!1,e.cdr.detectChanges();let a=e.apiSrv.deepCopy(e.invoiceToView.items),c=0,p=s;for(e.invoiceToView.items=a.slice(c,p);e.invoiceToView.items.length>0;)e.invoiceToView.items.length<s&&(e.visiblesummary=!0),yield(0,d.Z)(function*(){yield o(1e3),yield e.takeScreenshotDelivery(),c+=s,p+=s,e.invoiceToView.items=a.slice(c,p)})(),e.visiblesummary&&(e.invoiceToView.items=[]);a.length==s&&(e.visiblesummary=!0,yield(0,d.Z)(function*(){yield o(1e3),yield e.takeScreenshotDelivery()})()),e.invoiceToView.items=a,e.savePdfNewDelivery(),e.downloadClicked=!1}else yield(0,d.Z)(function*(){yield o(1e3),yield e.takeScreenshotDelivery()})(),e.savePdfNewDelivery(),e.downloadClicked=!1})()}downloadDelivery(){var e=this;return(0,d.Z)(function*(){e.pdf.downloadDelivery(e.invoiceToView,e.shopDetail,e.debtorToView)})()}takeScreenshot(){var e=this;return(0,d.Z)(function*(){const o=document.getElementById("pdfTable"),i=yield C()(o,{scale:3});e.screenshots.push(i)})()}takeScreenshotDelivery(){var e=this;return(0,d.Z)(function*(){const o=document.getElementById("pdfTableDelivery"),i=yield C()(o,{scale:3});e.screenshots.push(i)})()}savePdfNew(){const e=new A.default("p","mm","a4");this.screenshots.forEach((o,i)=>{i>0&&e.addPage();const s=o.toDataURL("image/png");e.addImage(s,"PNG",5,5,200,200/(o.width/o.height),void 0,"FAST")}),e.save("INV-"+this.invoiceToView.number+".pdf"),this.screenshots=[]}savePdfNewDelivery(){const e=new A.default("p","mm","a4");this.screenshots.forEach((o,i)=>{i>0&&e.addPage();const s=o.toDataURL("image/png");e.addImage(s,"PNG",5,5,200,200/(o.width/o.height),void 0,"FAST")}),e.save("Delivery-"+this.invoiceToView.number+".pdf"),this.screenshots=[]}reportPdf(){this.cols=[],this.ordersToPrint=[],this.spinner.show("report"),this.cols.push({field:"item_name",header:"Item"}),this.cols.push({field:"unit",header:"Unit"}),this.cols.push({field:"unit_quantity",header:"Quantity"}),this.cols.push({field:"selling_price",header:"Price (Ksh)"}),this.cols.push({field:"total_price",header:"Total price (Ksh)"});let a=new u.JJ("en-US");this.invoiceToView.items.forEach(c=>{const p={};this.cols.forEach(T=>{"item_name"===T.field&&(p.item_name=c.item),"unit"===T.field&&(p.unit=c.unit.unit_name),"unit_quantity"===T.field&&(p.unit_quantity=c.unit_quantity),"selling_price"===T.field&&(p.selling_price=a.transform(c.selling_price,".2-2")),p.total_price=a.transform(parseFloat((c.unit_quantity*parseFloat(c.selling_price)).toString()),".2-2")}),this.ordersToPrint.push(p)}),this.spinner.hide("report"),this.downloadReportPdfDocument()}downloadReportPdfDocument(){this.pdf.getReportPdfData(this.invoiceToView.title,this.cols,this.ordersToPrint,this.invoiceToView.number,this.invoiceToView.invoice_total,this.invoiceToView.date,this.debtorToView.name,this.cryptoSrv.decryptEncodedText(this.shopDetail.name),this.cryptoSrv.decryptEncodedText(this.shopDetail.description),this.cryptoSrv.decryptEncodedText(this.shopDetail.imageUrl))}showDeleteInvoiceConfirm(e){this.invoiceToView=e,this.confirmationService.confirm({message:"Are you sure you want to delete this invoice?",acceptButtonStyleClass:"btn btn-primary",rejectButtonStyleClass:"btn btn-danger",accept:()=>{this.spinner.show("invoices");const o={action:this.cryptoSrv.encodeEncryptText("delete_customer_invoice"),invoice_id:e.id,added_by:this.authSrv.getUserDetailToken("uid")};this.apiSrv.post(o).then(i=>{this.spinner.hide("invoices"),"error"!==i.status?(this.customerInvoices=this.customerInvoices.filter(s=>s.id!=e.id),this.toastr.success("Invoice deleted!")):this.toastr.error(i.message)},i=>{this.spinner.hide("invoices"),this.toastr.error("Could not delete invoice!")})},reject:()=>{}})}sendSms(){this.spinner.show("new");const e={action:this.cryptoSrv.encodeEncryptText("send_sms"),mobile:this.cryptoSrv.encodeEncryptText(this.mobile.toString()),message:this.cryptoSrv.encodeEncryptText(this.message),added_by:this.authSrv.getUserDetailToken("uid")};this.apiSrv.post(e).then(o=>{"error"!=o.status?"error2"!=o.status?(this.message="",this.mobile="254",this.toastr.success("Message sent"),this.displaySmsDialog=!1):(this.toastr.error("Please login again.","Login session expired!"),this.authSrv.logout()):this.toastr.error(o.message),this.spinner.hide("new")}).catch(o=>{this.toastr.error(o),this.spinner.hide("new")})}showLocationsQuantity(e,o){if(e.selling_units)this.itemToViewLocations=e,this.overlay.toggle(o);else{this.loading2=!0;let i=this.allProducts.find(a=>a.id===e.id);this.itemToViewLocations=i;const s={action:this.cryptoSrv.encodeEncryptText("get_item_all_locations_quantity"),item_id:e.id,added_by:this.authSrv.getUserDetailToken("uid")};this.apiSrv.read(s).then(a=>{"error"!=a.status?"error2"!=a.status?(i.selling_units=a.selling_units,i.locations_qty=a.locations_qty,i.total_qty=a.total_qty,i.locations=a.locations,this.overlay.toggle(o),this.loading2=!1):(this.loading2=!1,this.toastr.error("Please login again.","Login session expired!"),this.authSrv.logout()):(this.loading2=!1,this.toastr.error(a.message))}).catch(a=>{this.toastr.error(a),this.loading2=!1})}}getLocationUnitQuantity(e,o){const i={};return(o=o.sort((s,a)=>a.unit_quantity-s.unit_quantity)).forEach(s=>{if(e>0){const a=Math.floor(e/s.unit_quantity);i[s.unit_name]=a,e-=a*s.unit_quantity}else i[s.unit_name]=0}),i}downloadReport(){this.spinner.show("transactions");let e=[];this.filteredSupplierTransactions.forEach(o=>{const i={};i.balance_bf=o.opening_balance,i.transaction_type=(0,g._)(o.transaction_type),i.amount=this._decimalPipe.transform(parseFloat(o.amount.toString()).toFixed(2),"1.2-2"),i.invoice_number=o.invoice_number,i.payment_channel=o.payment_channel,i.closing_balance=this._decimalPipe.transform(parseFloat(o.closing_balance.toString()).toFixed(2),"1.2-2"),i.transaction_date=o.date_created,i.posted_by=(0,g._)(o.added_by),i.paid_to=o.paid_to,e.push(i)}),this.downloadExcelFile(e,"Transaction history for debtor -  "+this.debtorToView.name)}downloadReportAll(){this.spinner.show("transactions");let e=[];this.filteredSupplierTransactions.forEach(o=>{const i={};i.balance_bf=o.opening_balance,i.transaction_type=(0,g._)(o.transaction_type),i.supplier=(0,g._)(o.supplier),i.amount=this._decimalPipe.transform(parseFloat(o.amount.toString()).toFixed(2),"1.2-2"),i.invoice_number=o.invoice_number,i.payment_channel=o.payment_channel,i.closing_balance=this._decimalPipe.transform(parseFloat(o.closing_balance.toString()).toFixed(2),"1.2-2"),i.transaction_date=o.date_created,i.posted_by=(0,g._)(o.added_by),i.paid_to=o.paid_to,e.push(i)}),this.downloadExcelFile(e,"Supply and payments transactions history")}downloadExcelFile(e,o){var i=this;return(0,d.Z)(function*(){const s=new Q.Workbook,a=s.addWorksheet("Sheet1"),p=Object.keys(e[0]).map(f=>(0,g._)(f.split("_").join(" ")));a.addRow(p).eachCell(f=>{f.font={bold:!0}}),e.forEach(f=>{a.addRow(Object.values(f))}),yield a.protect("1234",{}),s.xlsx.writeBuffer().then(f=>{const E=new Blob([f],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});(0,L.saveAs)(E,o+".xlsx")}),i.spinner.hide("transactions")})()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(S.t2),t.Y36(H.$),t.Y36(V._W),t.Y36(G.e),t.Y36(Y.s),t.Y36(u.JJ),t.Y36(K.F),t.Y36(t.sBO),t.Y36(D.YP))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-debtors"]],viewQuery:function(e,o){if(1&e&&(t.Gf(rt,7),t.Gf(at,5)),2&e){let i;t.iGM(i=t.CRH())&&(o.screen=i.first),t.iGM(i=t.CRH())&&(o.overlay=i.first)}},hostBindings:function(e,o){1&e&&t.NdJ("resize",function(s){return o.onResize(s)},!1,t.Jf7)},decls:135,vars:191,consts:[[1,"row"],["class","col-md-12 col-12 pl-0 ml-0",4,"ngIf"],["appendTo","body","modal","true","header","Select statement period",3,"closable","visible","style","baseZIndex","visibleChange",4,"ngIf"],["appendTo","body","modal","true",3,"header","closable","visible","style","baseZIndex","visibleChange",4,"ngIf"],["appendTo","body","modal","true",3,"header","closable","visible","baseZIndex","visibleChange","onHide"],["styleClass","p-datatable-customers","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"value","rowHover","rows","showCurrentPageReport","rowsPerPageOptions","loading","paginator","filterDelay","globalFilterFields"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["bdOpacity","#fff","bdColor","rgba(255,255,255,0.76)","size","medium","name","date","color","#02926e","type","ball-clip-rotate",3,"fullScreen"],[2,"color","#02926e"],["styleClass","p-datatable-customers","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"value","rowHover","rows","showCurrentPageReport","rowsPerPageOptions","paginator","filterDelay","globalFilterFields"],["dt12",""],["styleClass","p-datatable-customers","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"value","rowHover","rows","showCurrentPageReport","rowsPerPageOptions","paginator","filterDelay","globalFilterFields",4,"ngIf"],["bdOpacity","#fff","name","sell","bdColor","rgba(255,255,255,0.76)","size","medium","color","#02926e","type","ball-clip-rotate",3,"fullScreen"],["bdOpacity","#fff","name","payment","bdColor","rgba(255,255,255,0.76)","size","medium","color","#02926e","type","ball-clip-rotate",3,"fullScreen"],["appendTo","body","modal","true",3,"header","closable","visible","baseZIndex","visibleChange"],["autocomplete","off",3,"ngSubmit",4,"ngIf"],[3,"message","showNotification",4,"ngIf"],["bdOpacity","#fff","name","newcustomer","bdColor","rgba(255,255,255,0.76)","size","medium","color","#02926e","type","ball-clip-rotate",3,"fullScreen"],["appendTo","body","modal","true","header","Total debtors amount",3,"closable","visible","baseZIndex","visibleChange"],[1,"row","m-0","p-0",2,"background","#F7F7F8"],[1,"col-md-12"],[1,"card"],[1,"card-content"],[1,"card-body"],[1,"media"],[1,"media-body"],[2,"margin-bottom","0.99rem"],[1,"card-text","font-large-1"],["appendTo","body","modal","true","id","inv",3,"header","closable","visible","baseZIndex","visibleChange","onHide"],["inv",""],["class","row",4,"ngIf"],["styleClass","p-datatable-customers","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"value","rowHover","rows","showCurrentPageReport","rowsPerPageOptions","loading","paginator","filterDelay","globalFilterFields","responsive"],["dt99",""],["pTemplate","caption"],["table1",""],["bdOpacity","#fff","name","invoices","bdColor","rgba(255,255,255,0.76)","size","medium","color","#02926e","type","ball-clip-rotate",3,"fullScreen"],["appendTo","body","modal","true","header","Edit invoice",3,"closable","visible","style","baseZIndex","visibleChange",4,"ngIf"],["bdOpacity","#fff","name","invoice","bdColor","rgba(255,255,255,0.76)","size","medium","color","#02926e","type","ball-clip-rotate",3,"fullScreen"],["appendTo","body","modal","true","header","Invoice document",3,"closable","visible","style","baseZIndex","visibleChange",4,"ngIf"],["styleClass","p-datatable-customers","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"value","rowHover","rows","showCurrentPageReport","rowsPerPageOptions","loading","paginator","filterDelay","globalFilterFields","onFilter"],["dt89",""],[1,"row","px-2"],[1,"col-3"],[1,"card","card-inverse","bg-secondary"],[1,"media-body","text-center"],[1,"card-text"],["bdOpacity","#fff","bdColor","rgba(255,255,255,0.76)","size","medium","name","transactions","color","#02926e","type","ball-clip-rotate",3,"fullScreen"],[3,"showCloseIcon"],["op",""],["pTemplate",""],["bdOpacity","#fff","bdColor","rgba(255,255,255,0.76)","size","medium","color","#02926e","type","ball-clip-rotate",3,"fullScreen"],["header","Confirm","icon","pi pi-exclamation-triangle","appendTo","body",3,"baseZIndex","closable"],[1,"col-md-12","col-12","pl-0","ml-0"],[1,"card","pl-0","ml-0"],[1,"card-header","pb-0"],[1,"card-title"],["label","Add a new debtor","icon","pi pi-plus","styleClass","float-right p-button-raised p-button-success p-button-sm",3,"click",4,"ngIf"],["icon","pi pi-eye","label","Show total debtors balance","styleClass","float-right p-button-raised p-button-info p-button-sm mr-5",3,"click",4,"ngIf"],[1,"card-body","pl-0","ml-0","pr-0","mr-0"],["label","Add a new debtor","icon","pi pi-plus","styleClass","float-right p-button-raised p-button-success p-button-sm",3,"click"],["icon","pi pi-eye","label","Show total debtors balance","styleClass","float-right p-button-raised p-button-info p-button-sm mr-5",3,"click"],[1,"ui-selectable-row"],["pSortableColumn","name",2,"width","15rem"],[2,"width","20rem"],["colspan","7"],["pInputText","","type","text","placeholder","Search name...",1,"ui-column-filter",3,"input"],[2,"word-wrap","normal"],["tooltipPosition","top","class","text-success",3,"pTooltip",4,"ngIf"],["tooltipPosition","top","class","success",3,"pTooltip",4,"ngIf"],["tooltipPosition","top",3,"pTooltip",4,"ngIf"],["tooltipPosition","top",3,"pTooltip"],["ngbDropdown","","container","body","placement","bottom-start",1,"d-inline-block"],["type","button","pButton","","id","dropdownBasic1","ngbDropdownToggle","",1,"p-button-primary","p-button-outlined"],["ngbDropdownMenu","","aria-labelledby","dropdownBasic1",1,"dropdown-menu",2,"right","auto !important","left","0 !important"],["ngbDropdownItem","",3,"click"],[1,"pi","pi-list","mr-2"],["ngbDropdownItem","",3,"click",4,"ngIf"],[1,"fas","fa-file-invoice","mr-2"],["tooltipPosition","top",1,"text-success",3,"pTooltip"],["tooltipPosition","top",1,"success",3,"pTooltip"],[1,"fas","fa-check"],[1,"pi","pi-file","mr-2"],[1,"pi","pi-plus","mr-2"],[1,"pi","pi-money-bill","mr-2"],[1,"pi","pi-pencil","mr-2"],[1,"far","fa-comments","mr-2"],[1,"pi","pi-trash","mr-2"],["colspan","7",2,"text-align","center"],["appendTo","body","modal","true","header","Select statement period",3,"closable","visible","baseZIndex","visibleChange"],["autocomplete","off",3,"ngSubmit"],["form4","ngForm"],[1,"ui-fluid","px-2"],[1,"p-field"],["for","firstname3"],["appendTo","body","name","start_date","required","","readonlyInput","true",3,"ngModel","maxDate","monthNavigator","ngModelChange"],["appendTo","body","name","end_date","required","",3,"ngModel","monthNavigator","minDate","maxDate","readonlyInput","ngModelChange"],["id","firstname3-help","class","p-error",4,"ngIf"],[1,"mt-2"],["type","button","pButton","","icon","pi pi-times","label","Cancel","styleClass","p-button-sm",1,"p-button-danger","p-button-sm","float-right","small",3,"click"],["type","submit","pButton","","icon","pi pi-check","label","Download","styleClass","p-button-sm","class","p-button-success p-button-sm small",4,"ngIf"],["id","firstname3-help",1,"p-error"],["type","submit","pButton","","icon","pi pi-check","label","Download","styleClass","p-button-sm",1,"p-button-success","p-button-sm","small"],["bdOpacity","#fff","name","new","bdColor","rgba(255,255,255,0.76)","size","medium","color","#02926e","type","ball-clip-rotate",3,"fullScreen"],["form2","ngForm"],[1,"ui-fluid","py-2"],[1,"p-field","py-2"],["id","cash","name","amount","required","","min","0","type","number","pInputNumber","",1,"form-control",3,"ngModel","ngModelChange"],[1,"p-field","pb-2"],[1,"field-radiobutton"],["name","city","value","cash","inputId","city1",3,"ngModel","ngModelChange"],["for","city1",1,"primary"],[1,"fas","fa-money-bill"],["name","city","value","mpesa","inputId","city2",3,"ngModel","ngModelChange"],["for","city2",1,"success"],[1,"fas","fa-mobile-alt"],["name","city","value","bank","inputId","city3",3,"ngModel","ngModelChange"],["for","city3",1,"info"],[1,"fas","fa-money-check","info"],["type","button","pButton","","icon","pi pi-times","label","Close",1,"p-button-sm","p-button-danger","float-right",3,"click"],["type","submit","pButton","","icon","pi pi-check","label","Save",1,"p-button-success","p-button-sm","mr-3","float-right",3,"disabled"],[3,"message","showNotification"],["colspan","4"],["appendTo","body","name","start_date","required","","placeholder","Search date..","readonlyInput","true",3,"ngModel","maxDate","touchUI","monthNavigator","ngModelChange","onSelect"],["pButton","","type","button","icon","pi pi-list","label","Show sales",1,"p-button-sm","p-button-outlined","p-button-info",3,"click"],["colspan","5"],["pInputText","","type","text","placeholder","Search ...",1,"ui-column-filter",3,"input"],["label","Show receipt items","icon","pi pi-list","iconPos","right","styleClass","p-button-success p-button-outlined p-button-sm",3,"onClick"],["pSortableColumn","name",2,"width","10rem"],["field","name"],[2,"width","10rem"],["colspan","6"],["pInputText","","type","text","placeholder","Search item...",1,"ui-column-filter",3,"input"],["shape","circle"],["pButton","","type","button","class","p-button-outlined p-button-sm p-button-danger float-right","icon","pi pi-trash","label","Delete payment",3,"click",4,"ngIf"],["pButton","","type","button","icon","pi pi-trash","label","Delete payment",1,"p-button-outlined","p-button-sm","p-button-danger","float-right",3,"click"],["colspan","9",2,"text-align","center"],["bdOpacity","#fff","name","limit","bdColor","rgba(255,255,255,0.76)","size","medium","color","#02926e","type","ball-clip-rotate",3,"fullScreen"],[1,"ui-fluid"],[1,"p-field","py-3"],["type","button","pButton","","icon","pi pi-times","label","Close",1,"ui-button-danger","p-button-danger","float-right",3,"click"],["type","submit","pButton","","icon","pi pi-check","label","Save",1,"p-button-success","mr-3","float-right",3,"disabled"],["form3","ngForm"],["for","cname",2,"text-transform","none"],["id","cname","name","name","type","username","required","","aria-describedby","cname-help","pInputText","",1,"form-control",3,"ngModel","ngModelChange"],[1,"ui-fluid","py-3"],["for","mobile",2,"text-transform","none"],["id","mobile","type","number","name","mobile","required","","aria-describedby","mobile-help","pInputNumber","",1,"form-control",3,"ngModel","ngModelChange"],["mobileCtrl","ngModel"],["class","danger","style","text-transform: none; font-style: itallic; font-size: 12px",4,"ngIf"],[1,"p-field","pb-3"],["type","button","pButton","","icon","pi pi-times","label","Close","styleClass","p-button-sm",1,"p-button-danger","float-right","small",3,"click"],["type","submit","pButton","","icon","pi pi-check","label","Save","styleClass","p-button-sm",1,"p-button-success","small","ml-3",3,"disabled"],[1,"danger",2,"text-transform","none","font-style","itallic","font-size","12px"],[1,"col-md-12","text-right"],["pButton","","type","button","icon","pi pi-plus","label","Create new invoice","pTooltip","Click to create a new invoice","tooltipPosition","top",1,"p-button-raised","p-button-success","p-button-sm","mb-1",3,"click"],[1,"table-header"],[1,"p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Search...",3,"input"],[2,"width","15rem"],["v",""],["{{item.number}}",""],[1,"fas","fa-edit","mr-2"],[1,"fas","fa-file-download","mr-2"],["colspan","6",2,"text-align","center"],["appendTo","body","modal","true","header","Edit invoice",3,"closable","visible","baseZIndex","visibleChange"],[1,"ui-fluid","px-2","py-1"],["for","title",2,"text-transform","none"],["id","title","name","title","type","username","required","","aria-describedby","title-help","pInputText","",1,"form-control",3,"ngModel","ngModelChange"],["id","cname","name","cname","type","username","required","","aria-describedby","cname-help","pInputText","",1,"form-control",3,"ngModel","ngModelChange"],[1,"ui-fluid","px-2","pb-4","pt-1"],["for","start_date",2,"text-transform","none"],["name","start_date","appendTo","body","required","","readonlyInput","true",3,"ngModel","baseZIndex","monthNavigator","ngModelChange"],["type","button","pButton","","icon","pi pi-times","label","Cancel","styleClass","p-button-sm",1,"p-button-danger","float-right","small",3,"click"],["type","submit","pButton","","icon","pi pi-check","label","Update","styleClass","p-button-sm",1,"p-button-success","small",3,"disabled"],["bdOpacity","#fff","name","editinvoice","bdColor","rgba(255,255,255,0.76)","size","medium","color","#02926e","type","ball-clip-rotate",3,"fullScreen"],[1,"col-md-6","col-12","pl-0","ml-0"],[1,"card-header"],[1,"card-title","mb-4"],[1,"card-body","p-0","m-0"],["dt1",""],[1,"col-md-6","col-12","pl-0","ml-0","pr-0","mr-0"],[1,"card","pl-0","ml-0","pr-0","mr-0"],["dt9",""],["bdOpacity","#fff","name","deleteitem","bdColor","rgba(255,255,255,0.76)","size","medium","color","#02926e","type","ball-clip-rotate",3,"fullScreen"],["bdOpacity","#fff","name","invoiceitems","bdColor","rgba(255,255,255,0.76)","size","medium","color","#02926e","type","ball-clip-rotate",3,"fullScreen"],["pSortableColumn","category.name",2,"width","10rem"],["field","category.name"],["pInputText","","type","text","placeholder","Search item name",1,"ui-column-filter",3,"input"],["appendTo","body","placeholder","All","styleClass","ui-column-filter","optionLabel","name",3,"options","onChange"],["pTemplate","item"],[1,"ui-multiselect-representative-option",2,"display","grid"],[3,"click",4,"ngIf"],["class","animate-flicker warning",4,"ngIf"],["label","Select","icon","pi pi-arrow-right","iconPos","right","styleClass","p-button-primary p-button-outlined p-button-sm",3,"loading","onClick",4,"ngIf"],[3,"click"],["label","","shape","circle",3,"style",4,"ngFor","ngForOf"],["label","","shape","circle"],[1,"animate-flicker","warning"],["label","Select","icon","pi pi-arrow-right","iconPos","right","styleClass","p-button-primary p-button-outlined p-button-sm",3,"loading","onClick"],["pInputText","","type","text","placeholder","Search by name",1,"ui-column-filter",3,"input"],[2,"padding","0.1rem 1rem"],["pButton","","type","button","icon","pi pi-trash","pTooltip","Click to delete item","tooltipPosition","top",1,"p-button-raised","p-button-sm","p-button-danger",3,"click"],["colspan","5",2,"text-align","center"],["for","unit"],["placeholder","Select item unit","name","unit","appendTo","body","optionLabel","unit_name","filter","true",3,"options","ngModel","onChange","ngModelChange"],["pTemplate","selectedItem"],["for","unitq"],["id","unitq","name","unit_quantity","required","","type","number","pattern","[0-9]+","pInputNumber","",1,"form-control",3,"disabled","ngModel","input","ngModelChange"],["id","unitq-help","class","p-error block",4,"ngIf"],["id","unitsp","name","unit_price","required","","type","number","pInputNumber","",1,"form-control",3,"disabled","ngModel","input","ngModelChange"],["id","disc-help","class","p-error block animate-flicker",4,"ngIf"],["for","totalp"],["id","totalp","name","total_price","required","","type","text","pInputText","",1,"form-control",3,"disabled","value"],["type","button","pButton","","icon","pi pi-times","label","Cancel",1,"p-button-danger","p-button-sm","float-right",3,"click"],["type","submit","pButton","","icon","pi pi-check","label","Add to list",1,"p-button-success","p-button-sm","mr-3","float-right",3,"disabled"],[1,"ui-helper-clearfix"],["id","unitq-help",1,"p-error","block"],["id","disc-help",1,"p-error","block","animate-flicker"],["id","title","name","title","type","username","required","","aria-describedby","cname-help","pInputText","",1,"form-control",3,"ngModel","ngModelChange"],["for","firstname3",2,"text-transform","none"],["appendTo","body","name","start_date","required","","readonlyInput","true",3,"ngModel","baseZIndex","monthNavigator","ngModelChange"],["type","submit","pButton","","icon","pi pi-check","label","Save","styleClass","p-button-sm",1,"p-button-success","small",3,"disabled"],["appendTo","body","modal","true","header","Invoice document",3,"closable","visible","baseZIndex","visibleChange"],[1,"px-2","py-2",2,"background","#F7F7F8"],["id","pdfTable",1,"card",2,"box-shadow","unset !important"],["pdfTable",""],[1,"card-content","p-3"],["id","invoice-template",1,"card-body","pb-0"],["id","invoice-company-details",1,"row"],[1,"col-md-6","col-12"],["src","assets/img/company.png","alt","company logo",2,"width","150px","height","70px"],[1,"media-body","ml-4"],[1,"m-0","list-unstyled"],[2,"font-size","16px","font-weight","510"],[1,"col-md-6","col-12","text-right"],[1,"primary"],[1,"pb-3"],[1,"px-0","list-unstyled"],[1,"font-medium-2","text-bold-700"],["id","invoice-customer-details",1,"row"],[1,"col-12","text-left"],[1,"text-muted","mb-1"],[1,"text-bold-800"],[1,"text-muted"],["id","invoice-items-details"],[1,"row","mt-2"],["styleClass","p-datatable-gridlines","responsiveLayout","scroll","dataKey","order_number",3,"value"],["class","row mt-3",4,"ngIf"],["id","pdfTableDelivery",1,"card",2,"box-shadow","unset !important"],["pdfTableDelivery",""],[1,"info"],["mode","indeterminate",3,"style",4,"ngIf"],["class","mt-2 text-center animate-flicker",4,"ngIf"],["type","button","pButton","","icon","fas fa-file-download","label","Download invoice","class","p-button-primary p-button-sm p-button-raised mt-3 mr-5 float-left",3,"disabled","click",4,"ngIf"],["type","button","pButton","","icon","fas fa-file-download","label","Download delivery note","class","p-button-info mt-3 p-button-raised p-button-sm mr-5 float-left",3,"disabled","click",4,"ngIf"],["type","button","pButton","","icon","pi pi-times","label","Close",1,"p-button-danger","p-button-sm","float-right","mt-3","ml-5",3,"click"],["bdOpacity","#fff","name","report","bdColor","rgba(255,255,255,0.76)","size","medium","color","#02926e","type","ball-clip-rotate",3,"fullScreen"],[1,"text-center"],[1,"row","mt-3"],[1,"col-md-6","col-12","pr-0"],[1,"text-bold-700","mb-1","mt-3"],[1,"p-0","pl-2"],[1,"small"],[1,"text-bold-700","mb-1","mt-1"],[1,"m-0","p-0","list-unstyled"],[4,"ngFor","ngForOf"],[1,"text-bold-700","mb-2","mt-3","ml-4"],[1,"table-responsive"],["styleClass","p-datatable-gridlines","responsiveLayout","scroll",1,"table","table-bordered"],[1,"text-right",2,"padding-right","13px"],[1,"text-bold-500"],[1,"text-bold-700"],[1,"text-right","text-bold-700",2,"padding-right","13px"],[1,"col-md-12","col-12"],[1,"col-md-12","col-12","pr-0","pb-1"],[1,"col-md-4"],[1,"text-bold-700","mb-1","mt-2"],[1,"horizontal-line"],["mode","indeterminate"],[1,"mt-2","text-center","animate-flicker"],["type","button","pButton","","icon","fas fa-file-download","label","Download invoice",1,"p-button-primary","p-button-sm","p-button-raised","mt-3","mr-5","float-left",3,"disabled","click"],["type","button","pButton","","icon","fas fa-file-download","label","Download delivery note",1,"p-button-info","mt-3","p-button-raised","p-button-sm","mr-5","float-left",3,"disabled","click"],["for","des"],["name","purpose","id","des","pInputTextarea","",1,"form-control",3,"ngModel","ngModelChange"],["type","submit","pButton","","icon","pi pi-check","label","Send",1,"p-button-success","p-button-sm","float-right",3,"disabled"],["type","button","pButton","","icon","pi pi-times","label","Cancel",1,"ui-button-danger","p-button-danger","mr-3","p-button-sm","float-right",3,"click"],[1,"flex","justify-content-center","align-items-center"],["type","date","field","date_created","display","menu"],["colspan","8"],["pInputText","","type","text","placeholder","Search...",1,"ui-column-filter",3,"input"],["pButton","","label","Clear filter","icon","pi pi-filter-slash",1,"p-button-outlined","p-button-sm","float-right","mr-5",3,"click"],["pButton","","label","Download Excel","class","p-button-outlined p-button-success p-button-sm float-right mr-5","icon","pi pi-download",3,"click",4,"ngIf"],["pButton","","label","Download Excel","icon","pi pi-download",1,"p-button-outlined","p-button-success","p-button-sm","float-right","mr-5",3,"click"],["colspan","8",2,"text-align","center"],["selectionMode","single","responsiveLayout","scroll",3,"value","paginator","rows"],[1,"p-o","m-0"]],template:function(e,o){if(1&e){const i=t.EpF();t.TgZ(0,"div",0),t.YNc(1,yt,14,14,"div",1),t.qZA(),t.YNc(2,St,4,8,"p-dialog",2),t.YNc(3,Ut,6,12,"p-dialog",3),t.TgZ(4,"p-dialog",4),t.NdJ("visibleChange",function(a){return o.showDebtorSales=a})("onHide",function(){return o.showDebtorSales=!1,o.ngOnInit()}),t.ALo(5,"titlecase"),t.TgZ(6,"p-table",5,6),t.YNc(8,It,11,4,"ng-template",7),t.YNc(9,Nt,12,11,"ng-template",8),t.YNc(10,Jt,3,0,"ng-template",9),t.qZA(),t.TgZ(11,"ngx-spinner",10),t._UZ(12,"p",11),t.qZA()(),t.TgZ(13,"p-dialog",4),t.NdJ("visibleChange",function(a){return o.showDebtorDateTransactions=a})("onHide",function(){return o.showDebtorDateTransactions=!1}),t.ALo(14,"date"),t.TgZ(15,"p-table",12,13),t.YNc(17,kt,13,0,"ng-template",7),t.YNc(18,Pt,14,12,"ng-template",8),t.qZA()(),t.TgZ(19,"p-dialog",4),t.NdJ("visibleChange",function(a){return o.displayItemsDialog=a})("onHide",function(){return o.displayItemsDialog=!1}),t.YNc(20,Lt,4,10,"p-table",14),t.TgZ(21,"ngx-spinner",15),t._UZ(22,"p",11),t.qZA()(),t.TgZ(23,"p-dialog",4),t.NdJ("visibleChange",function(a){return o.showDebtorPayments=a})("onHide",function(){return o.showDebtorPayments=!1,o.ngOnInit()}),t.ALo(24,"titlecase"),t.TgZ(25,"p-table",5,6),t.YNc(27,Ht,16,0,"ng-template",7),t.YNc(28,Gt,25,27,"ng-template",8),t.YNc(29,Yt,3,0,"ng-template",9),t.qZA(),t.TgZ(30,"ngx-spinner",16),t._UZ(31,"p",11),t.qZA()(),t.YNc(32,Ot,6,12,"p-dialog",3),t.TgZ(33,"p-dialog",17),t.NdJ("visibleChange",function(a){return o.displayCustomerForm=a}),t.YNc(34,Rt,27,6,"form",18),t.YNc(35,$t,1,2,"app-notification",19),t.TgZ(36,"ngx-spinner",20),t._UZ(37,"p",11),t.qZA()(),t.TgZ(38,"p-dialog",21),t.NdJ("visibleChange",function(a){return o.showTotal=a}),t.TgZ(39,"div",22)(40,"div",23)(41,"div",24)(42,"div",25)(43,"div",26)(44,"div",27)(45,"div",28)(46,"p",29),t._uU(47,"Ksh"),t.qZA(),t.TgZ(48,"h6",30),t._uU(49),t.ALo(50,"number"),t.qZA()()()()()()()()(),t.TgZ(51,"p-dialog",31,32),t.NdJ("visibleChange",function(a){return o.showInvoicesDialog=a})("onHide",function(){return o.ngOnInit()}),t.ALo(53,"titlecase"),t.YNc(54,zt,3,0,"div",33),t.TgZ(55,"p-table",34,35),t.YNc(57,Wt,5,0,"ng-template",36),t.YNc(58,Xt,12,0,"ng-template",7),t.YNc(59,oe,30,16,"ng-template",8,37,t.W1O),t.YNc(61,ie,3,0,"ng-template",9),t.qZA(),t.TgZ(62,"ngx-spinner",38),t._UZ(63,"p",11),t.qZA()(),t.YNc(64,ne,28,13,"p-dialog",39),t.TgZ(65,"p-dialog",4),t.NdJ("visibleChange",function(a){return o.showInvoiceItems=a})("onHide",function(){return o.showCustomerInvoicesDialog(o.debtorToView)}),t.YNc(66,be,27,25,"div",33),t.qZA(),t.YNc(67,we,4,9,"p-dialog",3),t.TgZ(68,"p-dialog",17),t.NdJ("visibleChange",function(a){return o.showInvoiceForm=a}),t.ALo(69,"titlecase"),t.YNc(70,Ce,25,6,"form",18),t.TgZ(71,"ngx-spinner",40),t._UZ(72,"p",11),t.qZA()(),t.YNc(73,Le,111,43,"p-dialog",41),t.YNc(74,Ve,25,14,"p-dialog",3),t.TgZ(75,"p-dialog",4),t.NdJ("visibleChange",function(a){return o.showSupplierTransactions=a})("onHide",function(){t.CHM(i);const a=t.MAs(78);return o.showSupplierTransactions=!1,a.reset(),o.resetSupplierTransactions(),o.ngOnInit(),t.KtG(o.supplierTransactions=[])}),t.ALo(76,"titlecase"),t.TgZ(77,"p-table",42,43),t.NdJ("onFilter",function(a){return o.filterSupplierTransactions(a)}),t.YNc(79,Ye,24,1,"ng-template",7),t.YNc(80,Ke,25,29,"ng-template",8),t.YNc(81,je,3,0,"ng-template",9),t.qZA(),t.TgZ(82,"div",44)(83,"div",45)(84,"div",46)(85,"div",25)(86,"div",26)(87,"div",27)(88,"div",47)(89,"p",29),t._uU(90,"Opening balance"),t.qZA(),t.TgZ(91,"h5",48),t._uU(92),t.ALo(93,"number"),t.qZA()()()()()()(),t.TgZ(94,"div",45)(95,"div",46)(96,"div",25)(97,"div",26)(98,"div",27)(99,"div",47)(100,"p",29),t._uU(101,"Amount supplied"),t.qZA(),t.TgZ(102,"h5",48),t._uU(103),t.ALo(104,"number"),t.qZA()()()()()()(),t.TgZ(105,"div",45)(106,"div",46)(107,"div",25)(108,"div",26)(109,"div",27)(110,"div",47)(111,"p",29),t._uU(112,"Amount paid"),t.qZA(),t.TgZ(113,"h5",48),t._uU(114),t.ALo(115,"number"),t.qZA()()()()()()(),t.TgZ(116,"div",45)(117,"div",46)(118,"div",25)(119,"div",26)(120,"div",27)(121,"div",47)(122,"p",29),t._uU(123,"Closing balance"),t.qZA(),t.TgZ(124,"h5",48),t._uU(125),t.ALo(126,"number"),t.qZA()()()()()()()(),t.TgZ(127,"ngx-spinner",49),t._UZ(128,"p",11),t.qZA()(),t.TgZ(129,"p-overlayPanel",50,51),t.YNc(131,We,3,3,"ng-template",52),t.qZA(),t.TgZ(132,"ngx-spinner",53),t._UZ(133,"p",11),t.qZA(),t._UZ(134,"p-confirmDialog",54)}2&e&&(t.xp6(1),t.Q6J("ngIf",!o.loading),t.xp6(1),t.Q6J("ngIf",o.showStatementsForm),t.xp6(1),t.Q6J("ngIf",o.showPaymentModal),t.xp6(1),t.Akn(t.DdM(169,Xe)),t.Q6J("header",o.showDebtorSales?"Sales for "+t.lcZ(5,142,o.debtorToView.name):"")("closable",!0)("visible",o.showDebtorSales)("baseZIndex",1e4),t.xp6(2),t.Q6J("value",o.debtorSalesTransactions)("rowHover",!0)("rows",10)("showCurrentPageReport",!0)("rowsPerPageOptions",t.DdM(170,b))("loading",o.loading)("paginator",!0)("filterDelay",0)("globalFilterFields",t.DdM(171,J)),t.xp6(5),t.Q6J("fullScreen",!0),t.xp6(2),t.Akn(t.DdM(172,k)),t.Q6J("header",o.showDebtorDateTransactions?"Transactions for the date: "+t.lcZ(14,144,o.dateToView):"")("closable",!0)("visible",o.showDebtorDateTransactions)("closable",!0)("baseZIndex",1e4),t.xp6(2),t.Q6J("value",o.debtorDateSales)("rowHover",!0)("rows",10)("showCurrentPageReport",!0)("rowsPerPageOptions",t.DdM(173,b))("paginator",!0)("filterDelay",0)("globalFilterFields",t.DdM(174,to)),t.xp6(4),t.Akn(t.DdM(175,eo)),t.Q6J("header",o.displayItemsDialog?"Items for receipt no: "+o.receiptToView.transaction_code:"")("closable",!0)("visible",o.displayItemsDialog)("closable",!0)("baseZIndex",1e4),t.xp6(1),t.Q6J("ngIf",o.displayItemsDialog),t.xp6(1),t.Q6J("fullScreen",!1),t.xp6(2),t.Akn(t.DdM(176,k)),t.Q6J("header",o.showDebtorPayments?"Payments made by "+t.lcZ(24,146,o.debtorToView.name):"")("closable",!0)("visible",o.showDebtorPayments)("baseZIndex",1e4),t.xp6(2),t.Q6J("value",o.debtorPayments)("rowHover",!0)("rows",10)("showCurrentPageReport",!0)("rowsPerPageOptions",t.DdM(177,b))("loading",o.loading)("paginator",!0)("filterDelay",0)("globalFilterFields",t.DdM(178,J)),t.xp6(5),t.Q6J("fullScreen",!1),t.xp6(2),t.Q6J("ngIf",o.displayLimitForm),t.xp6(1),t.Akn(t.DdM(179,v)),t.Q6J("header",o.showNotification?"":"New debtor")("closable",!1)("visible",o.displayCustomerForm)("baseZIndex",1e4),t.xp6(1),t.Q6J("ngIf",!o.showNotification),t.xp6(1),t.Q6J("ngIf",o.showNotification),t.xp6(1),t.Q6J("fullScreen",!1),t.xp6(2),t.Akn(t.DdM(180,M)),t.Q6J("closable",!0)("visible",o.showTotal)("baseZIndex",1e4),t.xp6(3),t.Q6J("@enter",void 0),t.xp6(8),t.Oqu(t.xi3(50,148,o.totalOwed,".2")),t.xp6(2),t.Akn(t.DdM(181,oo)),t.Q6J("header",o.showInvoicesDialog?"Invoices for: "+t.lcZ(53,151,o.debtorToView.name):"")("closable",!0)("visible",o.showInvoicesDialog)("baseZIndex",1e4),t.xp6(3),t.Q6J("ngIf",o.showInvoicesDialog),t.xp6(1),t.Q6J("value",o.customerInvoices)("rowHover",!0)("rows",10)("showCurrentPageReport",!0)("rowsPerPageOptions",t.DdM(182,b))("loading",o.loading)("paginator",!0)("filterDelay",0)("globalFilterFields",t.DdM(183,io))("responsive",!0),t.xp6(7),t.Q6J("fullScreen",!1),t.xp6(2),t.Q6J("ngIf",o.displayEditInvoiceDialog),t.xp6(1),t.Akn(t.DdM(184,P)),t.Q6J("header",o.showInvoiceItems?"Invoice number: "+o.invoiceToView.number:"")("closable",!0)("visible",o.showInvoiceItems)("baseZIndex",1e4),t.xp6(1),t.Q6J("ngIf",o.showInvoiceItems),t.xp6(1),t.Q6J("ngIf",o.displaySellDialog),t.xp6(1),t.Akn(t.DdM(185,I)),t.Q6J("header",o.showInvoiceForm?"New invoice for "+t.lcZ(69,153,o.debtorToView.name):"")("closable",!1)("visible",o.showInvoiceForm)("baseZIndex",1e4),t.xp6(2),t.Q6J("ngIf",o.showInvoiceForm),t.xp6(1),t.Q6J("fullScreen",!1),t.xp6(2),t.Q6J("ngIf",o.displayReportDialog),t.xp6(1),t.Q6J("ngIf",o.displaySmsDialog),t.xp6(1),t.Akn(t.DdM(186,P)),t.Q6J("header",o.showSupplierTransactions?"All transactions for "+t.lcZ(76,155,o.debtorToView.name):"")("closable",!0)("visible",o.showSupplierTransactions)("baseZIndex",1e4),t.xp6(2),t.Q6J("value",o.supplierTransactions)("rowHover",!0)("rows",10)("showCurrentPageReport",!0)("rowsPerPageOptions",t.DdM(187,b))("loading",o.loading)("paginator",!0)("filterDelay",0)("globalFilterFields",t.DdM(188,no)),t.xp6(15),t.hij("Ksh ",t.xi3(93,157,o.openingBalance,".2"),""),t.xp6(11),t.hij("Ksh ",t.xi3(104,160,o.amountSupplied,".2"),""),t.xp6(11),t.hij("Ksh ",t.xi3(115,163,o.amountPaid,".2"),""),t.xp6(11),t.hij("Ksh ",t.xi3(126,166,o.closingBalance,".2"),""),t.xp6(2),t.Q6J("fullScreen",!1),t.xp6(2),t.Akn(t.DdM(189,so)),t.Q6J("@enter",void 0)("showCloseIcon",!1),t.xp6(3),t.Q6J("fullScreen",!0),t.xp6(2),t.Akn(t.DdM(190,v)),t.Q6J("baseZIndex",1e4)("closable",!1))},dependencies:[u.sg,u.O5,S.Ro,h._Y,h.Fj,h.wV,h.JJ,h.JL,h.Q7,h.c5,h.qQ,h.On,h.F,j.V,D.$_,D.jx,O.Q,q.Hq,q.zx,x.iA,x.lQ,x.fz,x.xl,B.NU,R.o,$.k,z.Lt,W.u,y.jt,y.iD,y.Vi,y.TH,X.T,tt.H,et.q,ot.EU,it.f,nt.g,st.c,u.JJ,u.rS,u.uU],styles:["label[_ngcontent-%COMP%]{text-transform:none}.dropdown[_ngcontent-%COMP%]{z-index:20000!important}[_nghost-%COMP%]     p-colorpicker .p-colorpicker .p-colorpicker-preview{border-radius:30px}[_nghost-%COMP%]     p-dialog .p-dialog-header{border-radius:30px!important}[_nghost-%COMP%]     .p-dialog .p-dialog-footer{border-bottom-right-radius:30px}.qr_code[_ngcontent-%COMP%]{display:flex;flex-direction:column-reverse}"],data:{animation:[(0,m.X$)("enter",[(0,m.eR)("void => *",[(0,m.oB)({opacity:0}),(0,m.jt)(1e3,(0,m.oB)({opacity:1}))])])]}}),n})(),data:{title:"Expenses"}}];let ao=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[_.Bz.forChild(ro),_.Bz]}),n})();var lo=l(4397);let co=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[ao,lo.U]}),n})()},3942:(F,Z,l)=>{l.d(Z,{c:()=>d});var _=l(4650);let d=(()=>{class m{constructor(){}ngOnInit(){}}return m.\u0275fac=function(u){return new(u||m)},m.\u0275cmp=_.Xpm({type:m,selectors:[["app-notification"]],inputs:{message:"message",showNotification:"showNotification"},decls:6,vars:1,consts:[[1,"wrapper1"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 52 52",1,"checkmark"],["cx","26","cy","26","r","25","fill","none",1,"checkmark__circle"],["fill","none","d","M14.1 27.2l7.1 7.2 16.7-16.8",1,"checkmark__check"],[2,"position","absolute","margin-top","150px","margin-bottom","50px","font-weight","bold"]],template:function(u,w){1&u&&(_.TgZ(0,"div",0),_.O4$(),_.TgZ(1,"svg",1),_._UZ(2,"circle",2)(3,"path",3),_.qZA(),_.kcU(),_.TgZ(4,"p",4),_._uU(5),_.qZA()()),2&u&&(_.xp6(5),_.hij(" ",w.message," "))},styles:["*[_ngcontent-%COMP%]{padding:0;margin:0}.wrapper1[_ngcontent-%COMP%]{height:100%;display:flex;justify-content:center;align-items:center;background-color:transparent}.checkmark__circle[_ngcontent-%COMP%]{stroke-dasharray:166;stroke-dashoffset:166;stroke-width:2;stroke-miterlimit:10;stroke:#7ac142;fill:none;animation:stroke .6s cubic-bezier(.65,0,.45,1) forwards}.checkmark[_ngcontent-%COMP%]{width:56px;height:56px;border-radius:50%;display:block;stroke-width:2;stroke:#fff;stroke-miterlimit:10;margin:10% auto;box-shadow:inset 0 0 #7ac142;animation:fill .4s ease-in-out .4s forwards,scale .3s ease-in-out .9s both}.checkmark__check[_ngcontent-%COMP%]{transform-origin:50% 50%;stroke-dasharray:48;stroke-dashoffset:48;animation:stroke .3s cubic-bezier(.65,0,.45,1) .8s forwards}@keyframes stroke{to{stroke-dashoffset:0}}@keyframes scale{0%,to{transform:none}50%{transform:scale3d(1.1,1.1,1)}}@keyframes fill{to{box-shadow:inset 0 0 0 30px #7ac142}}"]}),m})()}}]);