"use strict";(self.webpackChunkmatngular=self.webpackChunkmatngular||[]).push([[654],{3942:(G,b,l)=>{l.d(b,{c:()=>x});var _=l(4650);let x=(()=>{class d{constructor(){}ngOnInit(){}}return d.\u0275fac=function(f){return new(f||d)},d.\u0275cmp=_.Xpm({type:d,selectors:[["app-notification"]],inputs:{message:"message",showNotification:"showNotification"},decls:6,vars:1,consts:[[1,"wrapper1"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 52 52",1,"checkmark"],["cx","26","cy","26","r","25","fill","none",1,"checkmark__circle"],["fill","none","d","M14.1 27.2l7.1 7.2 16.7-16.8",1,"checkmark__check"],[2,"position","absolute","margin-top","150px","margin-bottom","50px","font-weight","bold"]],template:function(f,A){1&f&&(_.TgZ(0,"div",0),_.O4$(),_.TgZ(1,"svg",1),_._UZ(2,"circle",2)(3,"path",3),_.qZA(),_.kcU(),_.TgZ(4,"p",4),_._uU(5),_.qZA()()),2&f&&(_.xp6(5),_.hij(" ",A.message," "))},styles:["*[_ngcontent-%COMP%]{padding:0;margin:0}.wrapper1[_ngcontent-%COMP%]{height:100%;display:flex;justify-content:center;align-items:center;background-color:transparent}.checkmark__circle[_ngcontent-%COMP%]{stroke-dasharray:166;stroke-dashoffset:166;stroke-width:2;stroke-miterlimit:10;stroke:#7ac142;fill:none;animation:stroke .6s cubic-bezier(.65,0,.45,1) forwards}.checkmark[_ngcontent-%COMP%]{width:56px;height:56px;border-radius:50%;display:block;stroke-width:2;stroke:#fff;stroke-miterlimit:10;margin:10% auto;box-shadow:inset 0 0 #7ac142;animation:fill .4s ease-in-out .4s forwards,scale .3s ease-in-out .9s both}.checkmark__check[_ngcontent-%COMP%]{transform-origin:50% 50%;stroke-dasharray:48;stroke-dashoffset:48;animation:stroke .3s cubic-bezier(.65,0,.45,1) .8s forwards}@keyframes stroke{to{stroke-dashoffset:0}}@keyframes scale{0%,to{transform:none}50%{transform:scale3d(1.1,1.1,1)}}@keyframes fill{to{box-shadow:inset 0 0 0 30px #7ac142}}"]}),d})()},1654:(G,b,l)=>{l.r(b),l.d(b,{StockTakingModule:()=>_o});var _=l(4397),x=l(2318),d=l(5861),u=l(7340),f=l(9441),A=l(4313),C=l(2841),t=l(4650),J=l(8423),K=l(3166),j=l(7185),R=l(1927),V=l(1932),M=l(805),h=l(6895),g=l(4006),$=l(1493),z=l(2137),D=l(5593),N=l(3087),W=l(5722),X=l(1740),tt=l(666),y=l(9091),ot=l(2435),et=l(8271),nt=l(5369),it=l(2665),at=l(3942);const st=["op"],rt=["op2"],ct=["op3"];function lt(e,s){if(1&e){const o=t.EpF();t.TgZ(0,"button",25),t.NdJ("click",function(){t.CHM(o);const i=t.oxw(2);return t.KtG(i.showStartLocation=!0)}),t.qZA()}}function pt(e,s){1&e&&(t.TgZ(0,"tr",26)(1,"th"),t._uU(2,"Date started"),t.qZA(),t.TgZ(3,"th"),t._uU(4,"Location"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Completed "),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Balanced stock "),t.qZA(),t.TgZ(9,"th"),t._uU(10,"Missing stock "),t.qZA(),t.TgZ(11,"th"),t._uU(12,"Excess stock "),t.qZA(),t.TgZ(13,"th"),t._uU(14,"Done by "),t.qZA(),t.TgZ(15,"th"),t._uU(16,"Stock updated "),t.qZA(),t._UZ(17,"th"),t.qZA())}function _t(e,s){1&e&&t._UZ(0,"i",36)}function gt(e,s){1&e&&t._UZ(0,"i",37)}function mt(e,s){1&e&&t._UZ(0,"i",38)}function ut(e,s){1&e&&t._UZ(0,"i",37)}function dt(e,s){if(1&e){const o=t.EpF();t.TgZ(0,"div",39)(1,"button",40),t._uU(2," Download report "),t.qZA(),t.TgZ(3,"div",41)(4,"button",42),t.NdJ("click",function(){t.CHM(o);const i=t.oxw().$implicit,a=t.oxw(2);return t.KtG(a.downloadReport("excel",i))}),t._UZ(5,"i",43),t._uU(6," Excel document "),t.qZA(),t.TgZ(7,"button",44),t.NdJ("click",function(){t.CHM(o);const i=t.oxw().$implicit,a=t.oxw(2);return t.KtG(a.downloadReport("pdf",i))}),t._UZ(8,"i",45),t._uU(9," Pdf document "),t.qZA()()()}}function ft(e,s){if(1&e){const o=t.EpF();t.TgZ(0,"button",46),t.NdJ("click",function(){t.CHM(o);const i=t.oxw().$implicit,a=t.oxw(2);return t.KtG(a.getTodayDateItems(i))}),t.qZA()}}function ht(e,s){if(1&e){const o=t.EpF();t.TgZ(0,"button",47),t.NdJ("click",function(){t.CHM(o);const i=t.oxw().$implicit,a=t.oxw(2);return t.KtG(a.updateStock(i))}),t.qZA()}}function Tt(e,s){if(1&e){const o=t.EpF();t.TgZ(0,"button",48),t.NdJ("click",function(){t.CHM(o);const i=t.oxw().$implicit,a=t.oxw(2);return t.KtG(a.getDateItems(i))}),t.qZA()}}function kt(e,s){if(1&e){const o=t.EpF();t.TgZ(0,"tr",27)(1,"td"),t._uU(2),t.ALo(3,"date"),t.qZA(),t.TgZ(4,"td")(5,"p-colorPicker",28),t.NdJ("ngModelChange",function(i){const c=t.CHM(o).$implicit;return t.KtG(c.location.color=i)}),t.qZA()(),t.TgZ(6,"td"),t.YNc(7,_t,1,0,"i",29),t.YNc(8,gt,1,0,"i",30),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.ALo(11,"number"),t.qZA(),t.TgZ(12,"td"),t._uU(13),t.ALo(14,"number"),t.qZA(),t.TgZ(15,"td"),t._uU(16),t.ALo(17,"number"),t.qZA(),t.TgZ(18,"td"),t._uU(19),t.ALo(20,"titlecase"),t.qZA(),t.TgZ(21,"td"),t.YNc(22,mt,1,0,"i",31),t.YNc(23,ut,1,0,"i",30),t.qZA(),t.TgZ(24,"td"),t.YNc(25,dt,10,0,"div",32),t.YNc(26,ft,1,0,"button",33),t.YNc(27,ht,1,0,"button",34),t.YNc(28,Tt,1,0,"button",35),t.qZA()()}if(2&e){const o=s.$implicit;t.Tol(0==o.completed?"animate-flicker":""),t.xp6(2),t.hij(" ",t.lcZ(3,16,o.date_started)," "),t.xp6(3),t.Q6J("ngModel",o.location.color),t.xp6(2),t.Q6J("ngIf",0==o.completed),t.xp6(1),t.Q6J("ngIf",1==o.completed),t.xp6(2),t.Oqu(t.xi3(11,18,o.stable,".2")),t.xp6(3),t.Oqu(t.xi3(14,21,o.missing,".2")),t.xp6(3),t.Oqu(t.xi3(17,24,o.excess,".2")),t.xp6(3),t.Oqu(t.lcZ(20,27,o.done_by)),t.xp6(3),t.Q6J("ngIf",0==o.updated),t.xp6(1),t.Q6J("ngIf",1==o.updated),t.xp6(2),t.Q6J("ngIf",1==o.completed),t.xp6(1),t.Q6J("ngIf",0==o.completed),t.xp6(1),t.Q6J("ngIf",0==o.updated&&1==o.completed),t.xp6(1),t.Q6J("ngIf",1==o.completed)}}const Z=function(){return[10,25,50]},L=function(){return["name","description"]};function bt(e,s){if(1&e&&(t.TgZ(0,"div",3)(1,"div",4)(2,"div",16)(3,"div",17)(4,"h4",18),t._uU(5," Stock taking records "),t.YNc(6,lt,1,0,"button",19),t.qZA()(),t.TgZ(7,"div",20)(8,"p-table",21,22),t.YNc(10,pt,18,0,"ng-template",23),t.YNc(11,kt,29,29,"ng-template",24),t.qZA()()()()()),2&e){const o=t.oxw();t.xp6(2),t.Q6J("@enter",void 0),t.xp6(4),t.Q6J("ngIf",o.completedDates.length>0&&(1==o.completedDates[0].today&&0==o.completedDates[0].completed||0==o.completedDates[0].today)||o.completedDates.length<1),t.xp6(2),t.Q6J("value",o.completedDates)("rowHover",!0)("rows",10)("showCurrentPageReport",!0)("rowsPerPageOptions",t.DdM(10,Z))("paginator",!0)("filterDelay",0)("globalFilterFields",t.DdM(11,L))}}function xt(e,s){if(1&e&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&e){const o=s.$implicit;t.xp6(1),t.Oqu(o.name)}}function Ct(e,s){if(1&e&&(t.TgZ(0,"div",60)(1,"div"),t._uU(2),t.qZA()()),2&e){const o=s.$implicit;t.xp6(2),t.Oqu(o.name)}}const yt=function(){return{width:"25vw"}};function Zt(e,s){if(1&e){const o=t.EpF();t.TgZ(0,"p-dialog",49),t.NdJ("visibleChange",function(i){t.CHM(o);const a=t.oxw();return t.KtG(a.showStartLocation=i)}),t.TgZ(1,"form",50,51),t.NdJ("ngSubmit",function(){t.CHM(o);const i=t.oxw();return t.KtG(i.confirmStart())}),t.TgZ(3,"div",3)(4,"div",4)(5,"div",52)(6,"div",53)(7,"label",54),t._uU(8,"Select location for stock taking"),t.qZA(),t._UZ(9,"br")(10,"br"),t.TgZ(11,"p-dropdown",55),t.NdJ("onChange",function(i){t.CHM(o);const a=t.oxw();return t.KtG(a.updateLocationSelected(i))})("ngModelChange",function(i){t.CHM(o);const a=t.oxw();return t.KtG(a.locationToConfirm=i)}),t.YNc(12,xt,2,1,"ng-template",56),t.YNc(13,Ct,3,1,"ng-template",57),t.qZA()()()()(),t.TgZ(14,"p-footer")(15,"button",58),t.NdJ("click",function(){t.CHM(o);const i=t.oxw();return i.showStartLocation=!1,t.KtG(i.locationToConfirm=null)}),t.qZA(),t._UZ(16,"button",59),t.qZA()()()}if(2&e){const o=t.oxw();t.Akn(t.DdM(8,yt)),t.Q6J("closable",!1)("visible",o.showStartLocation)("baseZIndex",1e4),t.xp6(11),t.Q6J("options",o.allLocations)("ngModel",o.locationToConfirm),t.xp6(5),t.Q6J("disabled",null==o.locationToConfirm)}}function vt(e,s){if(1&e){const o=t.EpF();t.TgZ(0,"tr",26)(1,"th",64),t._uU(2,"Item "),t.qZA(),t.TgZ(3,"th",64),t._uU(4,"Current quantity "),t.qZA(),t.TgZ(5,"th",64),t._uU(6,"Confirmed quantity "),t.qZA(),t.TgZ(7,"th",64),t._uU(8,"Balanced "),t.qZA(),t.TgZ(9,"th",64),t._uU(10,"Missing "),t.qZA(),t.TgZ(11,"th",64),t._uU(12,"Excess "),t.qZA()(),t.TgZ(13,"tr")(14,"th",65)(15,"input",66),t.NdJ("input",function(i){t.CHM(o),t.oxw();const a=t.MAs(1);return t.KtG(a.filterGlobal(i.target.value,"contains"))}),t.qZA()()()}}function St(e,s){1&e&&t._UZ(0,"i",37)}function wt(e,s){1&e&&t._UZ(0,"i",36)}const T=function(e){return{"background-color":e,color:"#ffffff",cursor:"pointer"}};function qt(e,s){if(1&e){const o=t.EpF();t.TgZ(0,"tr",27)(1,"td"),t._uU(2),t.ALo(3,"titlecase"),t.qZA(),t.TgZ(4,"td")(5,"p-avatar",67),t.NdJ("click",function(i){const c=t.CHM(o).$implicit,r=t.oxw(2);return t.KtG(r.showLocationsQuantity(c,i))}),t.qZA()(),t.TgZ(6,"td")(7,"p-avatar",67),t.NdJ("click",function(i){const c=t.CHM(o).$implicit,r=t.oxw(2);return t.KtG(r.showLocationsQuantity4(c,i))}),t.qZA()(),t.TgZ(8,"td"),t.YNc(9,St,1,0,"i",30),t.YNc(10,wt,1,0,"i",29),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.ALo(13,"number"),t.qZA(),t.TgZ(14,"td"),t._uU(15),t.ALo(16,"number"),t.qZA()()}if(2&e){const o=s.$implicit,n=t.oxw(2);t.xp6(2),t.hij(" ",t.lcZ(3,9,o.item.name)," "),t.xp6(3),t.Akn(t.VKq(17,T,n.dateToConfirm.location.color)),t.xp6(2),t.Akn(t.VKq(19,T,n.dateToConfirm.location.color)),t.xp6(2),t.Q6J("ngIf",n.getMissingValue(o.current_qty,o.confirmed_qty,o.buying_price)+n.getExcessValue(o.current_qty,o.confirmed_qty,o.buying_price)==0),t.xp6(1),t.Q6J("ngIf",n.getExcessValue(o.current_qty,o.confirmed_qty,o.buying_price)+n.getMissingValue(o.current_qty,o.confirmed_qty,o.buying_price)!=0),t.xp6(2),t.hij(" ",t.xi3(13,11,n.getMissingValue(o.current_qty,o.confirmed_qty,o.buying_price),".2")," "),t.xp6(3),t.hij(" ",t.xi3(16,14,n.getExcessValue(o.current_qty,o.confirmed_qty,o.buying_price),".2")," ")}}function At(e,s){1&e&&(t.TgZ(0,"tr")(1,"td",68),t._uU(2,"No items found."),t.qZA()())}const Mt=function(){return["item.name"]};function Nt(e,s){if(1&e&&(t.TgZ(0,"p-table",61,62),t.YNc(2,vt,16,0,"ng-template",23),t.YNc(3,qt,17,21,"ng-template",24),t.YNc(4,At,3,0,"ng-template",63),t.qZA()),2&e){const o=t.oxw();t.Q6J("value",o.dateToConfirm.items)("rowHover",!0)("rows",10)("showCurrentPageReport",!0)("rowsPerPageOptions",t.DdM(9,Z))("loading",o.loading)("paginator",!0)("filterDelay",0)("globalFilterFields",t.DdM(10,Mt))}}function Ut(e,s){if(1&e&&(t.TgZ(0,"div",77)(1,"span"),t._uU(2),t.qZA()()),2&e){const o=s.$implicit;t.xp6(2),t.Oqu(o.name)}}function Qt(e,s){if(1&e){const o=t.EpF();t.TgZ(0,"tr",26)(1,"th",71),t._uU(2,"Item "),t._UZ(3,"p-sortIcon",72),t.qZA(),t.TgZ(4,"th",73),t._uU(5,"Category "),t._UZ(6,"p-sortIcon",74),t.qZA(),t.TgZ(7,"th",64),t._uU(8,"Current qty "),t.qZA(),t._UZ(9,"th",75),t.qZA(),t.TgZ(10,"tr")(11,"th")(12,"input",66),t.NdJ("input",function(i){t.CHM(o),t.oxw();const a=t.MAs(8);return t.KtG(a.filter(i.target.value,"name","contains"))}),t.qZA()(),t.TgZ(13,"th")(14,"p-multiSelect",76),t.NdJ("onChange",function(i){t.CHM(o);const a=t.oxw(2);return t.KtG(a.onCategoryChange(i))}),t.YNc(15,Ut,3,1,"ng-template",57),t.qZA()(),t._UZ(16,"th")(17,"th"),t.qZA()}if(2&e){const o=t.oxw(2);t.xp6(14),t.Q6J("options",o.categories)}}function Ft(e,s){if(1&e){const o=t.EpF();t.TgZ(0,"p-button",80),t.NdJ("onClick",function(){t.CHM(o);const i=t.oxw().$implicit,a=t.oxw(2);return t.KtG(a.selectItem(i))}),t.qZA()}}function It(e,s){1&e&&t._UZ(0,"p-message",81)}function Jt(e,s){if(1&e){const o=t.EpF();t.TgZ(0,"tr",27)(1,"td"),t._uU(2),t.ALo(3,"titlecase"),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.ALo(6,"titlecase"),t.qZA(),t.TgZ(7,"td")(8,"p-avatar",67),t.NdJ("click",function(i){const c=t.CHM(o).$implicit,r=t.oxw(2);return t.KtG(r.showLocationsQuantity3(c,i))}),t.qZA()(),t.TgZ(9,"td"),t.YNc(10,Ft,1,0,"p-button",78),t.YNc(11,It,1,0,"p-message",79),t.qZA()()}if(2&e){const o=s.$implicit,n=t.oxw(2);t.xp6(2),t.hij(" ",t.lcZ(3,6,o.name)," "),t.xp6(3),t.hij(" ",t.lcZ(6,8,o.category.name)," "),t.xp6(3),t.Akn(t.VKq(10,T,n.locationToConfirm.color)),t.xp6(2),t.Q6J("ngIf",o.selling_units.length>0),t.xp6(1),t.Q6J("ngIf",o.selling_units.length<1)}}function Dt(e,s){if(1&e){const o=t.EpF();t.TgZ(0,"button",82),t.NdJ("click",function(){t.CHM(o);const i=t.oxw(2);return t.KtG(i.confirmComplete())}),t.qZA()}}function Lt(e,s){if(1&e){const o=t.EpF();t.TgZ(0,"tr",26)(1,"th",71),t._uU(2,"Item "),t._UZ(3,"p-sortIcon",72),t.qZA(),t.TgZ(4,"th",64),t._uU(5,"Current qty "),t.qZA(),t.TgZ(6,"th",64),t._uU(7,"Confirmed qty "),t.qZA(),t._UZ(8,"th",75),t.qZA(),t.TgZ(9,"tr")(10,"th",83)(11,"input",66),t.NdJ("input",function(i){t.CHM(o),t.oxw();const a=t.MAs(8);return t.KtG(a.filterGlobal(i.target.value,"contains"))}),t.qZA()()()}}function Yt(e,s){if(1&e){const o=t.EpF();t.TgZ(0,"tr",27)(1,"td"),t._uU(2),t.ALo(3,"titlecase"),t.qZA(),t.TgZ(4,"td")(5,"p-avatar",67),t.NdJ("click",function(i){const c=t.CHM(o).$implicit,r=t.oxw(2);return t.KtG(r.showLocationsQuantity(c,i))}),t.qZA()(),t.TgZ(6,"td")(7,"p-avatar",67),t.NdJ("click",function(i){const c=t.CHM(o).$implicit,r=t.oxw(2);return t.KtG(r.showLocationsQuantity4(c,i))}),t.qZA()(),t.TgZ(8,"td")(9,"p-button",84),t.NdJ("onClick",function(){const a=t.CHM(o).$implicit,c=t.oxw(2);return t.KtG(c.deleteItem(a))}),t.qZA()()()}if(2&e){const o=s.$implicit,n=t.oxw(2);t.xp6(2),t.hij(" ",t.lcZ(3,5,o.item.name)," "),t.xp6(3),t.Akn(t.VKq(7,T,n.dateToConfirm.location.color)),t.xp6(2),t.Akn(t.VKq(9,T,n.dateToConfirm.location.color))}}const Et=function(){return["item.name","item.category.name"]};function Pt(e,s){if(1&e&&(t.TgZ(0,"div",3)(1,"div",69)(2,"div",16)(3,"div",17)(4,"h4",18),t._uU(5," Select item to confirm "),t.qZA()(),t.TgZ(6,"div",20)(7,"p-table",21,22),t.YNc(9,Qt,18,1,"ng-template",23),t.YNc(10,Jt,12,12,"ng-template",24),t.qZA()()()(),t.TgZ(11,"div",69)(12,"div",16)(13,"div",17)(14,"h4",18),t._uU(15," Confirmed items "),t.YNc(16,Dt,1,0,"button",70),t.qZA()(),t.TgZ(17,"div",20)(18,"p-table",21,22),t.YNc(20,Lt,12,0,"ng-template",23),t.YNc(21,Yt,10,11,"ng-template",24),t.qZA()()()()()),2&e){const o=t.oxw();t.xp6(2),t.Q6J("@enter",void 0),t.xp6(5),t.Q6J("value",o.allStock)("rowHover",!0)("rows",10)("showCurrentPageReport",!0)("rowsPerPageOptions",t.DdM(19,Z))("paginator",!0)("filterDelay",0)("globalFilterFields",t.DdM(20,L)),t.xp6(5),t.Q6J("@enter",void 0),t.xp6(4),t.Q6J("ngIf",o.allStock.length<1),t.xp6(2),t.Q6J("value",o.dateToConfirm.items)("rowHover",!0)("rows",10)("showCurrentPageReport",!0)("rowsPerPageOptions",t.DdM(21,Z))("paginator",!0)("filterDelay",0)("globalFilterFields",t.DdM(22,Et))}}function Ot(e,s){if(1&e){const o=t.EpF();t.TgZ(0,"div",53)(1,"label",91),t._uU(2),t.ALo(3,"titlecase"),t.qZA(),t.TgZ(4,"input",92),t.NdJ("ngModelChange",function(i){const c=t.CHM(o).$implicit,r=t.oxw(3);return t.KtG(r.itemToConfirmQuantities[c.id]=i)}),t.qZA()()}if(2&e){const o=s.$implicit,n=t.oxw(3);t.xp6(2),t.hij("Confirmed ",t.lcZ(3,2,o.unit_name),"s"),t.xp6(2),t.Q6J("ngModel",n.itemToConfirmQuantities[o.id])}}function Ht(e,s){if(1&e){const o=t.EpF();t.TgZ(0,"form",50,51),t.NdJ("ngSubmit",function(){t.CHM(o);const i=t.oxw(2);return t.KtG(i.addItem())}),t.TgZ(2,"div",3)(3,"div",4)(4,"div",52),t.YNc(5,Ot,5,4,"div",89),t.qZA()()(),t.TgZ(6,"p-footer")(7,"button",58),t.NdJ("click",function(){t.CHM(o);const i=t.oxw(2);return t.KtG(i.showConfirmForm=!1)}),t.qZA(),t._UZ(8,"button",90),t.qZA()()}if(2&e){const o=t.MAs(1),n=t.oxw(2);t.xp6(5),t.Q6J("ngForOf",n.itemToConfirm.selling_units),t.xp6(3),t.Q6J("disabled",!o.valid)}}function Bt(e,s){if(1&e&&t._UZ(0,"app-notification",93),2&e){const o=t.oxw(2);t.Q6J("message","Item added!")("showNotification",o.showNotification)}}const Y=function(){return{width:"30vw"}};function Gt(e,s){if(1&e){const o=t.EpF();t.TgZ(0,"p-dialog",85),t.NdJ("visibleChange",function(i){t.CHM(o);const a=t.oxw();return t.KtG(a.showConfirmForm=i)}),t.ALo(1,"titlecase"),t.YNc(2,Ht,9,2,"form",86),t.YNc(3,Bt,1,2,"app-notification",87),t.TgZ(4,"ngx-spinner",88),t._UZ(5,"p",7),t.qZA()()}if(2&e){const o=t.oxw();t.Akn(t.DdM(11,Y)),t.s9C("header",o.showNotification?"":t.lcZ(1,9,o.itemToConfirm.name)),t.Q6J("closable",!1)("visible",o.showConfirmForm)("baseZIndex",1e4),t.xp6(2),t.Q6J("ngIf",!o.showNotification),t.xp6(1),t.Q6J("ngIf",o.showNotification),t.xp6(1),t.Q6J("fullScreen",!1)}}function Kt(e,s){if(1&e&&(t.TgZ(0,"th"),t._uU(1),t.ALo(2,"titlecase"),t.ALo(3,"number"),t.qZA()),2&e){const o=s.$implicit;t.xp6(1),t.AsE(" ",t.lcZ(2,2,o.unit_name)," (",t.lcZ(3,4,o.unit_quantity),") ")}}function jt(e,s){if(1&e&&(t.TgZ(0,"tr"),t.YNc(1,Kt,4,6,"th",95),t.qZA()),2&e){const o=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",o.itemToViewQuantity.selling_units)}}function Rt(e,s){if(1&e&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&e){const o=s.$implicit,n=t.oxw(3);t.xp6(1),t.hij(" ",n.getLocationUnitQuantity2(n.itemToViewQuantity.current_qty,n.itemToViewQuantity.selling_units)[o.unit_name]," ")}}function Vt(e,s){if(1&e&&(t.TgZ(0,"tr"),t.YNc(1,Rt,2,1,"td",95),t.qZA()),2&e){const o=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",o.itemToViewQuantity.selling_units)}}const U=function(){return[1]};function $t(e,s){1&e&&(t.TgZ(0,"p-table",94),t.YNc(1,jt,2,1,"ng-template",23),t.YNc(2,Vt,2,1,"ng-template",24),t.qZA()),2&e&&t.Q6J("value",t.DdM(3,U))("paginator",!1)("rows",5)}function zt(e,s){if(1&e&&(t.TgZ(0,"th"),t._uU(1),t.ALo(2,"titlecase"),t.ALo(3,"number"),t.qZA()),2&e){const o=s.$implicit;t.xp6(1),t.AsE(" ",t.lcZ(2,2,o.unit_name)," (",t.lcZ(3,4,o.unit_quantity),") ")}}function Wt(e,s){if(1&e&&(t.TgZ(0,"tr"),t.YNc(1,zt,4,6,"th",95),t.qZA()),2&e){const o=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",o.itemToViewQuantity.selling_units)}}function Xt(e,s){if(1&e&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&e){const o=s.$implicit,n=t.oxw(3);t.xp6(1),t.hij(" ",n.getLocationUnitQuantity2(n.itemToViewQuantity.confirmed_qty,n.itemToViewQuantity.selling_units)[o.unit_name]," ")}}function to(e,s){if(1&e&&(t.TgZ(0,"tr"),t.YNc(1,Xt,2,1,"td",95),t.qZA()),2&e){const o=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",o.itemToViewQuantity.selling_units)}}function oo(e,s){1&e&&(t.TgZ(0,"p-table",94),t.YNc(1,Wt,2,1,"ng-template",23),t.YNc(2,to,2,1,"ng-template",24),t.qZA()),2&e&&t.Q6J("value",t.DdM(3,U))("paginator",!1)("rows",5)}function eo(e,s){if(1&e&&(t.TgZ(0,"th"),t._uU(1),t.ALo(2,"titlecase"),t.ALo(3,"number"),t.qZA()),2&e){const o=s.$implicit;t.xp6(1),t.AsE(" ",t.lcZ(2,2,o.unit_name)," (",t.lcZ(3,4,o.unit_quantity),") ")}}function no(e,s){if(1&e&&(t.TgZ(0,"tr"),t.YNc(1,eo,4,6,"th",95),t.qZA()),2&e){const o=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",o.itemLocationToViewQuantity.selling_units)}}function io(e,s){if(1&e&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&e){const o=s.$implicit,n=t.oxw(3);t.xp6(1),t.hij(" ",n.getLocationUnitQuantity3(n.itemLocationToViewQuantity.location_qty,n.itemLocationToViewQuantity.selling_units)[o.unit_name]," ")}}function ao(e,s){if(1&e&&(t.TgZ(0,"tr"),t.YNc(1,io,2,1,"td",95),t.qZA()),2&e){const o=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",o.itemLocationToViewQuantity.selling_units)}}function so(e,s){1&e&&(t.TgZ(0,"p-table",94),t.YNc(1,no,2,1,"ng-template",23),t.YNc(2,ao,2,1,"ng-template",24),t.qZA()),2&e&&t.Q6J("value",t.DdM(3,U))("paginator",!1)("rows",5)}const ro=function(){return{width:"80vw"}},co=function(){return{width:"95vw"}},Q=function(){return{width:"500px"}},lo=[{path:"",component:(()=>{class e{constructor(o,n,i,a,c,r,v){this.spinner=o,this.cryptoSrv=n,this.toastr=i,this.authSrv=a,this.apiSrv=c,this.confirmationService=r,this.cdr=v,this.loading=!0,this.allLocations=[],this.showStartLocation=!1,this.allStock=[],this.completedDates=[],this.showStockTakingDialog=!1,this.showItemsDialog=!1,this.showConfirmForm=!1,this.itemToConfirmQuantities={},this.showNotification=!1}ngOnInit(){"1"===this.cryptoSrv.decryptEncodedText(this.authSrv.getRoleToken("stock_taking"))||"admin"===this.cryptoSrv.decryptEncodedText(this.authSrv.getUserDetailToken("role"))?this.getCompletedStocks():(this.toastr.error("You have no rights to access that page!"),this.authSrv.logout())}showLocationsQuantity(o,n){this.itemToViewQuantity=o,this.overlay.toggle(n)}showLocationsQuantity2(o,n){this.itemToViewQuantity=o,this.overlay2.toggle(n)}showLocationsQuantity3(o,n){this.itemLocationToViewQuantity=o,this.overlay3.toggle(n)}showLocationsQuantity4(o,n){this.itemToViewQuantity=o,this.overlay2.toggle(n)}getLocationUnitQuantity(o,n){const i={};return(n=n.sort((a,c)=>c.unit_quantity-a.unit_quantity)).forEach(a=>{if(o>0){const c=Math.floor(o/a.unit_quantity);i[a.unit_name]=c,o-=c*a.unit_quantity}else i[a.unit_name]=0}),i}getLocationUnitQuantity2(o,n){const i={};return(n=n.sort((a,c)=>parseFloat(c.unit_quantity.toString())-parseFloat(a.unit_quantity.toString()))).forEach(a=>{if(o>0){const c=Math.floor(o/parseFloat(a.unit_quantity.toString()));i[a.unit_name]=c,o-=c*parseFloat(a.unit_quantity.toString())}else i[a.unit_name]=0}),i}getLocationUnitQuantity3(o,n){const i={};return(n=n.sort((a,c)=>c.unit_quantity-a.unit_quantity)).forEach(a=>{if(o>0){const c=Math.floor(o/a.unit_quantity);i[a.unit_name]=c,o-=c*a.unit_quantity}else i[a.unit_name]=0}),i}getMissingValue(o,n,i){return n<o?(parseFloat(o)-parseFloat(n))*parseFloat(i):0}getExcessValue(o,n,i){return n>o?(parseFloat(n)-parseFloat(o))*parseFloat(i):0}getCompletedStocks(){this.spinner.show();const o={action:this.cryptoSrv.encodeEncryptText("get-completed-stock-taking-dates"),added_by:this.authSrv.getUserDetailToken("uid")};this.apiSrv.read(o).then(n=>{"error"!=n.status?"error2"!=n.status?(this.completedDates=n.dates,this.allLocations=n.locations,this.loading=!1):(this.toastr.error("Please login again.","Login session expired!"),this.authSrv.logout()):this.toastr.error(n.message),this.spinner.hide()}).catch(n=>{this.toastr.error(n),this.spinner.hide()})}updateLocationSelected(o){this.locationToConfirm=o.value}confirmStart(){this.confirmationService.confirm({message:"No sales will be made untill stock taking is complete. Do you want to start the stock taking process?",acceptButtonStyleClass:"p-button-primary p-button-sm",rejectButtonStyleClass:"p-button-danger p-button-sm",acceptLabel:"Yes",rejectLabel:"No",accept:()=>{this.showStartLocation=!1,this.startProcess()},reject:()=>{}})}startProcess(){this.spinner.show();const o={action:this.cryptoSrv.encodeEncryptText("start-stock-taking"),added_by:this.authSrv.getUserDetailToken("uid"),location_id:this.locationToConfirm.id};this.apiSrv.post(o).then(n=>{"error"!=n.status?"error2"!=n.status?this.ngOnInit():(this.spinner.hide(),this.toastr.error("Please login again.","Login session expired!"),this.authSrv.logout()):(this.spinner.hide(),this.toastr.error(n.message))}).catch(n=>{this.toastr.error(n),this.spinner.hide()})}getTodayDateItems(o){this.showNotification=!1,this.dateToConfirm=o,this.locationToConfirm=o.location,this.spinner.show(),this.spinner.show("stock");const n={action:this.cryptoSrv.encodeEncryptText("get-stock-taking-items-and-stock"),uid:this.authSrv.getUserDetailToken("uid"),date_id:this.dateToConfirm.id,location_id:this.dateToConfirm.location.id};this.apiSrv.read(n).then(i=>{"error"!=i.status?"error2"!=i.status?(this.allStock=i.stock,this.dateToConfirm=i.date,this.showStockTakingDialog=!0):(this.toastr.error("Please login again.","Login session expired!"),this.authSrv.logout()):this.toastr.error(i.message),this.spinner.hide(),this.spinner.hide("stock")}).catch(i=>{this.toastr.error(i),this.spinner.hide(),this.spinner.hide("stock")})}getDateItems(o){this.dateToConfirm=o,this.spinner.show();const n={action:this.cryptoSrv.encodeEncryptText("get-stock-taking-items"),user_id:this.authSrv.getUserDetailToken("uid"),date_id:this.dateToConfirm.id,location_id:this.dateToConfirm.location.id,date_started:this.cryptoSrv.encodeEncryptText(this.dateToConfirm.date_started),completion_time:this.cryptoSrv.encodeEncryptText(this.dateToConfirm.completion_time)};this.apiSrv.read(n).then(i=>{"error"!=i.status?"error2"!=i.status?(this.dateToConfirm=i.date,this.showItemsDialog=!0):(this.toastr.error("Please login again.","Login session expired!"),this.authSrv.logout()):this.toastr.error(i.message),this.spinner.hide()}).catch(i=>{this.toastr.error(i),this.spinner.hide()})}addItem(){this.spinner.show("confirm");var o=0;this.itemToConfirm.selling_units.forEach(i=>{o+=this.itemToConfirmQuantities[i.id]*i.unit_quantity});const n={action:this.cryptoSrv.encodeEncryptText("add-stock-taking-item"),added_by:this.authSrv.getUserDetailToken("uid"),date_id:this.dateToConfirm.id,item_id:this.itemToConfirm.id,location_id:this.dateToConfirm.location.id,buying_price:this.cryptoSrv.encodeEncryptText(this.itemToConfirm.buying_price.toString()),quantity_confirmed:this.cryptoSrv.encodeEncryptText(o.toString())};this.apiSrv.post(n).then(i=>{"error"!=i.status?"error2"!=i.status?(this.showNotification=!0,setTimeout(()=>{this.getTodayDateItems(this.dateToConfirm),this.showConfirmForm=!1},1300),this.spinner.hide("confirm")):(this.spinner.hide("confirm"),this.toastr.error("Please login again.","Login session expired!"),this.authSrv.logout()):(this.spinner.hide("confirm"),this.toastr.error(i.message))}).catch(i=>{this.toastr.error(i),this.spinner.hide()})}deleteItem(o){this.spinner.show("stock");const n={action:this.cryptoSrv.encodeEncryptText("delete-stock-taking-item"),added_by:this.authSrv.getUserDetailToken("uid"),date_id:this.dateToConfirm.id,item_id:o.item.id,location_id:this.dateToConfirm.location.id,id:o.id};this.apiSrv.post(n).then(i=>{"error"!=i.status?"error2"!=i.status?this.getTodayDateItems(this.dateToConfirm):(this.spinner.hide("stock"),this.toastr.error("Please login again.","Login session expired!"),this.authSrv.logout()):(this.spinner.hide("stock"),this.toastr.error(i.message))}).catch(i=>{this.toastr.error(i),this.spinner.hide()})}selectItem(o){this.itemToConfirm=o,this.showConfirmForm=!0,this.itemToConfirmQuantities={},this.itemToConfirm.selling_units.forEach(n=>{this.itemToConfirmQuantities[n.id]=0})}confirmComplete(){this.confirmationService.confirm({message:"Do you want to complete this stock taking process.",acceptButtonStyleClass:"p-button-primary p-button-sm",rejectButtonStyleClass:"p-button-danger p-button-sm",acceptLabel:"Yes",rejectLabel:"No",accept:()=>{this.complete()},reject:()=>{}})}complete(){this.spinner.show("stock");const o={action:this.cryptoSrv.encodeEncryptText("complete-stock-taking"),added_by:this.authSrv.getUserDetailToken("uid"),date_id:this.dateToConfirm.id,loc_id:this.dateToConfirm.location.id};this.apiSrv.post(o).then(n=>{"error"!=n.status?"error2"!=n.status?(this.toastr.success("Process completed!"),this.showStockTakingDialog=!1,this.ngOnInit()):(this.spinner.hide("stock"),this.toastr.error("Please login again.","Login session expired!"),this.authSrv.logout()):(this.spinner.hide("stock"),this.toastr.error(n.message))}).catch(n=>{this.toastr.error(n),this.spinner.hide()})}updateStock(o){this.confirmationService.confirm({message:"All items confirmed for this location will be updated according to the confirmed quantity. Do you want to start the update?",acceptButtonStyleClass:"p-button-primary p-button-sm",rejectButtonStyleClass:"p-button-danger p-button-sm",acceptLabel:"Yes",rejectLabel:"No",accept:()=>{this.update(o)},reject:()=>{}})}update(o){this.spinner.show("stock");const n={action:this.cryptoSrv.encodeEncryptText("update-stock-taking-items"),added_by:this.authSrv.getUserDetailToken("uid"),date_id:o.id,loc_id:o.location.id};this.apiSrv.post(n).then(i=>{"error"!=i.status?"error2"!=i.status?(this.toastr.success("Update completed!"),this.ngOnInit()):(this.spinner.hide("stock"),this.toastr.error("Please login again.","Login session expired!"),this.authSrv.logout()):(this.spinner.hide("stock"),this.toastr.error(i.message))}).catch(i=>{this.toastr.error(i),this.spinner.hide()})}downloadReport(o,n){this.spinner.show();const i={action:this.cryptoSrv.encodeEncryptText("get-stock-taking-items"),user_id:this.authSrv.getUserDetailToken("uid"),date_id:n.id,location_id:n.location.id,date_started:this.cryptoSrv.encodeEncryptText(n.date_started),completion_time:this.cryptoSrv.encodeEncryptText(n.completion_time)};this.apiSrv.read(i).then(a=>{if("error"!=a.status)if("error2"!=a.status){this.dateToConfirm=a.date;const c=[];this.dateToConfirm.items.forEach(r=>{r.buying_price=parseFloat(r.buying_price.toString()),r.current_qty=parseFloat(r.current_qty.toString()),r.confirmed_qty=parseFloat(r.confirmed_qty.toString());const v={item:(0,C._)(r.item.name),buying_price:parseFloat(parseFloat(r.buying_price.toString()).toFixed(2)),current_qty:r.current_qty,confirmed_qty:r.confirmed_qty,missing_stock:r.confirmed_qty<r.current_qty?0-(r.current_qty-r.confirmed_qty):r.confirmed_qty>r.current_qty?r.confirmed_qty-r.current_qty:0,missing_amount:r.confirmed_qty<r.current_qty?parseFloat(parseFloat((r.current_qty-r.confirmed_qty).toString()).toFixed(2))*r.buying_price:0,excess_amount:r.confirmed_qty>r.current_qty?parseFloat(parseFloat((r.confirmed_qty-r.current_qty).toString()).toFixed(2))*r.buying_price:0,selling_units:r.selling_units};c.push(v)}),this.downloadExcelFile(c,"Stock taking on "+n.date_started)}else this.spinner.hide(),this.toastr.error("Please login again.","Login session expired!"),this.authSrv.logout();else this.spinner.hide(),this.toastr.error(a.message)}).catch(a=>{this.toastr.error(a),this.spinner.hide()})}downloadExcelFile(o,n){var i=this;return(0,d.Z)(function*(){const a=new A.Workbook,c=a.addWorksheet("Stock taking");Object.keys(o[0]),c.addRow(["Item","Buying price","System quantity","Physical quantity","Missing/Excess stock","Missing stock amount","Excess stock amount"]).eachCell(p=>{p.font={bold:!0}}),o.forEach(p=>{const S=i.getLocationUnitQuantity2(parseFloat(p.current_qty.toString()),p.selling_units),w=i.getLocationUnitQuantity2(parseFloat(p.confirmed_qty.toString()),p.selling_units),F=i.getLocationUnitQuantity2(parseFloat(Math.abs(p.missing_stock).toString()),p.selling_units);let E="";for(let m in S)E+=S[m]+" "+(0,C._)(m)+"\n";let P="";for(let m in w)P+=w[m]+" "+(0,C._)(m)+"\n";let q="";p.missing_stock<0&&(q+="Missing stock\n"),p.missing_stock>0&&(q+="Excess stock\n");for(let m in F)F[m]>0&&(q+="  "+F[m]+" "+(0,C._)(m)+"\n");const O=Object.assign({},p);delete O.selling_units;const k=c.addRow(Object.values(O)),H=k.getCell(3);H.note=E;const B=k.getCell(4);B.note=P;const I=k.getCell(5),go=k.getCell(6),mo=k.getCell(7);(p.missing_stock>0||p.missing_stock<0)&&(I.note=q),H.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFFF00"}},B.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFFF00"}},p.missing_stock<0&&(I.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FF0000"}},go.style.font={color:{argb:"FF0000"}}),p.missing_stock>0&&(I.fill={type:"pattern",pattern:"solid",fgColor:{argb:"0AB701"}},mo.style.font={color:{argb:"0AB701"}})}),yield c.protect("1234",{}),a.xlsx.writeBuffer().then(p=>{const S=new Blob([p],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});(0,f.saveAs)(S,n+".xlsx")}),i.spinner.hide()})()}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(J.t2),t.Y36(K.$),t.Y36(j._W),t.Y36(R.e),t.Y36(V.s),t.Y36(M.YP),t.Y36(t.sBO))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-stock-taking"]],viewQuery:function(o,n){if(1&o&&(t.Gf(st,5),t.Gf(rt,5),t.Gf(ct,5)),2&o){let i;t.iGM(i=t.CRH())&&(n.overlay=i.first),t.iGM(i=t.CRH())&&(n.overlay2=i.first),t.iGM(i=t.CRH())&&(n.overlay3=i.first)}},decls:27,vars:50,consts:[["class","row",4,"ngIf"],["appendTo","body","modal","true","header","",3,"closable","visible","style","baseZIndex","visibleChange",4,"ngIf"],["appendTo","body","modal","true",3,"header","closable","visible","baseZIndex","visibleChange","onHide"],[1,"row"],[1,"col-md-12"],["styleClass","p-datatable-customers","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"value","rowHover","rows","showCurrentPageReport","rowsPerPageOptions","loading","paginator","filterDelay","globalFilterFields",4,"ngIf"],["bdOpacity","#fff","bdColor","rgba(255,255,255,0.76)","size","medium","name","stock","color","#02926e","type","ball-clip-rotate",3,"fullScreen"],[2,"color","#02926e"],["appendTo","body","modal","true",3,"header","closable","visible","style","baseZIndex","visibleChange",4,"ngIf"],[3,"showCloseIcon"],["op",""],["pTemplate",""],["op2",""],["op3",""],["bdOpacity","#fff","bdColor","rgba(255,255,255,0.76)","size","medium","color","#02926e","type","ball-clip-rotate",3,"fullScreen"],["header","Confirm","icon","pi pi-exclamation-triangle","appendTo","body",3,"baseZIndex"],[1,"card"],[1,"card-header"],[1,"card-title","mb-4"],["pButton","","type","button","icon","pi pi-plus","label","Start stock taking","class","p-button-success p-button-sm float-right mb-2",3,"click",4,"ngIf"],[1,"card-body","p-0","m-0"],["styleClass","p-datatable-customers","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"value","rowHover","rows","showCurrentPageReport","rowsPerPageOptions","paginator","filterDelay","globalFilterFields"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pButton","","type","button","icon","pi pi-plus","label","Start stock taking",1,"p-button-success","p-button-sm","float-right","mb-2",3,"click"],[1,"ui-selectable-row"],[2,"word-wrap","normal"],["disabled","true",3,"ngModel","ngModelChange"],["class","pi pi-exclamation-triangle warning",4,"ngIf"],["class","pi pi-check success",4,"ngIf"],["class","pi pi-exclamation-circle warning",4,"ngIf"],["ngbDropdown","","class","d-inline-block float-right","container","body","placement","bottom-start",4,"ngIf"],["pButton","","type","button","icon","pi pi-pencil","label","Resume confirming","class","p-button-success p-button-sm p-button-outlined",3,"click",4,"ngIf"],["pButton","","type","button","icon","pi pi-check","label","Update stock","class","p-button-success p-button-sm float-right mr-5",3,"click",4,"ngIf"],["pButton","","type","button","icon","pi pi-list","label","Show items","class","p-button-info p-button-sm p-button-outlined mr-5 float-right",3,"click",4,"ngIf"],[1,"pi","pi-exclamation-triangle","warning"],[1,"pi","pi-check","success"],[1,"pi","pi-exclamation-circle","warning"],["ngbDropdown","","container","body","placement","bottom-start",1,"d-inline-block","float-right"],["type","button","pButton","","id","dropdownBasic1","ngbDropdownToggle","",1,"p-button-primary","p-button-outlined"],["ngbDropdownMenu","","aria-labelledby","dropdownBasic1",1,"dropdown-menu",2,"right","auto !important","left","0 !important"],["ngbDropdownItem","",1,"p-button-success",3,"click"],[1,"pi","pi-file-excel","mr-2"],["ngbDropdownItem","",3,"click"],[1,"pi","pi-file-pdf","mr-2"],["pButton","","type","button","icon","pi pi-pencil","label","Resume confirming",1,"p-button-success","p-button-sm","p-button-outlined",3,"click"],["pButton","","type","button","icon","pi pi-check","label","Update stock",1,"p-button-success","p-button-sm","float-right","mr-5",3,"click"],["pButton","","type","button","icon","pi pi-list","label","Show items",1,"p-button-info","p-button-sm","p-button-outlined","mr-5","float-right",3,"click"],["appendTo","body","modal","true","header","",3,"closable","visible","baseZIndex","visibleChange"],["autocomplete","off",3,"ngSubmit"],["form2","ngForm"],[1,"ui-fluid"],[1,"p-field","pb-3"],["for","location"],["placeholder","Select a location","name","location","appendTo","body","optionLabel","name","filter","true",3,"options","ngModel","onChange","ngModelChange"],["pTemplate","selectedItem"],["pTemplate","item"],["type","button","pButton","","icon","pi pi-times","label","Cancel",1,"p-button-danger","p-button-sm","float-right",3,"click"],["type","submit","pButton","","icon","pi pi-check","label","Start",1,"p-button-success","p-button-sm","mr-5","float-right",3,"disabled"],[1,"ui-helper-clearfix"],["styleClass","p-datatable-customers","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"value","rowHover","rows","showCurrentPageReport","rowsPerPageOptions","loading","paginator","filterDelay","globalFilterFields"],["dt7",""],["pTemplate","emptymessage"],[2,"width","10rem"],["colspan","6"],["pInputText","","type","text","placeholder","Search item name",1,"ui-column-filter",3,"input"],["label","","shape","circle",3,"click"],["colspan","4",2,"text-align","center"],[1,"col-md-6"],["pButton","","type","button","icon","pi pi-check","label","Complete process","class","p-button-success p-button-sm float-right mb-2 animate-flicker",3,"click",4,"ngIf"],["pSortableColumn","name",2,"width","15rem"],["field","name"],["pSortableColumn","category.name",2,"width","15rem"],["field","category.name"],[2,"width","20rem"],["appendTo","body","placeholder","All","styleClass","ui-column-filter","optionLabel","name",3,"options","onChange"],[1,"ui-multiselect-representative-option",2,"display","grid"],["label","Confirm","icon","pi pi-arrow-right","iconPos","right","styleClass","p-button-primary p-button-outlined p-button-sm",3,"onClick",4,"ngIf"],["severity","warn","text","Missing units","styleClass","mr-2",4,"ngIf"],["label","Confirm","icon","pi pi-arrow-right","iconPos","right","styleClass","p-button-primary p-button-outlined p-button-sm",3,"onClick"],["severity","warn","text","Missing units","styleClass","mr-2"],["pButton","","type","button","icon","pi pi-check","label","Complete process",1,"p-button-success","p-button-sm","float-right","mb-2","animate-flicker",3,"click"],["colspan","4"],["label","Delete","icon","pi pi-trash","iconPos","right","styleClass","p-button-danger p-button-outlined p-button-sm",3,"onClick"],["appendTo","body","modal","true",3,"header","closable","visible","baseZIndex","visibleChange"],["autocomplete","off",3,"ngSubmit",4,"ngIf"],[3,"message","showNotification",4,"ngIf"],["bdOpacity","#fff","name","confirm","bdColor","rgba(255,255,255,0.76)","size","medium","color","#02926e","type","ball-clip-rotate",3,"fullScreen"],["class","p-field pb-3",4,"ngFor","ngForOf"],["type","submit","pButton","","icon","pi pi-check","label","Save",1,"p-button-success","p-button-sm","mr-5","float-right",3,"disabled"],["for","unitq"],["id","float","name","float","required","","type","number","pattern","[0-9]+","pInputNumber","",1,"form-control",3,"ngModel","ngModelChange"],[3,"message","showNotification"],["selectionMode","single","responsiveLayout","scroll",3,"value","paginator","rows"],[4,"ngFor","ngForOf"]],template:function(o,n){1&o&&(t.YNc(0,bt,12,12,"div",0),t.YNc(1,Zt,17,9,"p-dialog",1),t.TgZ(2,"p-dialog",2),t.NdJ("visibleChange",function(a){return n.showItemsDialog=a})("onHide",function(){return n.showItemsDialog=!1}),t.ALo(3,"date"),t.ALo(4,"titlecase"),t.TgZ(5,"div",3)(6,"div",4),t.YNc(7,Nt,5,11,"p-table",5),t.qZA()()(),t.TgZ(8,"p-dialog",2),t.NdJ("visibleChange",function(a){return n.showStockTakingDialog=a})("onHide",function(){return n.showStockTakingDialog=!1,n.ngOnInit()}),t.ALo(9,"date"),t.ALo(10,"titlecase"),t.YNc(11,Pt,22,23,"div",0),t.TgZ(12,"ngx-spinner",6),t._UZ(13,"p",7),t.qZA()(),t.YNc(14,Gt,6,12,"p-dialog",8),t.TgZ(15,"p-overlayPanel",9,10),t.YNc(17,$t,3,4,"ng-template",11),t.qZA(),t.TgZ(18,"p-overlayPanel",9,12),t.YNc(20,oo,3,4,"ng-template",11),t.qZA(),t.TgZ(21,"p-overlayPanel",9,13),t.YNc(23,so,3,4,"ng-template",11),t.qZA(),t.TgZ(24,"ngx-spinner",14),t._UZ(25,"p",7),t.qZA(),t._UZ(26,"p-confirmDialog",15)),2&o&&(t.Q6J("ngIf",!n.loading),t.xp6(1),t.Q6J("ngIf",n.showStartLocation),t.xp6(1),t.Akn(t.DdM(44,ro)),t.Q6J("header",n.showItemsDialog?"Stock taking done on "+t.xi3(3,34,n.dateToConfirm.date_started,"fullDate")+" for location "+t.lcZ(4,37,n.dateToConfirm.location.name):"")("closable",!0)("visible",n.showItemsDialog)("baseZIndex",1e4),t.xp6(5),t.Q6J("ngIf",n.showItemsDialog),t.xp6(1),t.Akn(t.DdM(45,co)),t.Q6J("header",n.showStockTakingDialog?"Stock taking done on "+t.xi3(9,39,n.dateToConfirm.date_started,"fullDate")+" for location "+t.lcZ(10,42,n.dateToConfirm.location.name):"")("closable",!0)("visible",n.showStockTakingDialog)("baseZIndex",1e4),t.xp6(3),t.Q6J("ngIf",n.showStockTakingDialog),t.xp6(1),t.Q6J("fullScreen",!0),t.xp6(2),t.Q6J("ngIf",n.showConfirmForm),t.xp6(1),t.Akn(t.DdM(46,Q)),t.Q6J("@enter",void 0)("showCloseIcon",!1),t.xp6(3),t.Akn(t.DdM(47,Q)),t.Q6J("@enter",void 0)("showCloseIcon",!1),t.xp6(3),t.Akn(t.DdM(48,Q)),t.Q6J("@enter",void 0)("showCloseIcon",!1),t.xp6(3),t.Q6J("fullScreen",!0),t.xp6(2),t.Akn(t.DdM(49,Y)),t.Q6J("baseZIndex",1e4))},dependencies:[h.sg,h.O5,J.Ro,g._Y,g.Fj,g.wV,g.JJ,g.JL,g.Q7,g.c5,g.On,g.F,$.V,M.$_,M.jx,z.Q,D.Hq,D.zx,N.iA,N.lQ,N.fz,W.NU,X.o,tt.Lt,y.jt,y.iD,y.Vi,y.TH,ot.T,et.q,nt.zH,it.q,at.c,h.JJ,h.rS,h.uU],styles:["label[_ngcontent-%COMP%]{text-transform:none}[_nghost-%COMP%]     p-colorpicker .p-colorpicker .p-colorpicker-preview{border-radius:30px}[_nghost-%COMP%]     p-dialog .p-dialog-header{border-radius:30px!important}[_nghost-%COMP%]     .p-dialog .p-dialog-footer{border-bottom-right-radius:30px}"],data:{animation:[(0,u.X$)("enter",[(0,u.eR)("void => *",[(0,u.oB)({opacity:0}),(0,u.jt)(1e3,(0,u.oB)({opacity:1}))])])]}}),e})(),data:{title:"Locations"}}];let po=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[x.Bz.forChild(lo),x.Bz]}),e})(),_o=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[po,_.U]}),e})()}}]);