"use strict";(self.webpackChunkmatngular=self.webpackChunkmatngular||[]).push([[841],{2841:(vn,z,Z)=>{Z.d(z,{E:()=>An,_:()=>y});var K=Z(2340),t=Z(4650),d=Z(6895),X=Z(6498),B=Z(7340),tt=Z(8423),et=Z(3166),it=Z(7185),ot=Z(1927),nt=Z(1932),st=Z(805),at=Z(9775);const lt=["dt1"],rt=["dt2"],_t=["op"],ct=["searchInput"];function pt(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"p-button",54),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.displayWaitingCustomers=!0)}),t.qZA()}if(2&o){const e=t.oxw(2);t.s9C("badge",e.waitingCustomers.length)}}function dt(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"p-button",55),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.showPrintDialog=!0)}),t.qZA()}}function ht(o,a){1&o&&(t.TgZ(0,"th",57),t._uU(1," Location "),t.qZA())}function ut(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"tr")(1,"th",56),t._uU(2,"Name"),t.qZA(),t.TgZ(3,"th",57),t._uU(4,"Available"),t.qZA(),t.YNc(5,ht,2,0,"th",58),t.TgZ(6,"th",57),t._uU(7,"Unit"),t.qZA(),t.TgZ(8,"th",57),t._uU(9,"Qty"),t.qZA(),t.TgZ(10,"th",57),t._uU(11,"Price"),t.qZA(),t.TgZ(12,"th",57),t._uU(13,"Total"),t.qZA(),t._UZ(14,"th",59),t.qZA(),t.TgZ(15,"tr")(16,"th")(17,"input",60,61),t.NdJ("input",function(n){t.CHM(e),t.oxw();const s=t.MAs(14);return t.KtG(s.filterGlobal(n.target.value,"contains"))}),t.qZA()()()}if(2&o){const e=t.oxw(2);t.xp6(5),t.Q6J("ngIf",e.userHasMultipleLocations),t.xp6(11),t.uIk("colspan",e.userHasMultipleLocations?"8":"7")}}const U=function(o){return{"background-color":o,color:"#ffffff",cursor:"pointer"}};function mt(o,a){if(1&o&&t._UZ(0,"p-avatar",70),2&o){const e=a.index,i=t.oxw(4);t.Akn(t.VKq(2,U,i.locations[e].color))}}const L=function(){return[]};function gt(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"p-avatarGroup",68),t.NdJ("click",function(n){t.CHM(e);const s=t.oxw().$implicit,l=t.oxw(2);return t.KtG(l.showLocationsQuantityNew(s,n))}),t.YNc(1,mt,1,4,"p-avatar",69),t.qZA()}if(2&o){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",t.DdM(1,L).constructor(e.locations_count))}}function xt(o,a){1&o&&(t.TgZ(0,"small",71),t._uU(1," Missing units "),t.qZA())}function ft(o,a){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&o){const e=a.$implicit;t.xp6(1),t.Oqu(e.location.name)}}function Ct(o,a){if(1&o&&(t.TgZ(0,"div",77)(1,"div"),t._uU(2),t.qZA()()),2&o){const e=a.$implicit;t.xp6(2),t.Oqu(e.location.name)}}function Tt(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"p-dropdown",74),t.NdJ("onChange",function(n){t.CHM(e);const s=t.oxw(5);return t.KtG(s.newLocationSelected(n))})("ngModelChange",function(n){t.CHM(e);const s=t.oxw(5);return t.KtG(s.selectedItem.location=n)})("keydown.enter",function(n){t.CHM(e);const s=t.oxw(3).$implicit,l=t.oxw(2);return t.KtG(l.focusNext1(n,"qty2"+l.getName(s.name)))}),t.YNc(1,ft,2,1,"ng-template",75),t.YNc(2,Ct,3,1,"ng-template",76),t.qZA()}if(2&o){const e=t.oxw(3).$implicit,i=t.oxw(2);t.Q6J("options",i.selectedItem.locations)("disabled",0==e.min_unit_ok)("ngModel",i.selectedItem.location)("filter",!1)}}function St(o,a){if(1&o&&t._uU(0),2&o){const e=t.oxw(5);t.hij(" ",null!=e.selectedItem.location?e.selectedItem.location.location.name:""," ")}}function yt(o,a){1&o&&(t.TgZ(0,"p-cellEditor"),t.YNc(1,Tt,3,4,"ng-template",72),t.YNc(2,St,1,1,"ng-template",73),t.qZA())}function At(o,a){if(1&o&&(t.TgZ(0,"td"),t.YNc(1,yt,3,0,"p-cellEditor",65),t.qZA()),2&o){const e=t.oxw().$implicit,i=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.id==i.selectedItem.id)}}function vt(o,a){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&o){const e=a.$implicit;t.xp6(1),t.Oqu(e.unit_name)}}function bt(o,a){if(1&o&&(t.TgZ(0,"div",77)(1,"div"),t._uU(2),t.qZA()()),2&o){const e=a.$implicit;t.xp6(2),t.Oqu(e.unit_name)}}function wt(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"p-dropdown",78),t.NdJ("onChange",function(n){t.CHM(e);const s=t.oxw(2).$implicit,l=t.oxw(2);return t.KtG(l.newUnitSelected(n,"qty2"+l.getName(s.name)))})("ngModelChange",function(n){t.CHM(e);const s=t.oxw(4);return t.KtG(s.selectedItem.unit=n)}),t.YNc(1,vt,2,1,"ng-template",75),t.YNc(2,bt,3,1,"ng-template",76),t.qZA()}if(2&o){const e=t.oxw(4);t.Q6J("options",e.selectedItem.selling_units)("disabled",e.selectedItem.selling_units.length<1||null==e.selectedItem.location)("ngModel",e.selectedItem.unit)("filter",!1)}}function Zt(o,a){if(1&o&&t._uU(0),2&o){const e=t.oxw(4);t.hij(" ",e.selectedItem.unit?e.selectedItem.unit.unit_name:""," ")}}function qt(o,a){1&o&&(t.TgZ(0,"p-cellEditor"),t.YNc(1,wt,3,4,"ng-template",72),t.YNc(2,Zt,1,1,"ng-template",73),t.qZA())}function Mt(o,a){if(1&o&&(t.TgZ(0,"p",81)(1,"small",82)(2,"i",83),t._uU(3),t.qZA()()()),2&o){const e=t.oxw(5);t.xp6(3),t.Oqu(e.quantityError)}}function Et(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"input",79),t.NdJ("ngModelChange",function(n){t.CHM(e);const s=t.oxw(4);return t.KtG(s.selectedItem.sell_qty=n)})("input",function(){t.CHM(e);const n=t.oxw(4);return t.KtG(n.confirmQuantityNew())})("keydown.enter",function(){t.CHM(e);const n=t.oxw(2).$implicit,s=t.oxw(2);return t.KtG(s.focusNext("price2"+s.getName(n.name)))}),t.qZA(),t.YNc(1,Mt,4,1,"p",80)}if(2&o){const e=t.oxw(2).$implicit,i=t.oxw(2);t.MGl("id","qty2",i.getName(e.name),""),t.Q6J("ngModel",i.selectedItem.sell_qty),t.xp6(1),t.Q6J("ngIf",""!=i.quantityError)}}function It(o,a){if(1&o&&(t._uU(0),t.ALo(1,"number")),2&o){const e=t.oxw(4);t.hij(" ",t.lcZ(1,1,e.selectedItem.sell_qty)," ")}}function Dt(o,a){1&o&&(t.TgZ(0,"p-cellEditor"),t.YNc(1,Et,2,3,"ng-template",72),t.YNc(2,It,2,3,"ng-template",73),t.qZA())}function kt(o,a){if(1&o&&(t.TgZ(0,"p",81)(1,"small",82)(2,"i",83),t._uU(3),t.qZA()()()),2&o){const e=t.oxw(5);t.xp6(3),t.Oqu(e.priceError)}}function Nt(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"input",84),t.NdJ("ngModelChange",function(n){t.CHM(e);const s=t.oxw(4);return t.KtG(s.selectedItem.sold_price=n)})("input",function(){t.CHM(e);const n=t.oxw(4);return t.KtG(n.confirmSellPrice())})("keydown.enter",function(){t.CHM(e);const n=t.oxw(2).$implicit,s=t.oxw(2);return t.KtG(s.focusNext("save2"+s.getName(n.name)))}),t.qZA(),t.YNc(1,kt,4,1,"p",80)}if(2&o){const e=t.oxw(2).$implicit,i=t.oxw(2);t.MGl("id","price2",i.getName(e.name),""),t.Q6J("disabled",""!=i.quantityError||i.selectedItem.sell_qty<1)("ngModel",i.selectedItem.sold_price),t.xp6(1),t.Q6J("ngIf",""!=i.priceError)}}function Ut(o,a){if(1&o&&(t._uU(0),t.ALo(1,"currency")),2&o){const e=t.oxw(4);t.hij(" ",t.xi3(1,1,e.selectedItem.sold_price,"Ksh")," ")}}function Lt(o,a){1&o&&(t.TgZ(0,"p-cellEditor"),t.YNc(1,Nt,2,4,"ng-template",72),t.YNc(2,Ut,2,4,"ng-template",73),t.qZA())}function Ft(o,a){if(1&o&&(t.TgZ(0,"p",85),t._uU(1),t.ALo(2,"number"),t.qZA()),2&o){const e=t.oxw(3);t.xp6(1),t.hij(" ",t.lcZ(2,1,e.selectedItem.sell_qty*e.selectedItem.sold_price)," ")}}function Jt(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"button",91),t.NdJ("click",function(n){t.CHM(e);const s=t.oxw(2).$implicit,l=t.oxw(2);return t.KtG(l.onRowEditInit(n,s))}),t.qZA()}}function Pt(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"button",92),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit,s=t.oxw(2);return t.KtG(s.onRowEditSave(n))}),t.qZA()}if(2&o){const e=t.oxw(2).$implicit,i=t.oxw(2);t.MGl("id","save2",i.getName(e.name),""),t.Q6J("disabled",""!=i.quantityError||i.selectedItem.sell_qty<1||""!=i.priceError||i.selectedItem.sold_price<=0||null==i.selectedItem.location||!i.confirmQuantityIsNumber())}}function Qt(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"button",93),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2),s=n.$implicit,l=n.rowIndex,_=t.oxw(2);return t.KtG(_.onRowEditCancel(s,l))}),t.qZA()}}function Bt(o,a){1&o&&t._UZ(0,"div",94)}function Ot(o,a){if(1&o&&(t.TgZ(0,"div",86),t.YNc(1,Jt,1,0,"button",87),t.YNc(2,Pt,1,2,"button",88),t.YNc(3,Qt,1,0,"button",89),t.YNc(4,Bt,1,0,"div",90),t.qZA()),2&o){const e=t.oxw().$implicit,i=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.id!=i.selectedItem.id&&i.loaderToShow!=e.id),t.xp6(1),t.Q6J("ngIf",e.id==i.selectedItem.id&&i.loaderToShow!=e.id),t.xp6(1),t.Q6J("ngIf",e.id==i.selectedItem.id&&i.loaderToShow!=e.id),t.xp6(1),t.Q6J("ngIf",i.loaderToShow==e.id)}}function Gt(o,a){if(1&o&&(t.TgZ(0,"tr",62)(1,"td"),t._uU(2),t.ALo(3,"titlecase"),t.qZA(),t.TgZ(4,"td"),t.YNc(5,gt,2,2,"p-avatarGroup",63),t.YNc(6,xt,2,0,"small",64),t.qZA(),t.YNc(7,At,2,1,"td",65),t.TgZ(8,"td"),t.YNc(9,qt,3,0,"p-cellEditor",65),t.qZA(),t.TgZ(10,"td"),t.YNc(11,Dt,3,0,"p-cellEditor",65),t.qZA(),t.TgZ(12,"td"),t.YNc(13,Lt,3,0,"p-cellEditor",65),t.qZA(),t.TgZ(14,"td"),t.YNc(15,Ft,3,3,"p",66),t.qZA(),t.TgZ(16,"td"),t.YNc(17,Ot,5,4,"div",67),t.qZA()()),2&o){const e=a.$implicit,i=t.oxw(2);t.Q6J("pEditableRow",e),t.xp6(2),t.hij(" ",t.lcZ(3,10,e.name)," "),t.xp6(3),t.Q6J("ngIf",e.locations_count>0&&1==e.min_unit_ok),t.xp6(1),t.Q6J("ngIf",0==e.min_unit_ok),t.xp6(1),t.Q6J("ngIf",i.userHasMultipleLocations),t.xp6(2),t.Q6J("ngIf",e.id==i.selectedItem.id&&i.selectedItem.selling_units),t.xp6(2),t.Q6J("ngIf",e.id==i.selectedItem.id),t.xp6(2),t.Q6J("ngIf",e.id==i.selectedItem.id),t.xp6(2),t.Q6J("ngIf",e.id==i.selectedItem.id),t.xp6(2),t.Q6J("ngIf",e.locations_count>0)}}function Yt(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"tr",95)(1,"th",96),t._uU(2,"Item "),t.qZA(),t.TgZ(3,"th",57),t._uU(4,"Unit "),t.qZA(),t.TgZ(5,"th",96),t._uU(6,"Qty "),t.qZA(),t.TgZ(7,"th",57),t._uU(8,"Price "),t.qZA(),t.TgZ(9,"th",57),t._uU(10,"Total "),t.qZA(),t._UZ(11,"th",56),t.qZA(),t.TgZ(12,"tr")(13,"th",97)(14,"input",98),t.NdJ("input",function(n){t.CHM(e),t.oxw();const s=t.MAs(24);return t.KtG(s.filter(n.target.value,"item.name","contains"))}),t.qZA()()()}}const W=function(o){return{"word-wrap":"normal",color:o}};function Rt(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.ALo(3,"titlecase"),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.ALo(6,"titlecase"),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.ALo(9,"number"),t.qZA(),t.TgZ(10,"td"),t._uU(11),t.ALo(12,"number"),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.ALo(15,"number"),t.qZA(),t.TgZ(16,"td")(17,"h6")(18,"p-button",99),t.NdJ("onClick",function(){const s=t.CHM(e).$implicit,l=t.oxw(2);return t.KtG(l.selectEditItem(s))}),t.qZA(),t.TgZ(19,"p-button",100),t.NdJ("onClick",function(){const s=t.CHM(e).$implicit,l=t.oxw(2);return t.KtG(l.confirmDelete(s))}),t.qZA()()()()}if(2&o){const e=a.$implicit;t.Akn(t.VKq(19,W,e.location.color)),t.xp6(2),t.hij(" ",t.lcZ(3,7,e.item.name)," "),t.xp6(3),t.hij(" ",t.lcZ(6,9,e.unit.unit_name)," "),t.xp6(3),t.hij(" ",t.lcZ(9,11,e.qty)," "),t.xp6(3),t.hij(" ",t.xi3(12,13,e.sp,".2")," "),t.xp6(3),t.hij(" ",t.xi3(15,16,e.qty*e.sp,".2")," ")}}function Ht(o,a){if(1&o&&(t.TgZ(0,"div",19)(1,"div",101)(2,"div",102)(3,"div",103)(4,"h3"),t._uU(5),t.ALo(6,"number"),t.qZA()()()()()),2&o){const e=t.oxw(2);t.xp6(5),t.hij("Total: \xa0Ksh ",t.xi3(6,1,e.totalCartAmount,".2"),"")}}function Kt(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"div",104)(1,"div",105)(2,"div",106)(3,"span",107),t._uU(4," Cash received "),t.qZA(),t.TgZ(5,"input",108),t.NdJ("keyup",function(n){t.CHM(e);const s=t.oxw(2);return t.KtG(s.checkChangeToGive(n))}),t.qZA()()(),t.TgZ(6,"div",109)(7,"div",106)(8,"span",107),t._uU(9," Change "),t.qZA(),t.TgZ(10,"input",110),t.NdJ("ngModelChange",function(n){t.CHM(e);const s=t.oxw(2);return t.KtG(s.changeToGive=n)}),t.qZA()()()()}if(2&o){const e=t.oxw(2);t.xp6(10),t.Q6J("ngModel",e.changeToGive)}}function Wt(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"button",114),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(3);return n.customerToWait="",n.showNotification=!1,t.KtG(n.displayCustomerName=!0)}),t.qZA()}}function $t(o,a){if(1&o&&(t.TgZ(0,"div",111)(1,"div",112),t.YNc(2,Wt,1,0,"button",113),t.qZA()()),2&o){const e=t.oxw(2);t.xp6(2),t.Q6J("ngIf",e.userCanAddWaiting||e.userIsAdmin)}}function jt(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"div",115)(1,"app-payment-form",116),t.NdJ("status",function(n){t.CHM(e);const s=t.oxw(2);return t.KtG(s.paymentStatus(n))}),t.qZA()()}if(2&o){const e=t.oxw(2);t.Q6J("@enter",void 0),t.xp6(1),t.Q6J("totalCartAmount",e.totalCartAmount)("myCashCustomers",e.myCashCustomers)}}const R=function(){return[15,25,50]},O=function(){return["name"]},q=function(){return[10,25,50]},F=function(){return["name","description"]};function Vt(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"div",19)(1,"div",37)(2,"p-button",38),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.displayCashCustomers=!0)}),t.qZA(),t.YNc(3,pt,1,1,"p-button",39),t.YNc(4,dt,1,0,"p-button",40),t.TgZ(5,"p-button",41),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.getAllFloats())}),t.qZA(),t.TgZ(6,"p-button",42),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.getReprintData())}),t.qZA()(),t.TgZ(7,"div",43)(8,"div",44)(9,"div",45)(10,"h4",46),t._uU(11," Select customer "),t.qZA()(),t.TgZ(12,"div",47)(13,"p-table",48,49),t.YNc(15,ut,19,2,"ng-template",26),t.YNc(16,Gt,18,12,"ng-template",27),t.qZA()()()(),t.TgZ(17,"div",50)(18,"div",44)(19,"div",45)(20,"h4",46),t._uU(21," Items selected "),t.qZA()(),t.TgZ(22,"div",47)(23,"p-table",30,31),t.YNc(25,Yt,15,0,"ng-template",26),t.YNc(26,Rt,20,21,"ng-template",27),t.qZA(),t.YNc(27,Ht,7,4,"div",0),t.YNc(28,Kt,11,1,"div",51),t.YNc(29,$t,3,1,"div",52),t.qZA()(),t.YNc(30,jt,2,3,"div",53),t.qZA()()}if(2&o){const e=t.oxw();t.xp6(1),t.Q6J("@enter",void 0),t.xp6(1),t.Tol(e.cashCustomersPending?"animate-flicker":""),t.xp6(1),t.Q6J("ngIf",e.waitingCustomers.length>0&&(e.userCanAddWaiting||e.userIsAdmin)),t.xp6(1),t.Q6J("ngIf",e.userCanPrintItems||e.userIsAdmin),t.xp6(4),t.Q6J("@enter",void 0),t.xp6(5),t.Q6J("value",e.newStock)("rows",15)("showCurrentPageReport",!0)("rowsPerPageOptions",t.DdM(26,R))("paginator",!0)("filterDelay",0)("globalFilterFields",t.DdM(27,O)),t.xp6(5),t.Q6J("@enter",void 0),t.xp6(5),t.Q6J("value",e.cartItems)("rowHover",!0)("rows",10)("showCurrentPageReport",!0)("rowsPerPageOptions",t.DdM(28,q))("paginator",!0)("filterDelay",0)("globalFilterFields",t.DdM(29,F)),t.xp6(4),t.Q6J("ngIf",e.totalCartAmount>0),t.xp6(1),t.Q6J("ngIf",e.totalCartAmount>0),t.xp6(1),t.Q6J("ngIf",e.totalCartAmount>0),t.xp6(1),t.Q6J("ngIf",e.totalCartAmount>0&&e.showPayment)}}function zt(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"form",119,120),t.NdJ("ngSubmit",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.addFloat())}),t.TgZ(2,"div",19)(3,"div",22)(4,"div",121)(5,"div",122)(6,"label",123),t._uU(7,"Float amount"),t.qZA(),t.TgZ(8,"input",124),t.NdJ("ngModelChange",function(n){t.CHM(e);const s=t.oxw(2);return t.KtG(s.floatAmount=n)}),t.qZA()()()()(),t.TgZ(9,"p-footer")(10,"button",125),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.floatDialog=!1)}),t.qZA(),t._UZ(11,"button",126),t.qZA()()}if(2&o){const e=t.MAs(1),i=t.oxw(2);t.xp6(8),t.Q6J("ngModel",i.floatAmount),t.xp6(3),t.Q6J("disabled",!e.valid||i.floatAmount<1)}}const N=function(){return{width:"30vw"}};function Xt(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"p-dialog",117),t.NdJ("visibleChange",function(n){t.CHM(e);const s=t.oxw();return t.KtG(s.floatDialog=n)}),t.YNc(1,zt,12,2,"form",11),t.TgZ(2,"ngx-spinner",118),t._UZ(3,"p",14),t.qZA()()}if(2&o){const e=t.oxw();t.Akn(t.DdM(7,N)),t.Q6J("closable",!1)("visible",e.floatDialog)("baseZIndex",1e4),t.xp6(1),t.Q6J("ngIf",!e.showNotification),t.xp6(1),t.Q6J("fullScreen",!1)}}function te(o,a){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&o){const e=a.$implicit;t.xp6(1),t.Oqu(e.location.name)}}function ee(o,a){if(1&o&&(t.TgZ(0,"div",77)(1,"div"),t._uU(2),t.qZA()()),2&o){const e=a.$implicit;t.xp6(2),t.Oqu(e.location.name)}}function ie(o,a){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&o){const e=a.$implicit;t.xp6(1),t.Oqu(e.unit_name)}}function oe(o,a){if(1&o&&(t.TgZ(0,"div",77)(1,"div"),t._uU(2),t.qZA()()),2&o){const e=a.$implicit;t.xp6(2),t.Oqu(e.unit_name)}}function ne(o,a){1&o&&(t.TgZ(0,"tr")(1,"th",142),t._uU(2,"Available"),t.qZA()())}function se(o,a){if(1&o&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.ALo(3,"titlecase"),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.ALo(6,"number"),t.qZA()()),2&o){const e=a.$implicit;t.xp6(2),t.Oqu(t.lcZ(3,2,e[0])),t.xp6(3),t.Oqu(t.lcZ(6,4,e[1]))}}function ae(o,a){if(1&o&&(t.TgZ(0,"div",128)(1,"p-table",141),t.YNc(2,ne,3,0,"ng-template",26),t.YNc(3,se,7,6,"ng-template",27),t.qZA()()),2&o){const e=t.oxw(3);t.xp6(1),t.Q6J("value",e.availableUnits)("paginator",!1)("rows",10)}}function le(o,a){if(1&o&&(t.TgZ(0,"small",143),t._uU(1),t.qZA()),2&o){const e=t.oxw(3);t.xp6(1),t.hij(" ",e.quantityError," ")}}function re(o,a){1&o&&(t.TgZ(0,"small",144),t._uU(1," Selling price is lower than buying price "),t.qZA())}function _e(o,a){if(1&o&&(t.TgZ(0,"small",144),t._uU(1),t.qZA()),2&o){const e=t.oxw(3);t.xp6(1),t.hij(" ",e.priceError2," ")}}function ce(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"form",119,120),t.NdJ("ngSubmit",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.displayEditDialog?n.updateCartItem():n.addToCart())}),t.TgZ(2,"div",19)(3,"div",22)(4,"div",121)(5,"div",19)(6,"div",128)(7,"div",122)(8,"label",129),t._uU(9,"Location to sell item"),t.qZA(),t._UZ(10,"br"),t.TgZ(11,"p-dropdown",130),t.NdJ("onChange",function(n){t.CHM(e);const s=t.oxw(2);return t.KtG(s.updateLocationSelected(n))})("ngModelChange",function(n){t.CHM(e);const s=t.oxw(2);return t.KtG(s.itemToSellModel.location=n)}),t.YNc(12,te,2,1,"ng-template",75),t.YNc(13,ee,3,1,"ng-template",76),t.qZA()(),t.TgZ(14,"div",122)(15,"label",131),t._uU(16,"Unit to sell"),t.qZA(),t._UZ(17,"br"),t.TgZ(18,"p-dropdown",132),t.NdJ("onChange",function(n){t.CHM(e);const s=t.oxw(2);return t.KtG(s.updateUnitSelected(n))})("ngModelChange",function(n){t.CHM(e);const s=t.oxw(2);return t.KtG(s.itemToSellModel.unit=n)}),t.YNc(19,ie,2,1,"ng-template",75),t.YNc(20,oe,3,1,"ng-template",76),t.qZA()()(),t.YNc(21,ae,4,3,"div",133),t.qZA(),t.TgZ(22,"div",122)(23,"label",123),t._uU(24,"Unit quantity to sell"),t.qZA(),t.TgZ(25,"input",134),t.NdJ("input",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.checkQuantity())})("ngModelChange",function(n){t.CHM(e);const s=t.oxw(2);return t.KtG(s.itemToSellModel.unit_quantity=n)}),t.qZA(),t.YNc(26,le,2,1,"small",135),t.qZA(),t.TgZ(27,"div",122)(28,"label",123),t._uU(29,"Unit selling price"),t.qZA(),t.TgZ(30,"input",136),t.NdJ("input",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.confirmPrice())})("ngModelChange",function(n){t.CHM(e);const s=t.oxw(2);return t.KtG(s.itemToSellModel.unit_price=n)}),t.qZA(),t.YNc(31,re,2,0,"small",137),t.YNc(32,_e,2,1,"small",137),t.qZA(),t.TgZ(33,"div",122)(34,"label",138),t._uU(35,"Total price"),t.qZA(),t._UZ(36,"input",139),t.qZA()()()(),t.TgZ(37,"p-footer")(38,"button",125),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.hideSellForm())}),t.qZA(),t._UZ(39,"button",140),t.qZA()()}if(2&o){const e=t.MAs(1),i=t.oxw(2);t.xp6(11),t.Q6J("options",i.itemToSellModel.locations_qty)("ngModel",i.itemToSellModel.location),t.xp6(7),t.Q6J("options",i.itemToSellModel.selling_units)("disabled",!i.activateSellForm)("ngModel",i.itemToSellModel.unit),t.xp6(3),t.Q6J("ngIf",i.availableUnits!=t.DdM(17,L)),t.xp6(4),t.Q6J("disabled",!i.activateSellForm||null==i.itemToSellModel.unit)("ngModel",i.itemToSellModel.unit_quantity),t.xp6(1),t.Q6J("ngIf",""!=i.quantityError),t.xp6(4),t.Q6J("disabled",!i.activateSellForm||null==i.itemToSellModel.unit||0==i.itemToSellModel.unit_quantity)("ngModel",i.itemToSellModel.unit_price),t.xp6(1),t.Q6J("ngIf",""!=i.priceError),t.xp6(1),t.Q6J("ngIf",""!=i.priceError2),t.xp6(4),t.Q6J("disabled",!0)("value",i.itemToSellModel.total_price),t.xp6(3),t.Q6J("disabled",!e.valid||null==i.itemToSellModel.location||i.itemToSellModel.unit_quantity<1||i.itemToSellModel.unit_price<0||null==i.itemToSellModel.unit||""!=i.priceError||""!=i.priceError2||""!=i.quantityError||""!=i.discountError||!i.activateSellForm||i.buttonClicked)("label",i.displayEditDialog?"Save":"Add to list")}}function pe(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"p-dialog",32),t.NdJ("visibleChange",function(n){t.CHM(e);const s=t.oxw();return t.KtG(s.displaySellDialog=n)}),t.YNc(1,ce,40,18,"form",11),t.TgZ(2,"ngx-spinner",127),t._UZ(3,"p",14),t.qZA()()}if(2&o){const e=t.oxw();t.Akn(t.DdM(8,N)),t.s9C("header",e.itemToSellModel.name),t.Q6J("closable",!1)("visible",e.displaySellDialog)("baseZIndex",1e4),t.xp6(1),t.Q6J("ngIf",!e.showNotification),t.xp6(1),t.Q6J("fullScreen",!1)}}function de(o,a){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&o){const e=a.$implicit;t.xp6(1),t.Oqu(e.location.name)}}function he(o,a){if(1&o&&(t.TgZ(0,"div",77)(1,"div"),t._uU(2),t.qZA()()),2&o){const e=a.$implicit;t.xp6(2),t.Oqu(e.location.name)}}function ue(o,a){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&o){const e=a.$implicit;t.xp6(1),t.Oqu(e.unit_name)}}function me(o,a){if(1&o&&(t.TgZ(0,"div",77)(1,"div"),t._uU(2),t.qZA()()),2&o){const e=a.$implicit;t.xp6(2),t.Oqu(e.unit_name)}}function ge(o,a){1&o&&(t.TgZ(0,"tr")(1,"th",142),t._uU(2,"Available"),t.qZA()())}function xe(o,a){if(1&o&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.ALo(3,"titlecase"),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.ALo(6,"number"),t.qZA()()),2&o){const e=a.$implicit;t.xp6(2),t.Oqu(t.lcZ(3,2,e[0])),t.xp6(3),t.Oqu(t.lcZ(6,4,e[1]))}}function fe(o,a){if(1&o&&(t.TgZ(0,"div",128)(1,"p-table",141),t.YNc(2,ge,3,0,"ng-template",26),t.YNc(3,xe,7,6,"ng-template",27),t.qZA()()),2&o){const e=t.oxw(3);t.xp6(1),t.Q6J("value",e.availableUnits)("paginator",!1)("rows",10)}}function Ce(o,a){if(1&o&&(t.TgZ(0,"small",143),t._uU(1),t.qZA()),2&o){const e=t.oxw(3);t.xp6(1),t.hij(" ",e.quantityError," ")}}function Te(o,a){1&o&&(t.TgZ(0,"small",144),t._uU(1," Selling price is lower than buying price "),t.qZA())}function Se(o,a){if(1&o&&(t.TgZ(0,"small",144),t._uU(1),t.qZA()),2&o){const e=t.oxw(3);t.xp6(1),t.hij(" ",e.priceError2," ")}}function ye(o,a){1&o&&(t.TgZ(0,"small",144),t._uU(1," Selling price is lower than buying price "),t.qZA())}function Ae(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"form",119,120),t.NdJ("ngSubmit",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.displayEditDialog?n.updateCartItemWaiting():n.addToCartWaiting())}),t.TgZ(2,"div",19)(3,"div",22)(4,"div",121)(5,"div",19)(6,"div",128)(7,"div",122)(8,"label",129),t._uU(9,"Location to sell item"),t.qZA(),t._UZ(10,"br"),t.TgZ(11,"p-dropdown",130),t.NdJ("onChange",function(n){t.CHM(e);const s=t.oxw(2);return t.KtG(s.updateLocationSelected(n))})("ngModelChange",function(n){t.CHM(e);const s=t.oxw(2);return t.KtG(s.itemToSellModel.location=n)}),t.YNc(12,de,2,1,"ng-template",75),t.YNc(13,he,3,1,"ng-template",76),t.qZA()(),t.TgZ(14,"div",122)(15,"label",131),t._uU(16,"Unit to sell"),t.qZA(),t._UZ(17,"br"),t.TgZ(18,"p-dropdown",132),t.NdJ("onChange",function(n){t.CHM(e);const s=t.oxw(2);return t.KtG(s.updateUnitSelected(n))})("ngModelChange",function(n){t.CHM(e);const s=t.oxw(2);return t.KtG(s.itemToSellModel.unit=n)}),t.YNc(19,ue,2,1,"ng-template",75),t.YNc(20,me,3,1,"ng-template",76),t.qZA()()(),t.YNc(21,fe,4,3,"div",133),t.qZA(),t.TgZ(22,"div",122)(23,"label",123),t._uU(24,"Unit quantity to sell"),t.qZA(),t.TgZ(25,"input",134),t.NdJ("input",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.checkQuantity())})("ngModelChange",function(n){t.CHM(e);const s=t.oxw(2);return t.KtG(s.itemToSellModel.unit_quantity=n)}),t.qZA(),t.YNc(26,Ce,2,1,"small",135),t.qZA(),t.TgZ(27,"div",122)(28,"label",123),t._uU(29,"Unit selling price"),t.qZA(),t.TgZ(30,"input",136),t.NdJ("input",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.confirmPrice())})("ngModelChange",function(n){t.CHM(e);const s=t.oxw(2);return t.KtG(s.itemToSellModel.unit_price=n)}),t.qZA(),t.YNc(31,Te,2,0,"small",137),t.YNc(32,Se,2,1,"small",137),t.qZA(),t.TgZ(33,"div",122)(34,"label",138),t._uU(35,"Total price"),t.qZA(),t._UZ(36,"input",139),t.YNc(37,ye,2,0,"small",137),t.qZA()()()(),t.TgZ(38,"p-footer")(39,"button",125),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.hideSellFormWaiting())}),t.qZA(),t._UZ(40,"button",140),t.qZA()()}if(2&o){const e=t.MAs(1),i=t.oxw(2);t.xp6(11),t.Q6J("options",i.itemToSellModel.locations_qty)("ngModel",i.itemToSellModel.location),t.xp6(7),t.Q6J("options",i.itemToSellModel.selling_units)("disabled",!i.activateSellForm)("ngModel",i.itemToSellModel.unit),t.xp6(3),t.Q6J("ngIf",i.availableUnits!=t.DdM(18,L)),t.xp6(4),t.Q6J("disabled",!i.activateSellForm||null==i.itemToSellModel.unit)("ngModel",i.itemToSellModel.unit_quantity),t.xp6(1),t.Q6J("ngIf",""!=i.quantityError),t.xp6(4),t.Q6J("disabled",!i.activateSellForm||null==i.itemToSellModel.unit||0==i.itemToSellModel.unit_quantity)("ngModel",i.itemToSellModel.unit_price),t.xp6(1),t.Q6J("ngIf",""!=i.priceError),t.xp6(1),t.Q6J("ngIf",""!=i.priceError2),t.xp6(4),t.Q6J("disabled",!0)("value",i.itemToSellModel.total_price),t.xp6(1),t.Q6J("ngIf",""!=i.priceError),t.xp6(3),t.Q6J("disabled",!e.valid||null==i.itemToSellModel.location||i.itemToSellModel.unit_quantity<1||i.itemToSellModel.unit_price<0||""!=i.priceError2||null==i.itemToSellModel.unit||""!=i.priceError||""!=i.quantityError||""!=i.discountError||!i.activateSellForm||i.buttonClicked)("label",i.displayEditDialog?"Save":"Add to list")}}function ve(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"p-dialog",32),t.NdJ("visibleChange",function(n){t.CHM(e);const s=t.oxw();return t.KtG(s.displaySellDialogWaiting=n)}),t.YNc(1,Ae,41,19,"form",11),t.TgZ(2,"ngx-spinner",145),t._UZ(3,"p",14),t.qZA()()}if(2&o){const e=t.oxw();t.Akn(t.DdM(8,N)),t.s9C("header",e.itemToSellModel.name),t.Q6J("closable",!1)("visible",e.displaySellDialogWaiting)("baseZIndex",1e4),t.xp6(1),t.Q6J("ngIf",!e.showNotification),t.xp6(1),t.Q6J("fullScreen",!1)}}const H=function(){return{width:"35vw"}};function be(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"p-dialog",146),t.NdJ("visibleChange",function(n){t.CHM(e);const s=t.oxw();return t.KtG(s.displayPaymentForm=n)}),t.TgZ(1,"app-payment-form",116),t.NdJ("status",function(n){t.CHM(e);const s=t.oxw();return t.KtG(s.paymentStatus(n))}),t.qZA()()}if(2&o){const e=t.oxw();t.Akn(t.DdM(7,H)),t.Q6J("closable",!1)("visible",e.displayPaymentForm)("baseZIndex",1e4),t.xp6(1),t.Q6J("totalCartAmount",e.totalCartAmount)("myCashCustomers",e.myCashCustomers)}}function we(o,a){1&o&&(t.TgZ(0,"tr",95)(1,"th"),t._uU(2,"Customer name "),t.qZA(),t.TgZ(3,"th"),t._uU(4,"Total amount "),t.qZA(),t._UZ(5,"th"),t.qZA())}function Ze(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"tr",151)(1,"td",152)(2,"label"),t._uU(3),t.ALo(4,"titlecase"),t.qZA()(),t.TgZ(5,"td"),t._uU(6),t.ALo(7,"number"),t.qZA(),t.TgZ(8,"td")(9,"button",153),t.NdJ("click",function(){const s=t.CHM(e).$implicit,l=t.oxw(2);return t.KtG(l.showWaitingCustomer(s))}),t.qZA()()()}if(2&o){const e=a.$implicit;t.xp6(3),t.hij(" ",t.lcZ(4,2,e.customer)," "),t.xp6(3),t.hij(" ",t.xi3(7,4,e.total,".2")," ")}}function qe(o,a){1&o&&(t.TgZ(0,"tr")(1,"td",154),t._uU(2,"No items found."),t.qZA()())}const $=function(){return{width:"50vw"}},Me=function(){return["customer"]};function Ee(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"p-dialog",147),t.NdJ("visibleChange",function(n){t.CHM(e);const s=t.oxw();return t.KtG(s.displayWaitingCustomers=n)}),t.TgZ(1,"p-table",30,148),t.YNc(3,we,6,0,"ng-template",26),t.YNc(4,Ze,10,7,"ng-template",27),t.YNc(5,qe,3,0,"ng-template",28),t.qZA(),t.TgZ(6,"p-footer")(7,"button",149),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return n.displayWaitingCustomers=!1,t.KtG(n.ngOnInit())}),t.qZA()(),t.TgZ(8,"ngx-spinner",150),t._UZ(9,"p",14),t.qZA()()}if(2&o){const e=t.oxw();t.Akn(t.DdM(14,$)),t.Q6J("closable",!1)("visible",e.displayWaitingCustomers)("baseZIndex",1e4),t.xp6(1),t.Q6J("value",e.waitingCustomers)("rowHover",!0)("rows",10)("showCurrentPageReport",!0)("rowsPerPageOptions",t.DdM(15,q))("paginator",!0)("filterDelay",0)("globalFilterFields",t.DdM(16,Me)),t.xp6(7),t.Q6J("fullScreen",!1)}}function Ie(o,a){1&o&&(t.TgZ(0,"tr",95)(1,"th"),t._uU(2,"Transaction code "),t.qZA(),t.TgZ(3,"th"),t._uU(4,"Total amount "),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Time of sale "),t.qZA()())}function De(o,a){if(1&o&&(t.TgZ(0,"tr",151)(1,"td",152)(2,"label"),t._uU(3),t.qZA()(),t.TgZ(4,"td"),t._uU(5),t.ALo(6,"number"),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA()()),2&o){const e=a.$implicit,i=t.oxw(2);t.xp6(3),t.hij(" ",e.transaction_code," "),t.xp6(2),t.hij(" ",t.xi3(6,3,e.total,".2")," "),t.xp6(3),t.hij(" ",i.getTimeValue(e.date_sold)," ")}}function ke(o,a){1&o&&(t.TgZ(0,"tr")(1,"td",154),t._uU(2,"No items found."),t.qZA()())}const Ne=function(){return["transaction_code"]};function Ue(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"p-dialog",155),t.NdJ("visibleChange",function(n){t.CHM(e);const s=t.oxw();return t.KtG(s.displayDuplicatedSales=n)}),t.TgZ(1,"p-table",30,148),t.YNc(3,Ie,7,0,"ng-template",26),t.YNc(4,De,9,6,"ng-template",27),t.YNc(5,ke,3,0,"ng-template",28),t.qZA(),t.TgZ(6,"p-footer")(7,"button",149),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return n.displayDuplicatedSales=!1,t.KtG(n.ngOnInit())}),t.qZA()(),t.TgZ(8,"ngx-spinner",150),t._UZ(9,"p",14),t.qZA()()}if(2&o){const e=t.oxw();t.Akn(t.DdM(14,$)),t.Q6J("closable",!1)("visible",e.displayDuplicatedSales)("baseZIndex",1e4),t.xp6(1),t.Q6J("value",e.duplicatedSales)("rowHover",!0)("rows",10)("showCurrentPageReport",!0)("rowsPerPageOptions",t.DdM(15,q))("paginator",!0)("filterDelay",0)("globalFilterFields",t.DdM(16,Ne)),t.xp6(7),t.Q6J("fullScreen",!1)}}function Le(o,a){1&o&&(t.TgZ(0,"th",57),t._uU(1," Location "),t.qZA())}function Fe(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"tr")(1,"th",96),t._uU(2,"Name"),t.qZA(),t.TgZ(3,"th",56),t._uU(4,"Available"),t.qZA(),t.YNc(5,Le,2,0,"th",58),t.TgZ(6,"th",56),t._uU(7,"Unit"),t.qZA(),t.TgZ(8,"th",57),t._uU(9,"Qty"),t.qZA(),t.TgZ(10,"th",57),t._uU(11,"Price"),t.qZA(),t.TgZ(12,"th",57),t._uU(13,"Total"),t.qZA(),t._UZ(14,"th",59),t.qZA(),t.TgZ(15,"tr")(16,"th")(17,"input",60,61),t.NdJ("input",function(n){t.CHM(e),t.oxw();const s=t.MAs(8);return t.KtG(s.filterGlobal(n.target.value,"contains"))}),t.qZA()()()}if(2&o){const e=t.oxw(3);t.xp6(5),t.Q6J("ngIf",e.userHasMultipleLocations),t.xp6(11),t.uIk("colspan",e.userHasMultipleLocations?"8":"7")}}function Je(o,a){if(1&o&&t._UZ(0,"p-avatar",70),2&o){const e=a.index,i=t.oxw(5);t.Akn(t.VKq(2,U,i.locations[e].color))}}function Pe(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"p-avatarGroup",68),t.NdJ("click",function(n){t.CHM(e);const s=t.oxw().$implicit,l=t.oxw(3);return t.KtG(l.showLocationsQuantityNew(s,n))}),t.YNc(1,Je,1,4,"p-avatar",69),t.qZA()}if(2&o){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",t.DdM(1,L).constructor(e.locations_count))}}function Qe(o,a){1&o&&(t.TgZ(0,"small",71),t._uU(1," Missing units "),t.qZA())}function Be(o,a){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&o){const e=a.$implicit;t.xp6(1),t.Oqu(e.location.name)}}function Oe(o,a){if(1&o&&(t.TgZ(0,"div",77)(1,"div"),t._uU(2),t.qZA()()),2&o){const e=a.$implicit;t.xp6(2),t.Oqu(e.location.name)}}function Ge(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"p-dropdown",74),t.NdJ("onChange",function(n){t.CHM(e);const s=t.oxw(6);return t.KtG(s.newLocationSelected(n))})("ngModelChange",function(n){t.CHM(e);const s=t.oxw(6);return t.KtG(s.selectedItem.location=n)})("keydown.enter",function(n){t.CHM(e);const s=t.oxw(3).$implicit,l=t.oxw(3);return t.KtG(l.focusNext1(n,"qty2"+l.getName(s.name)))}),t.YNc(1,Be,2,1,"ng-template",75),t.YNc(2,Oe,3,1,"ng-template",76),t.qZA()}if(2&o){const e=t.oxw(3).$implicit,i=t.oxw(3);t.Q6J("options",i.selectedItem.locations)("disabled",0==e.min_unit_ok)("ngModel",i.selectedItem.location)("filter",!1)}}function Ye(o,a){if(1&o&&t._uU(0),2&o){const e=t.oxw(6);t.hij(" ",null!=e.selectedItem.location?e.selectedItem.location.location.name:""," ")}}function Re(o,a){1&o&&(t.TgZ(0,"p-cellEditor"),t.YNc(1,Ge,3,4,"ng-template",72),t.YNc(2,Ye,1,1,"ng-template",73),t.qZA())}function He(o,a){if(1&o&&(t.TgZ(0,"td"),t.YNc(1,Re,3,0,"p-cellEditor",65),t.qZA()),2&o){const e=t.oxw().$implicit,i=t.oxw(3);t.xp6(1),t.Q6J("ngIf",e.id==i.selectedItem.id)}}function Ke(o,a){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&o){const e=a.$implicit;t.xp6(1),t.Oqu(e.unit_name)}}function We(o,a){if(1&o&&(t.TgZ(0,"div",77)(1,"div"),t._uU(2),t.qZA()()),2&o){const e=a.$implicit;t.xp6(2),t.Oqu(e.unit_name)}}function $e(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"p-dropdown",78),t.NdJ("onChange",function(n){t.CHM(e);const s=t.oxw(2).$implicit,l=t.oxw(3);return t.KtG(l.newUnitSelected(n,"qty22"+l.getName(s.name)))})("ngModelChange",function(n){t.CHM(e);const s=t.oxw(5);return t.KtG(s.selectedItem.unit=n)}),t.YNc(1,Ke,2,1,"ng-template",75),t.YNc(2,We,3,1,"ng-template",76),t.qZA()}if(2&o){const e=t.oxw(5);t.Q6J("options",e.selectedItem.selling_units)("disabled",e.selectedItem.selling_units.length<1||null==e.selectedItem.location)("ngModel",e.selectedItem.unit)("filter",!1)}}function je(o,a){if(1&o&&t._uU(0),2&o){const e=t.oxw(5);t.hij(" ",e.selectedItem.unit?e.selectedItem.unit.unit_name:""," ")}}function Ve(o,a){1&o&&(t.TgZ(0,"p-cellEditor"),t.YNc(1,$e,3,4,"ng-template",72),t.YNc(2,je,1,1,"ng-template",73),t.qZA())}function ze(o,a){if(1&o&&(t.TgZ(0,"p",81)(1,"small",82)(2,"i",83),t._uU(3),t.qZA()()()),2&o){const e=t.oxw(6);t.xp6(3),t.Oqu(e.quantityError)}}function Xe(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"input",79),t.NdJ("ngModelChange",function(n){t.CHM(e);const s=t.oxw(5);return t.KtG(s.selectedItem.sell_qty=n)})("input",function(){t.CHM(e);const n=t.oxw(5);return t.KtG(n.confirmQuantityNew())})("keydown.enter",function(){t.CHM(e);const n=t.oxw(2).$implicit,s=t.oxw(3);return t.KtG(s.focusNext("price22"+s.getName(n.name)))}),t.qZA(),t.YNc(1,ze,4,1,"p",80)}if(2&o){const e=t.oxw(2).$implicit,i=t.oxw(3);t.MGl("id","qty22",i.getName(e.name),""),t.Q6J("ngModel",i.selectedItem.sell_qty),t.xp6(1),t.Q6J("ngIf",""!=i.quantityError)}}function ti(o,a){if(1&o&&(t._uU(0),t.ALo(1,"number")),2&o){const e=t.oxw(5);t.hij(" ",t.lcZ(1,1,e.selectedItem.sell_qty)," ")}}function ei(o,a){1&o&&(t.TgZ(0,"p-cellEditor"),t.YNc(1,Xe,2,3,"ng-template",72),t.YNc(2,ti,2,3,"ng-template",73),t.qZA())}function ii(o,a){if(1&o&&(t.TgZ(0,"p",81)(1,"small",82)(2,"i",83),t._uU(3),t.qZA()()()),2&o){const e=t.oxw(6);t.xp6(3),t.Oqu(e.priceError)}}function oi(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"input",84),t.NdJ("ngModelChange",function(n){t.CHM(e);const s=t.oxw(5);return t.KtG(s.selectedItem.sold_price=n)})("input",function(){t.CHM(e);const n=t.oxw(5);return t.KtG(n.confirmSellPrice())})("keydown.enter",function(){t.CHM(e);const n=t.oxw(2).$implicit,s=t.oxw(3);return t.KtG(s.focusNext("save22"+s.getName(n.name)))}),t.qZA(),t.YNc(1,ii,4,1,"p",80)}if(2&o){const e=t.oxw(2).$implicit,i=t.oxw(3);t.MGl("id","price22",i.getName(e.name),""),t.Q6J("disabled",""!=i.quantityError||i.selectedItem.sell_qty<1)("ngModel",i.selectedItem.sold_price),t.xp6(1),t.Q6J("ngIf",""!=i.priceError)}}function ni(o,a){if(1&o&&(t._uU(0),t.ALo(1,"currency")),2&o){const e=t.oxw(5);t.hij(" ",t.xi3(1,1,e.selectedItem.sold_price,"Ksh")," ")}}function si(o,a){1&o&&(t.TgZ(0,"p-cellEditor"),t.YNc(1,oi,2,4,"ng-template",72),t.YNc(2,ni,2,4,"ng-template",73),t.qZA())}function ai(o,a){if(1&o&&(t.TgZ(0,"p",85),t._uU(1),t.ALo(2,"number"),t.qZA()),2&o){const e=t.oxw(4);t.xp6(1),t.hij(" ",t.lcZ(2,1,e.selectedItem.sell_qty*e.selectedItem.sold_price)," ")}}function li(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"button",91),t.NdJ("click",function(n){t.CHM(e);const s=t.oxw(2).$implicit,l=t.oxw(3);return t.KtG(l.onRowEditInitWaiting(n,s))}),t.qZA()}}function ri(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"button",92),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit,s=t.oxw(3);return t.KtG(s.onRowEditSaveWaiting(n))}),t.qZA()}if(2&o){const e=t.oxw(2).$implicit,i=t.oxw(3);t.MGl("id","save22",i.getName(e.name),""),t.Q6J("disabled",""!=i.quantityError||i.selectedItem.sell_qty<1||""!=i.priceError||i.selectedItem.sold_price<=0||null==i.selectedItem.location||!i.confirmQuantityIsNumber())}}function _i(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"button",93),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2),s=n.$implicit,l=n.rowIndex,_=t.oxw(3);return t.KtG(_.onRowEditCancel(s,l))}),t.qZA()}}function ci(o,a){1&o&&t._UZ(0,"div",94)}function pi(o,a){if(1&o&&(t.TgZ(0,"div",86),t.YNc(1,li,1,0,"button",87),t.YNc(2,ri,1,2,"button",88),t.YNc(3,_i,1,0,"button",89),t.YNc(4,ci,1,0,"div",90),t.qZA()),2&o){const e=t.oxw().$implicit,i=t.oxw(3);t.xp6(1),t.Q6J("ngIf",e.id!=i.selectedItem.id&&i.loaderToShow!=e.id),t.xp6(1),t.Q6J("ngIf",e.id==i.selectedItem.id&&i.loaderToShow!=e.id),t.xp6(1),t.Q6J("ngIf",e.id==i.selectedItem.id&&i.loaderToShow!=e.id),t.xp6(1),t.Q6J("ngIf",i.loaderToShow==e.id)}}function di(o,a){if(1&o&&(t.TgZ(0,"tr",62)(1,"td"),t._uU(2),t.ALo(3,"titlecase"),t.qZA(),t.TgZ(4,"td"),t.YNc(5,Pe,2,2,"p-avatarGroup",63),t.YNc(6,Qe,2,0,"small",64),t.qZA(),t.YNc(7,He,2,1,"td",65),t.TgZ(8,"td"),t.YNc(9,Ve,3,0,"p-cellEditor",65),t.qZA(),t.TgZ(10,"td"),t.YNc(11,ei,3,0,"p-cellEditor",65),t.qZA(),t.TgZ(12,"td"),t.YNc(13,si,3,0,"p-cellEditor",65),t.qZA(),t.TgZ(14,"td"),t.YNc(15,ai,3,3,"p",66),t.qZA(),t.TgZ(16,"td"),t.YNc(17,pi,5,4,"div",67),t.qZA()()),2&o){const e=a.$implicit,i=t.oxw(3);t.Q6J("pEditableRow",e),t.xp6(2),t.hij(" ",t.lcZ(3,10,e.name)," "),t.xp6(3),t.Q6J("ngIf",e.locations_count>0&&1==e.min_unit_ok),t.xp6(1),t.Q6J("ngIf",0==e.min_unit_ok),t.xp6(1),t.Q6J("ngIf",i.userHasMultipleLocations),t.xp6(2),t.Q6J("ngIf",e.id==i.selectedItem.id&&i.selectedItem.selling_units),t.xp6(2),t.Q6J("ngIf",e.id==i.selectedItem.id),t.xp6(2),t.Q6J("ngIf",e.id==i.selectedItem.id),t.xp6(2),t.Q6J("ngIf",e.id==i.selectedItem.id),t.xp6(2),t.Q6J("ngIf",e.locations_count>0)}}function hi(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"tr",95)(1,"th",161),t._uU(2,"Item "),t._UZ(3,"p-sortIcon",162),t.qZA(),t.TgZ(4,"th",57),t._uU(5,"Unit "),t.qZA(),t.TgZ(6,"th",57),t._uU(7,"Qty "),t.qZA(),t.TgZ(8,"th",57),t._uU(9,"Price "),t.qZA(),t.TgZ(10,"th",57),t._uU(11,"Total "),t.qZA(),t._UZ(12,"th",59),t.qZA(),t.TgZ(13,"tr")(14,"th")(15,"input",98),t.NdJ("input",function(n){t.CHM(e),t.oxw(3);const s=t.MAs(34);return t.KtG(s.filter(n.target.value,"item.name","contains"))}),t.qZA()(),t._UZ(16,"th")(17,"th")(18,"th")(19,"th")(20,"th"),t.qZA()}}function ui(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.ALo(3,"titlecase"),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.ALo(6,"titlecase"),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.ALo(9,"number"),t.qZA(),t.TgZ(10,"td"),t._uU(11),t.ALo(12,"number"),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.ALo(15,"number"),t.qZA(),t.TgZ(16,"td")(17,"p-button",163),t.NdJ("onClick",function(){const s=t.CHM(e).$implicit,l=t.oxw(3);return t.KtG(l.confirmDeleteWaiting(s))}),t.qZA()()()}if(2&o){const e=a.$implicit;t.Akn(t.VKq(19,W,e.location.color)),t.xp6(2),t.hij(" ",t.lcZ(3,7,e.item.name)," "),t.xp6(3),t.hij(" ",t.lcZ(6,9,e.unit.unit_name)," "),t.xp6(3),t.hij(" ",t.lcZ(9,11,e.qty)," "),t.xp6(3),t.hij(" ",t.xi3(12,13,e.sp,".2")," "),t.xp6(3),t.hij(" ",t.xi3(15,16,e.qty*e.sp,".2")," ")}}function mi(o,a){if(1&o&&(t.TgZ(0,"div",19)(1,"div",101)(2,"div",102)(3,"div",103)(4,"h3"),t._uU(5),t.ALo(6,"number"),t.qZA()()()()()),2&o){const e=t.oxw(3);t.xp6(5),t.hij("Total: \xa0Ksh ",t.xi3(6,1,e.totalCartAmountWaiting,".2"),"")}}function gi(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"div",104)(1,"div",105)(2,"div",106)(3,"span",107),t._uU(4," Cash received "),t.qZA(),t.TgZ(5,"input",108),t.NdJ("keyup",function(n){t.CHM(e);const s=t.oxw(3);return t.KtG(s.checkChangeToGiveWaiting(n))}),t.qZA()()(),t.TgZ(6,"div",109)(7,"div",106)(8,"span",107),t._uU(9," Change "),t.qZA(),t.TgZ(10,"input",110),t.NdJ("ngModelChange",function(n){t.CHM(e);const s=t.oxw(3);return t.KtG(s.changeToGive=n)}),t.qZA()()()()}if(2&o){const e=t.oxw(3);t.xp6(10),t.Q6J("ngModel",e.changeToGive)}}function xi(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"div",164)(1,"app-payment-form",165),t.NdJ("status",function(n){t.CHM(e);const s=t.oxw(3);return t.KtG(s.paymentStatusWaiting(n))}),t.qZA()()}if(2&o){const e=t.oxw(3);t.Q6J("@enter",void 0),t.xp6(1),t.Q6J("totalCartAmount",e.totalCartAmountWaiting)("waitingCustomer",e.waitingCustomerSelected)("myCashCustomers",e.myCashCustomers)}}function fi(o,a){if(1&o&&(t.TgZ(0,"div",19)(1,"div",157)(2,"div",44)(3,"div",45)(4,"h4",46),t._uU(5," Select item to sell "),t.qZA()(),t.TgZ(6,"div",47)(7,"p-table",48,49),t.YNc(9,Fe,19,2,"ng-template",26),t.YNc(10,di,18,12,"ng-template",27),t.qZA()()()(),t.TgZ(11,"div",158)(12,"div",44)(13,"div",45)(14,"h4",46),t._uU(15," Items selected "),t.qZA()(),t.TgZ(16,"div",47)(17,"p-table",30,159),t.YNc(19,hi,21,0,"ng-template",26),t.YNc(20,ui,18,21,"ng-template",27),t.qZA(),t.YNc(21,mi,7,4,"div",0),t.YNc(22,gi,11,1,"div",51),t.qZA()(),t.YNc(23,xi,2,4,"div",160),t.qZA()()),2&o){const e=t.oxw(2);t.xp6(2),t.Q6J("@enter",void 0),t.xp6(5),t.Q6J("value",e.newStock)("rows",15)("showCurrentPageReport",!0)("rowsPerPageOptions",t.DdM(19,R))("paginator",!0)("filterDelay",0)("globalFilterFields",t.DdM(20,O)),t.xp6(10),t.Q6J("value",e.waitingCustomerSelected.items)("rowHover",!0)("rows",10)("showCurrentPageReport",!0)("rowsPerPageOptions",t.DdM(21,q))("paginator",!0)("filterDelay",0)("globalFilterFields",t.DdM(22,F)),t.xp6(4),t.Q6J("ngIf",e.totalCartAmountWaiting>0),t.xp6(1),t.Q6J("ngIf",e.totalCartAmountWaiting>0),t.xp6(1),t.Q6J("ngIf",e.totalCartAmountWaiting>0)}}const Y=function(){return{width:"95vw"}};function Ci(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"p-dialog",32),t.NdJ("visibleChange",function(n){t.CHM(e);const s=t.oxw();return t.KtG(s.displayWaitingCustomerSelected=n)}),t.ALo(1,"titlecase"),t.YNc(2,fi,24,23,"div",0),t.TgZ(3,"p-footer")(4,"button",149),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return n.displayWaitingCustomerSelected=!1,n.totalCartAmountWaiting=0,t.KtG(n.ngOnInit())}),t.qZA()(),t.TgZ(5,"ngx-spinner",156),t._UZ(6,"p",14),t.qZA()()}if(2&o){const e=t.oxw();t.Akn(t.DdM(10,Y)),t.Q6J("header",t.lcZ(1,8,e.waitingCustomerSelected.customer))("closable",!1)("visible",e.displayWaitingCustomerSelected)("baseZIndex",1e4),t.xp6(2),t.Q6J("ngIf",e.showNew),t.xp6(3),t.Q6J("fullScreen",!0)}}function Ti(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"p-dialog",146),t.NdJ("visibleChange",function(n){t.CHM(e);const s=t.oxw();return t.KtG(s.displayPaymentFormWaiting=n)}),t.TgZ(1,"app-payment-form",165),t.NdJ("status",function(n){t.CHM(e);const s=t.oxw();return t.KtG(s.paymentStatusWaiting(n))}),t.qZA()()}if(2&o){const e=t.oxw();t.Akn(t.DdM(8,H)),t.Q6J("closable",!1)("visible",e.displayPaymentFormWaiting)("baseZIndex",1e4),t.xp6(1),t.Q6J("totalCartAmount",e.totalCartAmountWaiting)("waitingCustomer",e.waitingCustomerSelected)("myCashCustomers",e.myCashCustomers)}}function Si(o,a){1&o&&(t.TgZ(0,"tr",95)(1,"th"),t._uU(2,"Amount"),t.qZA(),t._UZ(3,"th"),t.qZA())}function yi(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"tr",151)(1,"td"),t._uU(2),t.ALo(3,"number"),t.qZA(),t.TgZ(4,"td")(5,"p-button",167),t.NdJ("onClick",function(){const s=t.CHM(e).$implicit,l=t.oxw(2);return t.KtG(l.deleteFloat(s))}),t.qZA()()()}if(2&o){const e=a.$implicit;t.xp6(2),t.hij(" ",t.xi3(3,1,e.amount,".2")," ")}}function Ai(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"p-dialog",10),t.NdJ("visibleChange",function(n){t.CHM(e);const s=t.oxw();return t.KtG(s.displayFloatDialog=n)}),t.TgZ(1,"div",19)(2,"h3",20)(3,"p-button",166),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.showFloat())}),t.qZA()(),t.TgZ(4,"div",22)(5,"p-table",30,25),t.YNc(7,Si,4,0,"ng-template",26),t.YNc(8,yi,6,4,"ng-template",27),t.qZA()()(),t.TgZ(9,"p-footer")(10,"button",149),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return n.displayFloatDialog=!1,t.KtG(n.ngOnInit())}),t.qZA()(),t.TgZ(11,"ngx-spinner",118),t._UZ(12,"p",14),t.qZA()()}if(2&o){const e=t.oxw();t.Akn(t.DdM(14,N)),t.Q6J("closable",!1)("visible",e.displayFloatDialog)("baseZIndex",1e4),t.xp6(5),t.Q6J("value",e.floatAmounts)("rowHover",!0)("rows",10)("showCurrentPageReport",!0)("rowsPerPageOptions",t.DdM(15,q))("paginator",!0)("filterDelay",0)("globalFilterFields",t.DdM(16,F)),t.xp6(6),t.Q6J("fullScreen",!0)}}function vi(o,a){if(1&o&&(t.TgZ(0,"th"),t._uU(1),t.ALo(2,"titlecase"),t.ALo(3,"number"),t.TgZ(4,"p",169)(5,"i",170),t._uU(6),t.ALo(7,"number"),t.qZA()()()),2&o){const e=a.$implicit;t.xp6(1),t.AsE(" ",t.lcZ(2,3,e.unit_name)," (",t.lcZ(3,5,e.unit_quantity),") "),t.xp6(5),t.Oqu("@Ksh "+t.lcZ(7,7,e.recom_selling_price))}}function bi(o,a){if(1&o&&(t.TgZ(0,"tr"),t._UZ(1,"th"),t.TgZ(2,"th"),t._uU(3,"Location"),t.qZA(),t.YNc(4,vi,8,9,"th",168),t.qZA()),2&o){const e=t.oxw(2);t.xp6(4),t.Q6J("ngForOf",e.itemToViewLocations.selling_units)}}function wi(o,a){if(1&o&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&o){const e=a.$implicit,i=t.oxw().$implicit,n=t.oxw(2);t.xp6(1),t.hij(" ",n.getLocationUnitQuantity(i.location_quantity,n.itemToViewLocations.selling_units)[e.unit_name]," ")}}const Zi=function(o){return{"background-color":o,color:"#ffffff"}};function qi(o,a){if(1&o&&(t.TgZ(0,"tr")(1,"td"),t._UZ(2,"p-avatar",70),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.ALo(5,"titlecase"),t.qZA(),t.YNc(6,wi,2,1,"td",168),t.qZA()),2&o){const e=a.$implicit,i=t.oxw(2);t.xp6(2),t.Akn(t.VKq(6,Zi,e.location.color)),t.xp6(2),t.Oqu(t.lcZ(5,4,e.location.name)),t.xp6(2),t.Q6J("ngForOf",i.itemToViewLocations.selling_units)}}function Mi(o,a){if(1&o&&(t.TgZ(0,"p-table",141),t.YNc(1,bi,5,1,"ng-template",26),t.YNc(2,qi,7,8,"ng-template",27),t.qZA()),2&o){const e=t.oxw();t.Q6J("value",e.itemToViewLocations.locations_qty)("paginator",!1)("rows",5)}}function Ei(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"form",119,120),t.NdJ("ngSubmit",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.addToWaitingList())}),t.TgZ(2,"div",171)(3,"div",22)(4,"div",172)(5,"div",173)(6,"label",174),t._uU(7,"Customer name"),t.qZA(),t._UZ(8,"br"),t.TgZ(9,"input",175),t.NdJ("ngModelChange",function(n){t.CHM(e);const s=t.oxw();return t.KtG(s.customerToWait=n)}),t.qZA()()()()(),t.TgZ(10,"p-footer")(11,"button",176),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return n.displayCustomerName=!1,t.KtG(n.customerToWait="")}),t.qZA(),t._UZ(12,"button",177),t.qZA()()}if(2&o){const e=t.oxw();t.xp6(9),t.Q6J("ngModel",e.customerToWait),t.xp6(3),t.Q6J("disabled",""==e.customerToWait)}}function Ii(o,a){if(1&o&&t._UZ(0,"app-notification",178),2&o){const e=t.oxw();t.Q6J("message","Customer saved!")("showNotification",e.showNotification)}}function Di(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"tr",95)(1,"th",180),t._uU(2," Customer "),t._UZ(3,"p-sortIcon",162),t.qZA(),t.TgZ(4,"th",57),t._uU(5,"Receipt number "),t.qZA(),t.TgZ(6,"th",57),t._uU(7,"Receipt total "),t.qZA(),t.TgZ(8,"th",57),t._uU(9,"Payment channel "),t.qZA(),t.TgZ(10,"th",57),t._uU(11,"Reversed amount "),t.qZA(),t.TgZ(12,"th",57),t._uU(13,"Date sold "),t.qZA(),t.TgZ(14,"th",57),t._uU(15,"Time "),t.qZA(),t._UZ(16,"th",181),t.qZA(),t.TgZ(17,"tr")(18,"th",182)(19,"input",183),t.NdJ("input",function(n){t.CHM(e),t.oxw();const s=t.MAs(1);return t.KtG(s.filterGlobal(n.target.value,"contains"))}),t.qZA()()()}}function ki(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"p-button",187),t.NdJ("onClick",function(){t.CHM(e);const n=t.oxw().$implicit,s=t.oxw(2);return t.KtG(s.selectReceipt(n,!1,!1))}),t.qZA()}}function Ni(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"div",188)(1,"button",189),t._uU(2," Reprint "),t.qZA(),t.TgZ(3,"div",190)(4,"button",191),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit,s=t.oxw(2);return t.KtG(s.selectReceipt(n,!0,!1))}),t._UZ(5,"i",192),t._uU(6," Sale receipt "),t.qZA(),t.TgZ(7,"button",191),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit,s=t.oxw(2);return t.KtG(s.selectReceipt(n,!1,!0))}),t._UZ(8,"i",192),t._uU(9," Delivery receipt "),t.qZA()()()}}function Ui(o,a){if(1&o&&(t.TgZ(0,"tr",151)(1,"td"),t._uU(2),t.ALo(3,"titlecase"),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.ALo(6,"titlecase"),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.ALo(9,"number"),t.qZA(),t.TgZ(10,"td",184),t.ALo(11,"number"),t.ALo(12,"number"),t.ALo(13,"number"),t._uU(14),t.ALo(15,"titlecase"),t.qZA(),t.TgZ(16,"td"),t._uU(17),t.ALo(18,"number"),t.qZA(),t.TgZ(19,"td"),t._uU(20),t.ALo(21,"date"),t.qZA(),t.TgZ(22,"td"),t._uU(23),t.qZA(),t.TgZ(24,"td"),t.YNc(25,ki,1,0,"p-button",185),t.YNc(26,Ni,10,0,"div",186),t.qZA()()),2&o){const e=a.$implicit,i=t.oxw(2);t.xp6(2),t.hij(" ",t.lcZ(3,11,e.customer.name)," "),t.xp6(3),t.hij(" ",t.lcZ(6,13,e.transaction_code)," "),t.xp6(3),t.hij(" ",t.xi3(9,15,e.transaction_total,".2")," "),t.xp6(2),t.Q6J("pTooltip","multiple"==e.payment.payment_channel?"Cash - "+t.xi3(11,18,e.payment.cash,".2")+"\nMpesa - "+t.xi3(12,21,e.payment.mpesa,".2")+"\nBank - "+t.xi3(13,24,e.payment.bank,".2"):"")("tooltipPosition","multiple"==e.payment.payment_channel?"right":""),t.xp6(4),t.hij(" ",t.lcZ(15,27,e.payment.payment_channel)," "),t.xp6(3),t.hij(" ",t.xi3(18,29,e.payment.reversed,".2")," "),t.xp6(3),t.hij(" ",t.lcZ(21,32,e.date_of_sale)," "),t.xp6(3),t.hij(" ",i.getTimeValue(e.date_of_sale)," "),t.xp6(2),t.Q6J("ngIf",e.transaction_total>0),t.xp6(1),t.Q6J("ngIf",e.transaction_total>0)}}const Li=function(){return["customer.name","transaction_code","transaction_total"]};function Fi(o,a){if(1&o&&(t.TgZ(0,"p-table",30,179),t.YNc(2,Di,20,0,"ng-template",26),t.YNc(3,Ui,27,34,"ng-template",27),t.qZA()),2&o){const e=t.oxw();t.Q6J("value",e.reprintItems)("rowHover",!0)("rows",10)("showCurrentPageReport",!0)("rowsPerPageOptions",t.DdM(8,q))("paginator",!0)("filterDelay",0)("globalFilterFields",t.DdM(9,Li))}}function Ji(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"tr",95)(1,"th",161),t._uU(2,"Item "),t._UZ(3,"p-sortIcon",162),t.qZA(),t.TgZ(4,"th",57),t._uU(5,"Location "),t.qZA(),t.TgZ(6,"th",57),t._uU(7,"Unit "),t.qZA(),t.TgZ(8,"th",57),t._uU(9,"Qty "),t.qZA(),t.TgZ(10,"th",57),t._uU(11,"Price "),t.qZA(),t.TgZ(12,"th",57),t._uU(13,"Total "),t.qZA()(),t.TgZ(14,"tr")(15,"th",194)(16,"input",98),t.NdJ("input",function(n){t.CHM(e),t.oxw();const s=t.MAs(1);return t.KtG(s.filter(n.target.value,"item.name","contains"))}),t.qZA()()()}}function Pi(o,a){if(1&o&&(t.TgZ(0,"tr",151)(1,"td"),t._uU(2),t.ALo(3,"titlecase"),t.qZA(),t.TgZ(4,"td")(5,"p-avatarGroup"),t._UZ(6,"p-avatar",195),t.qZA()(),t.TgZ(7,"td"),t._uU(8),t.ALo(9,"titlecase"),t.qZA(),t.TgZ(10,"td"),t._uU(11),t.ALo(12,"number"),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.ALo(15,"number"),t.qZA(),t.TgZ(16,"td"),t._uU(17),t.ALo(18,"number"),t.qZA()()),2&o){const e=a.$implicit;t.xp6(2),t.hij(" ",t.lcZ(3,7,e.item.name)," "),t.xp6(4),t.Akn(t.VKq(19,U,e.location.color)),t.xp6(2),t.hij(" ",t.lcZ(9,9,e.unit.unit_name)," "),t.xp6(3),t.hij(" ",t.lcZ(12,11,e.qty)," "),t.xp6(3),t.hij(" ",t.xi3(15,13,e.sp,".2")," "),t.xp6(3),t.hij(" ",t.xi3(18,16,e.qty*e.sp,".2")," ")}}function Qi(o,a){if(1&o&&(t.TgZ(0,"p-table",30,193),t.YNc(2,Ji,17,0,"ng-template",26),t.YNc(3,Pi,19,21,"ng-template",27),t.qZA()),2&o){const e=t.oxw();t.Q6J("value",e.transactionToView.items)("rowHover",!0)("rows",10)("showCurrentPageReport",!0)("rowsPerPageOptions",t.DdM(8,q))("paginator",!0)("filterDelay",0)("globalFilterFields",t.DdM(9,F))}}function Bi(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"p-button",200),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.showNewCustomerForm())}),t.qZA()}}function Oi(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"tr",95)(1,"th",56),t._uU(2,"Customer name "),t.qZA(),t.TgZ(3,"th",201),t._uU(4,"Total sold "),t._UZ(5,"p-sortIcon",162),t.qZA(),t._UZ(6,"th"),t.qZA(),t.TgZ(7,"tr")(8,"th",202)(9,"input",183),t.NdJ("input",function(n){t.CHM(e),t.oxw();const s=t.MAs(6);return t.KtG(s.filter(n.target.value,"name","contains"))}),t.qZA()()()}}function Gi(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"button",206),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit,s=t.oxw(2);return t.KtG(s.deleteDebtor(n))}),t.qZA()}}function Yi(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"tr",151)(1,"td",152)(2,"label"),t._uU(3),t.ALo(4,"titlecase"),t.qZA()(),t.TgZ(5,"td"),t._uU(6),t.ALo(7,"number"),t.qZA(),t.TgZ(8,"td")(9,"h6")(10,"button",204),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit,s=t.oxw(2);return t.KtG(s.showCustomerSales(n))}),t.qZA(),t.YNc(11,Gi,1,0,"button",205),t.qZA()()()}if(2&o){const e=t.oxw().$implicit,i=t.oxw(2);t.xp6(3),t.hij(" ",t.lcZ(4,3,e.name)," "),t.xp6(3),t.hij(" ",t.xi3(7,5,e.sales,".2")," "),t.xp6(5),t.Q6J("ngIf",i.userIsAdmin&&0==e.total)}}function Ri(o,a){1&o&&t.YNc(0,Yi,12,8,"tr",203),2&o&&t.Q6J("ngIf","Cash customer"!=a.$implicit.name)}const Hi=function(){return{width:"60vw"}};function Ki(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"p-dialog",196),t.NdJ("visibleChange",function(n){t.CHM(e);const s=t.oxw();return t.KtG(s.displayCashCustomers=n)}),t.TgZ(1,"div",19)(2,"div",197),t.YNc(3,Bi,1,0,"p-button",198),t.qZA(),t.TgZ(4,"div",199)(5,"p-table",30,148),t.YNc(7,Oi,10,0,"ng-template",26),t.YNc(8,Ri,1,1,"ng-template",27),t.qZA()()(),t.TgZ(9,"p-footer")(10,"button",149),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return n.displayCashCustomers=!1,t.KtG(n.ngOnInit())}),t.qZA()(),t.TgZ(11,"ngx-spinner",33),t._UZ(12,"p",14),t.qZA()()}if(2&o){const e=t.oxw();t.Akn(t.DdM(16,Hi)),t.Q6J("closable",!1)("visible",e.displayCashCustomers)("baseZIndex",1e4)("blockScroll",!0),t.xp6(3),t.Q6J("ngIf",e.userIsAdmin),t.xp6(2),t.Q6J("value",e.myCashCustomers)("rowHover",!0)("rows",10)("showCurrentPageReport",!0)("rowsPerPageOptions",t.DdM(17,q))("paginator",!0)("filterDelay",0)("globalFilterFields",t.DdM(18,O)),t.xp6(6),t.Q6J("fullScreen",!1)}}function Wi(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"tr")(1,"th",202)(2,"p-calendar",207),t.NdJ("ngModelChange",function(n){t.CHM(e);const s=t.oxw();return t.KtG(s.customerSalesFrom=n)}),t.qZA(),t.TgZ(3,"p-calendar",208),t.NdJ("ngModelChange",function(n){t.CHM(e);const s=t.oxw();return t.KtG(s.customerSalesTo=n)}),t.qZA(),t.TgZ(4,"button",209),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.filterCustomerSales())}),t.qZA(),t.TgZ(5,"p-chip",210)(6,"span",211),t._uU(7," Sales "),t.qZA(),t.TgZ(8,"span",212),t._uU(9),t.ALo(10,"number"),t.qZA()()(),t.TgZ(11,"th")(12,"button",213),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.showCustomerSales(n.cashCustomerSelected))}),t.qZA()()(),t.TgZ(13,"tr",95)(14,"th",59),t._uU(15,"Date "),t.qZA(),t.TgZ(16,"th"),t._uU(17,"Total sales "),t.qZA(),t.TgZ(18,"th"),t._uU(19,"Total reversed "),t.qZA(),t._UZ(20,"th",59),t.qZA()}if(2&o){const e=t.oxw();t.xp6(2),t.Q6J("ngModel",e.customerSalesFrom)("maxDate",e.today)("touchUI",!1)("monthNavigator",!0),t.xp6(1),t.Q6J("ngModel",e.customerSalesTo)("minDate",e.customerSalesFrom)("maxDate",e.today)("touchUI",!1)("monthNavigator",!0),t.xp6(6),t.hij(" ",t.lcZ(10,10,e.cashCustomerTotalPeriodSales)," ")}}function $i(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"tr",151)(1,"td"),t._uU(2),t.ALo(3,"date"),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.ALo(6,"number"),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.ALo(9,"number"),t.qZA(),t.TgZ(10,"td")(11,"button",214),t.NdJ("click",function(){const s=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.showCustomerDateTransactions(s.date))}),t.qZA()()()}if(2&o){const e=a.$implicit;t.xp6(2),t.hij(" ",t.lcZ(3,3,e.date)," "),t.xp6(3),t.hij(" ",t.xi3(6,5,e.sales,".2")," "),t.xp6(3),t.hij(" ",t.xi3(9,8,e.reversed,".2")," ")}}function ji(o,a){1&o&&(t.TgZ(0,"tr")(1,"td",215),t._uU(2,"No sales records."),t.qZA()())}function Vi(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"tr",95)(1,"th"),t._uU(2,"Receipt no "),t.qZA(),t.TgZ(3,"th"),t._uU(4,"Receipt total "),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Amount reversed "),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Sold by "),t.qZA(),t._UZ(9,"th"),t.qZA(),t.TgZ(10,"tr")(11,"th",216)(12,"input",217),t.NdJ("input",function(n){t.CHM(e),t.oxw();const s=t.MAs(43);return t.KtG(s.filterGlobal(n.target.value,"contains"))}),t.qZA()()()}}function zi(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"tr",151)(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.ALo(5,"number"),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.ALo(8,"number"),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.ALo(11,"titlecase"),t.qZA(),t.TgZ(12,"td")(13,"p-button",218),t.NdJ("onClick",function(){const s=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.showReceiptItems(s))}),t.qZA()()()}if(2&o){const e=a.$implicit;t.xp6(2),t.hij(" ",e.transaction_code," "),t.xp6(2),t.hij(" ",t.xi3(5,4,e.total,".2")," "),t.xp6(3),t.hij(" ",t.xi3(8,7,e.reversed,".2")," "),t.xp6(3),t.hij(" ",t.lcZ(11,10,e.sold_by)," ")}}function Xi(o,a){if(1&o&&(t.TgZ(0,"div",226)(1,"span"),t._uU(2),t.qZA()()),2&o){const e=a.$implicit;t.xp6(2),t.Oqu(e.name)}}function to(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"tr",95)(1,"th",222),t._uU(2,"Item "),t._UZ(3,"p-sortIcon",162),t.qZA(),t.TgZ(4,"th",223),t._uU(5,"Category "),t._UZ(6,"p-sortIcon",224),t.qZA(),t.TgZ(7,"th",57),t._uU(8,"Locations "),t.qZA(),t._UZ(9,"th",59),t.qZA(),t.TgZ(10,"tr")(11,"th")(12,"input",98),t.NdJ("input",function(n){t.CHM(e),t.oxw();const s=t.MAs(10);return t.KtG(s.filter(n.target.value,"name","contains"))}),t.qZA()(),t.TgZ(13,"th")(14,"p-multiSelect",225),t.NdJ("onChange",function(n){t.CHM(e);const s=t.oxw(2);return t.KtG(s.onCategoryChange(n))}),t.YNc(15,Xi,3,1,"ng-template",76),t.qZA()(),t._UZ(16,"th")(17,"th"),t.qZA()}if(2&o){const e=t.oxw(2);t.xp6(14),t.Q6J("options",e.categories)}}function eo(o,a){if(1&o&&t._UZ(0,"p-avatar",70),2&o){const e=a.index,i=t.oxw(4);t.Akn(t.VKq(2,U,i.locations[e].color))}}function io(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"p-avatarGroup",68),t.NdJ("click",function(n){t.CHM(e);const s=t.oxw().$implicit,l=t.oxw(2);return t.KtG(l.showLocationsQuantity(s,n))}),t.YNc(1,eo,1,4,"p-avatar",69),t.qZA()}if(2&o){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",t.DdM(1,L).constructor(e.locations_count))}}function oo(o,a){1&o&&(t.TgZ(0,"small",71),t._uU(1," Missing units "),t.qZA())}function no(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"p-button",228),t.NdJ("onClick",function(){t.CHM(e);const n=t.oxw().$implicit,s=t.oxw(2);return t.KtG(s.selectItemCashCustomer(n))}),t.qZA()}if(2&o){const e=t.oxw().$implicit,i=t.oxw(2);t.Q6J("loading",null!=i.itemToViewLocations&&i.itemToViewLocations.id===e.id&&i.loading2)}}function so(o,a){1&o&&(t.TgZ(0,"small",71),t._uU(1," Selling price is low "),t.qZA())}function ao(o,a){if(1&o&&(t.TgZ(0,"tr",151)(1,"td"),t._uU(2),t.ALo(3,"titlecase"),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.ALo(6,"titlecase"),t.qZA(),t.TgZ(7,"td"),t.YNc(8,io,2,2,"p-avatarGroup",63),t.YNc(9,oo,2,0,"small",64),t.qZA(),t.TgZ(10,"td"),t.YNc(11,no,1,1,"p-button",227),t.YNc(12,so,2,0,"small",64),t.qZA()()),2&o){const e=a.$implicit;t.xp6(2),t.hij(" ",t.lcZ(3,6,e.name)," "),t.xp6(3),t.hij(" ",t.lcZ(6,8,e.category.name)," "),t.xp6(3),t.Q6J("ngIf",e.locations_count>0&&1==e.min_unit_ok),t.xp6(1),t.Q6J("ngIf",e.units<1||0==e.min_unit_ok),t.xp6(2),t.Q6J("ngIf",e.locations_count>0&&e.units>0&&1==e.min_unit_ok),t.xp6(1),t.Q6J("ngIf",e.units<1||e.locations_count<1||0==e.min_unit_ok)}}function lo(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"tr",95)(1,"th",161),t._uU(2,"Item "),t._UZ(3,"p-sortIcon",162),t.qZA(),t.TgZ(4,"th",57),t._uU(5,"Location "),t.qZA(),t.TgZ(6,"th",57),t._uU(7,"Unit "),t.qZA(),t.TgZ(8,"th",57),t._uU(9,"Qty "),t.qZA(),t.TgZ(10,"th",57),t._uU(11,"Price "),t.qZA(),t.TgZ(12,"th",57),t._uU(13,"Total "),t.qZA(),t._UZ(14,"th",59),t.qZA(),t.TgZ(15,"tr")(16,"th",97)(17,"input",98),t.NdJ("input",function(n){t.CHM(e),t.oxw(2);const s=t.MAs(34);return t.KtG(s.filter(n.target.value,"item.name","contains"))}),t.qZA()()()}}function ro(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"tr",151)(1,"td"),t._uU(2),t.ALo(3,"titlecase"),t.qZA(),t.TgZ(4,"td")(5,"p-avatarGroup"),t._UZ(6,"p-avatar",195),t.qZA()(),t.TgZ(7,"td"),t._uU(8),t.ALo(9,"titlecase"),t.qZA(),t.TgZ(10,"td"),t._uU(11),t.ALo(12,"number"),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.ALo(15,"number"),t.qZA(),t.TgZ(16,"td"),t._uU(17),t.ALo(18,"number"),t.qZA(),t.TgZ(19,"td")(20,"p-button",163),t.NdJ("onClick",function(){const s=t.CHM(e).$implicit,l=t.oxw(2);return t.KtG(l.confirmDeleteCashCustomer(s))}),t.qZA()()()}if(2&o){const e=a.$implicit;t.xp6(2),t.hij(" ",t.lcZ(3,7,e.item.name)," "),t.xp6(4),t.Akn(t.VKq(19,U,e.location.color)),t.xp6(2),t.hij(" ",t.lcZ(9,9,e.unit.unit_name)," "),t.xp6(3),t.hij(" ",t.lcZ(12,11,e.qty)," "),t.xp6(3),t.hij(" ",t.xi3(15,13,e.sp,".2")," "),t.xp6(3),t.hij(" ",t.xi3(18,16,e.qty*e.sp,".2")," ")}}function _o(o,a){if(1&o&&(t.TgZ(0,"div",19)(1,"div",101)(2,"div",102)(3,"div",103)(4,"h3"),t._uU(5),t.ALo(6,"number"),t.qZA()()()()()),2&o){const e=t.oxw(2);t.xp6(5),t.hij("Total: \xa0Ksh ",t.xi3(6,1,e.totalCartAmountCustomer,".2"),"")}}function co(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"div",104)(1,"div",105)(2,"div",106)(3,"span",107),t._uU(4," Cash received "),t.qZA(),t.TgZ(5,"input",108),t.NdJ("keyup",function(n){t.CHM(e);const s=t.oxw(2);return t.KtG(s.checkChangeToGiveCashCustomer(n))}),t.qZA()()(),t.TgZ(6,"div",109)(7,"div",106)(8,"span",107),t._uU(9," Change "),t.qZA(),t.TgZ(10,"input",110),t.NdJ("ngModelChange",function(n){t.CHM(e);const s=t.oxw(2);return t.KtG(s.changeToGive=n)}),t.qZA()()()()}if(2&o){const e=t.oxw(2);t.xp6(10),t.Q6J("ngModel",e.changeToGive)}}function po(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"div",229)(1,"div",230)(2,"button",231),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.showPaymentFormCashCustomer())}),t.qZA()()()}}function ho(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"p-dialog",32),t.NdJ("visibleChange",function(n){t.CHM(e);const s=t.oxw();return t.KtG(s.displayMyCustomersDialog=n)}),t.ALo(1,"titlecase"),t.TgZ(2,"div",19)(3,"div",219)(4,"div",44)(5,"div",45)(6,"h4",46),t._uU(7," Select item to sell "),t.qZA()(),t.TgZ(8,"div",47)(9,"p-table",30,220),t.YNc(11,to,18,1,"ng-template",26),t.YNc(12,ao,13,10,"ng-template",27),t.qZA()()()(),t.TgZ(13,"div",219)(14,"div",44)(15,"div",45)(16,"h4",46),t._uU(17," Items selected "),t.qZA()(),t.TgZ(18,"div",47)(19,"p-table",30,159),t.YNc(21,lo,18,0,"ng-template",26),t.YNc(22,ro,21,21,"ng-template",27),t.qZA(),t.YNc(23,_o,7,4,"div",0),t.YNc(24,co,11,1,"div",51),t.YNc(25,po,3,0,"div",221),t.qZA()()()(),t.TgZ(26,"p-footer")(27,"button",149),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return n.displayMyCustomersDialog=!1,n.totalCartAmountCustomer=0,t.KtG(n.ngOnInit())}),t.qZA()(),t.TgZ(28,"ngx-spinner",156),t._UZ(29,"p",14),t.qZA()()}if(2&o){const e=t.oxw();t.Akn(t.DdM(28,Y)),t.Q6J("header",e.displayMyCustomersDialog?t.lcZ(1,26,e.cashCustomerSelected.name):"")("closable",!1)("visible",e.displayMyCustomersDialog)("baseZIndex",1e4),t.xp6(9),t.Q6J("value",e.allStock)("rowHover",!0)("rows",10)("showCurrentPageReport",!0)("rowsPerPageOptions",t.DdM(29,q))("paginator",!0)("filterDelay",0)("globalFilterFields",t.DdM(30,F)),t.xp6(10),t.Q6J("value",e.cashCustomerSelected.items)("rowHover",!0)("rows",10)("showCurrentPageReport",!0)("rowsPerPageOptions",t.DdM(31,q))("paginator",!0)("filterDelay",0)("globalFilterFields",t.DdM(32,F)),t.xp6(4),t.Q6J("ngIf",e.totalCartAmountCustomer>0),t.xp6(1),t.Q6J("ngIf",e.totalCartAmountCustomer>0),t.xp6(1),t.Q6J("ngIf",e.totalCartAmountCustomer>0),t.xp6(3),t.Q6J("fullScreen",!0)}}function uo(o,a){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&o){const e=a.$implicit;t.xp6(1),t.Oqu(e.location.name)}}function mo(o,a){if(1&o&&(t.TgZ(0,"div",77)(1,"div"),t._uU(2),t.qZA()()),2&o){const e=a.$implicit;t.xp6(2),t.Oqu(e.location.name)}}function go(o,a){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&o){const e=a.$implicit;t.xp6(1),t.Oqu(e.unit_name)}}function xo(o,a){if(1&o&&(t.TgZ(0,"div",77)(1,"div"),t._uU(2),t.qZA()()),2&o){const e=a.$implicit;t.xp6(2),t.Oqu(e.unit_name)}}function fo(o,a){1&o&&(t.TgZ(0,"tr")(1,"th",142),t._uU(2,"Available"),t.qZA()())}function Co(o,a){if(1&o&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.ALo(3,"titlecase"),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.ALo(6,"number"),t.qZA()()),2&o){const e=a.$implicit;t.xp6(2),t.Oqu(t.lcZ(3,2,e[0])),t.xp6(3),t.Oqu(t.lcZ(6,4,e[1]))}}function To(o,a){if(1&o&&(t.TgZ(0,"div",128)(1,"p-table",141),t.YNc(2,fo,3,0,"ng-template",26),t.YNc(3,Co,7,6,"ng-template",27),t.qZA()()),2&o){const e=t.oxw(3);t.xp6(1),t.Q6J("value",e.availableUnits)("paginator",!1)("rows",10)}}function So(o,a){if(1&o&&(t.TgZ(0,"small",143),t._uU(1),t.qZA()),2&o){const e=t.oxw(3);t.xp6(1),t.hij(" ",e.quantityError," ")}}function yo(o,a){1&o&&(t.TgZ(0,"small",144),t._uU(1," Selling price is lower than buying price "),t.qZA())}function Ao(o,a){if(1&o&&(t.TgZ(0,"small",144),t._uU(1),t.qZA()),2&o){const e=t.oxw(3);t.xp6(1),t.hij(" ",e.priceError2," ")}}function vo(o,a){1&o&&(t.TgZ(0,"small",144),t._uU(1," Selling price is lower than buying price "),t.qZA())}function bo(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"form",119,120),t.NdJ("ngSubmit",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.addToCartCustomer())}),t.TgZ(2,"div",19)(3,"div",22)(4,"div",121)(5,"div",19)(6,"div",128)(7,"div",122)(8,"label",129),t._uU(9,"Location to sell item"),t.qZA(),t._UZ(10,"br"),t.TgZ(11,"p-dropdown",130),t.NdJ("onChange",function(n){t.CHM(e);const s=t.oxw(2);return t.KtG(s.updateLocationSelected(n))})("ngModelChange",function(n){t.CHM(e);const s=t.oxw(2);return t.KtG(s.itemToSellModel.location=n)}),t.YNc(12,uo,2,1,"ng-template",75),t.YNc(13,mo,3,1,"ng-template",76),t.qZA()(),t.TgZ(14,"div",122)(15,"label",131),t._uU(16,"Unit to sell"),t.qZA(),t._UZ(17,"br"),t.TgZ(18,"p-dropdown",132),t.NdJ("onChange",function(n){t.CHM(e);const s=t.oxw(2);return t.KtG(s.updateUnitSelected(n))})("ngModelChange",function(n){t.CHM(e);const s=t.oxw(2);return t.KtG(s.itemToSellModel.unit=n)}),t.YNc(19,go,2,1,"ng-template",75),t.YNc(20,xo,3,1,"ng-template",76),t.qZA()()(),t.YNc(21,To,4,3,"div",133),t.qZA(),t.TgZ(22,"div",122)(23,"label",123),t._uU(24,"Unit quantity to sell"),t.qZA(),t.TgZ(25,"input",134),t.NdJ("input",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.checkQuantity())})("ngModelChange",function(n){t.CHM(e);const s=t.oxw(2);return t.KtG(s.itemToSellModel.unit_quantity=n)}),t.qZA(),t.YNc(26,So,2,1,"small",135),t.qZA(),t.TgZ(27,"div",122)(28,"label",123),t._uU(29,"Unit selling price"),t.qZA(),t.TgZ(30,"input",136),t.NdJ("input",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.confirmPrice())})("ngModelChange",function(n){t.CHM(e);const s=t.oxw(2);return t.KtG(s.itemToSellModel.unit_price=n)}),t.qZA(),t.YNc(31,yo,2,0,"small",137),t.YNc(32,Ao,2,1,"small",137),t.qZA(),t.TgZ(33,"div",122)(34,"label",138),t._uU(35,"Total price"),t.qZA(),t._UZ(36,"input",139),t.YNc(37,vo,2,0,"small",137),t.qZA()()()(),t.TgZ(38,"p-footer")(39,"button",125),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.hideSellFormCashCustomer())}),t.qZA(),t._UZ(40,"button",232),t.qZA()()}if(2&o){const e=t.MAs(1),i=t.oxw(2);t.xp6(11),t.Q6J("options",i.itemToSellModel.locations_qty)("ngModel",i.itemToSellModel.location),t.xp6(7),t.Q6J("options",i.itemToSellModel.selling_units)("disabled",!i.activateSellForm)("ngModel",i.itemToSellModel.unit),t.xp6(3),t.Q6J("ngIf",i.availableUnits!=t.DdM(17,L)),t.xp6(4),t.Q6J("disabled",!i.activateSellForm||null==i.itemToSellModel.unit)("ngModel",i.itemToSellModel.unit_quantity),t.xp6(1),t.Q6J("ngIf",""!=i.quantityError),t.xp6(4),t.Q6J("disabled",!i.activateSellForm||null==i.itemToSellModel.unit||0==i.itemToSellModel.unit_quantity||""==i.itemToSellModel.unit_quantity)("ngModel",i.itemToSellModel.unit_price),t.xp6(1),t.Q6J("ngIf",""!=i.priceError),t.xp6(1),t.Q6J("ngIf",""!=i.priceError2),t.xp6(4),t.Q6J("disabled",!0)("value",i.itemToSellModel.total_price),t.xp6(1),t.Q6J("ngIf",""!=i.priceError),t.xp6(3),t.Q6J("disabled",!e.valid||null==i.itemToSellModel.location||i.itemToSellModel.unit_quantity<1||i.itemToSellModel.unit_price<0||null==i.itemToSellModel.unit||""!=i.priceError||""!=i.priceError2||""!=i.quantityError||""!=i.discountError||!i.activateSellForm||i.buttonClicked)}}function wo(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"p-dialog",32),t.NdJ("visibleChange",function(n){t.CHM(e);const s=t.oxw();return t.KtG(s.displaySellDialogCashCustomer=n)}),t.YNc(1,bo,41,18,"form",11),t.TgZ(2,"ngx-spinner",145),t._UZ(3,"p",14),t.qZA()()}if(2&o){const e=t.oxw();t.Akn(t.DdM(8,N)),t.s9C("header",e.itemToSellModel.name),t.Q6J("closable",!1)("visible",e.displaySellDialogCashCustomer)("baseZIndex",1e4),t.xp6(1),t.Q6J("ngIf",!e.showNotification),t.xp6(1),t.Q6J("fullScreen",!1)}}function Zo(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"p-dialog",146),t.NdJ("visibleChange",function(n){t.CHM(e);const s=t.oxw();return t.KtG(s.displayPaymentFormCashCustomer=n)}),t.TgZ(1,"app-payment-form",233),t.NdJ("status",function(n){t.CHM(e);const s=t.oxw();return t.KtG(s.paymentStatusCashCustomer(n))}),t.qZA()()}if(2&o){const e=t.oxw();t.Akn(t.DdM(8,H)),t.Q6J("closable",!1)("visible",e.displayPaymentFormCashCustomer)("baseZIndex",1e4),t.xp6(1),t.Q6J("totalCartAmount",e.totalCartAmountCustomer)("cashCustomer",e.cashCustomerSelected)("myCashCustomers",e.myCashCustomers)}}function qo(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"form",119,234),t.NdJ("ngSubmit",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.addNewCustomer())}),t.TgZ(2,"div",19)(3,"div",22)(4,"div",121)(5,"div",122)(6,"label",235),t._uU(7,"Customer name"),t.qZA(),t.TgZ(8,"input",236),t.NdJ("ngModelChange",function(n){t.CHM(e);const s=t.oxw();return t.KtG(s.newCustomerModel.name=n)}),t.qZA()()()()(),t.TgZ(9,"p-footer")(10,"button",237),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return n.displayNewCustomerDialog=!1,t.KtG(n.newCustomerModel={})}),t.qZA(),t._UZ(11,"button",238),t.qZA()()}if(2&o){const e=t.MAs(1),i=t.oxw();t.xp6(8),t.Q6J("ngModel",i.newCustomerModel.name),t.xp6(3),t.Q6J("disabled",!e.valid||""==i.newCustomerModel.name)}}function Mo(o,a){if(1&o&&t._UZ(0,"app-notification",178),2&o){const e=t.oxw();t.Q6J("message","Customer added!")("showNotification",e.showNotification)}}function Eo(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"tr")(1,"th",96),t._uU(2,"Name"),t.qZA(),t.TgZ(3,"th",56),t._uU(4,"Available"),t.qZA(),t.TgZ(5,"th",57),t._uU(6,"Location"),t.qZA(),t.TgZ(7,"th",56),t._uU(8,"Unit"),t.qZA(),t.TgZ(9,"th",57),t._uU(10,"Qty"),t.qZA(),t.TgZ(11,"th",57),t._uU(12,"Price"),t.qZA(),t.TgZ(13,"th",57),t._uU(14,"Total"),t.qZA(),t._UZ(15,"th",59),t.qZA(),t.TgZ(16,"tr")(17,"th")(18,"input",60),t.NdJ("input",function(n){t.CHM(e),t.oxw();const s=t.MAs(9);return t.KtG(s.filterGlobal(n.target.value,"contains"))}),t.qZA()(),t._UZ(19,"th",97),t.qZA()}}function Io(o,a){if(1&o&&t._UZ(0,"p-avatar",70),2&o){const e=a.index,i=t.oxw(4);t.Akn(t.VKq(2,U,i.locations[e].color))}}function Do(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"p-avatarGroup",68),t.NdJ("click",function(n){t.CHM(e);const s=t.oxw().$implicit,l=t.oxw(2);return t.KtG(l.showLocationsQuantityNew(s,n))}),t.YNc(1,Io,1,4,"p-avatar",69),t.qZA()}if(2&o){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",t.DdM(1,L).constructor(e.locations_count))}}function ko(o,a){1&o&&(t.TgZ(0,"small",71),t._uU(1," Missing units "),t.qZA())}function No(o,a){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&o){const e=a.$implicit;t.xp6(1),t.Oqu(e.location.name)}}function Uo(o,a){if(1&o&&(t.TgZ(0,"div",77)(1,"div"),t._uU(2),t.qZA()()),2&o){const e=a.$implicit;t.xp6(2),t.Oqu(e.location.name)}}function Lo(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"p-dropdown",74),t.NdJ("onChange",function(n){t.CHM(e);const s=t.oxw(4);return t.KtG(s.newLocationSelected(n))})("ngModelChange",function(n){t.CHM(e);const s=t.oxw(4);return t.KtG(s.selectedItem.location=n)})("keydown.enter",function(n){t.CHM(e);const s=t.oxw(2).$implicit,l=t.oxw(2);return t.KtG(l.focusNext1(n,"qty2"+l.getName(s.name)))}),t.YNc(1,No,2,1,"ng-template",75),t.YNc(2,Uo,3,1,"ng-template",76),t.qZA()}if(2&o){const e=t.oxw(2).$implicit,i=t.oxw(2);t.Q6J("options",i.selectedItem.locations)("disabled",0==e.min_unit_ok)("ngModel",i.selectedItem.location)("filter",!1)}}function Fo(o,a){if(1&o&&t._uU(0),2&o){const e=t.oxw(4);t.hij(" ",e.selectedItem.location?e.selectedItem.location.location.name:""," ")}}function Jo(o,a){1&o&&(t.TgZ(0,"p-cellEditor"),t.YNc(1,Lo,3,4,"ng-template",72),t.YNc(2,Fo,1,1,"ng-template",73),t.qZA())}function Po(o,a){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&o){const e=a.$implicit;t.xp6(1),t.Oqu(e.unit_name)}}function Qo(o,a){if(1&o&&(t.TgZ(0,"div",77)(1,"div"),t._uU(2),t.qZA()()),2&o){const e=a.$implicit;t.xp6(2),t.Oqu(e.unit_name)}}function Bo(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"p-dropdown",241),t.NdJ("onChange",function(n){t.CHM(e);const s=t.oxw(4);return t.KtG(s.newUnitSelected(n))})("ngModelChange",function(n){t.CHM(e);const s=t.oxw(4);return t.KtG(s.selectedItem.unit=n)})("keydown.enter",function(n){t.CHM(e);const s=t.oxw(2).$implicit,l=t.oxw(2);return t.KtG(l.focusNext1(n,"qty2p"+l.getName(s.name)))}),t.YNc(1,Po,2,1,"ng-template",75),t.YNc(2,Qo,3,1,"ng-template",76),t.qZA()}if(2&o){const e=t.oxw(4);t.Q6J("options",e.selectedItem.selling_units)("disabled",e.selectedItem.selling_units.length<1||null==e.selectedItem.location)("ngModel",e.selectedItem.unit)("filter",!1)}}function Oo(o,a){if(1&o&&t._uU(0),2&o){const e=t.oxw(4);t.hij(" ",e.selectedItem.unit?e.selectedItem.unit.unit_name:""," ")}}function Go(o,a){1&o&&(t.TgZ(0,"p-cellEditor"),t.YNc(1,Bo,3,4,"ng-template",72),t.YNc(2,Oo,1,1,"ng-template",73),t.qZA())}function Yo(o,a){if(1&o&&(t.TgZ(0,"p",81)(1,"small",82)(2,"i",83),t._uU(3),t.qZA()()()),2&o){const e=t.oxw(5);t.xp6(3),t.Oqu(e.quantityError)}}function Ro(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"input",242),t.NdJ("ngModelChange",function(n){t.CHM(e);const s=t.oxw(4);return t.KtG(s.selectedItem.sell_qty=n)})("keydown.enter",function(){t.CHM(e);const n=t.oxw(2).$implicit,s=t.oxw(2);return t.KtG(s.focusNext("price2p"+s.getName(n.name)))}),t.qZA(),t.YNc(1,Yo,4,1,"p",80)}if(2&o){const e=t.oxw(2).$implicit,i=t.oxw(2);t.MGl("id","qty2p",i.getName(e.name),""),t.Q6J("ngModel",i.selectedItem.sell_qty),t.xp6(1),t.Q6J("ngIf",""!=i.quantityError)}}function Ho(o,a){if(1&o&&(t._uU(0),t.ALo(1,"number")),2&o){const e=t.oxw(4);t.hij(" ",t.lcZ(1,1,e.selectedItem.sell_qty)," ")}}function Ko(o,a){1&o&&(t.TgZ(0,"p-cellEditor"),t.YNc(1,Ro,2,3,"ng-template",72),t.YNc(2,Ho,2,3,"ng-template",73),t.qZA())}function Wo(o,a){if(1&o&&(t.TgZ(0,"p",81)(1,"small",82)(2,"i",83),t._uU(3),t.qZA()()()),2&o){const e=t.oxw(5);t.xp6(3),t.Oqu(e.priceError)}}function $o(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"input",243),t.NdJ("ngModelChange",function(n){t.CHM(e);const s=t.oxw(4);return t.KtG(s.selectedItem.sold_price=n)})("keydown.enter",function(){t.CHM(e);const n=t.oxw(2).$implicit,s=t.oxw(2);return t.KtG(s.focusNext("save2p"+s.getName(n.name)))}),t.qZA(),t.YNc(1,Wo,4,1,"p",80)}if(2&o){const e=t.oxw(2).$implicit,i=t.oxw(2);t.MGl("id","price2p",i.getName(e.name),""),t.Q6J("disabled",""!=i.quantityError||i.selectedItem.sell_qty<1)("ngModel",i.selectedItem.sold_price),t.xp6(1),t.Q6J("ngIf",""!=i.priceError)}}function jo(o,a){if(1&o&&(t._uU(0),t.ALo(1,"currency")),2&o){const e=t.oxw(4);t.hij(" ",t.xi3(1,1,e.selectedItem.sold_price,"Ksh")," ")}}function Vo(o,a){1&o&&(t.TgZ(0,"p-cellEditor"),t.YNc(1,$o,2,4,"ng-template",72),t.YNc(2,jo,2,4,"ng-template",73),t.qZA())}function zo(o,a){if(1&o&&(t.TgZ(0,"p",85),t._uU(1),t.ALo(2,"number"),t.qZA()),2&o){const e=t.oxw(3);t.xp6(1),t.hij(" ",t.lcZ(2,1,e.selectedItem.sell_qty*e.selectedItem.sold_price)," ")}}function Xo(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"button",91),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit,s=t.oxw(2);return t.KtG(s.onRowEditInitPrint(n))}),t.qZA()}}function tn(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"button",92),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit,s=t.oxw(2);return t.KtG(s.onRowEditSavePrint(n))}),t.qZA()}if(2&o){const e=t.oxw(2).$implicit,i=t.oxw(2);t.MGl("id","save2p",i.getName(e.name),""),t.Q6J("disabled",""!=i.quantityError||i.selectedItem.sell_qty<1||""!=i.priceError||i.selectedItem.sold_price<=0||null==i.selectedItem.location||!i.confirmQuantityIsNumber())}}function en(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"button",93),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2),s=n.$implicit,l=n.rowIndex,_=t.oxw(2);return t.KtG(_.onRowEditCancel(s,l))}),t.qZA()}}function on(o,a){1&o&&t._UZ(0,"div",94)}function nn(o,a){if(1&o&&(t.TgZ(0,"div",86),t.YNc(1,Xo,1,0,"button",87),t.YNc(2,tn,1,2,"button",88),t.YNc(3,en,1,0,"button",89),t.YNc(4,on,1,0,"div",90),t.qZA()),2&o){const e=t.oxw().$implicit,i=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.id!=i.selectedItem.id&&i.loaderToShow!=e.id),t.xp6(1),t.Q6J("ngIf",e.id==i.selectedItem.id&&i.loaderToShow!=e.id),t.xp6(1),t.Q6J("ngIf",e.id==i.selectedItem.id&&i.loaderToShow!=e.id),t.xp6(1),t.Q6J("ngIf",i.loaderToShow==e.id)}}function sn(o,a){if(1&o&&(t.TgZ(0,"tr",62)(1,"td"),t._uU(2),t.ALo(3,"titlecase"),t.qZA(),t.TgZ(4,"td"),t.YNc(5,Do,2,2,"p-avatarGroup",63),t.YNc(6,ko,2,0,"small",64),t.qZA(),t.TgZ(7,"td"),t.YNc(8,Jo,3,0,"p-cellEditor",65),t.qZA(),t.TgZ(9,"td"),t.YNc(10,Go,3,0,"p-cellEditor",65),t.qZA(),t.TgZ(11,"td"),t.YNc(12,Ko,3,0,"p-cellEditor",65),t.qZA(),t.TgZ(13,"td"),t.YNc(14,Vo,3,0,"p-cellEditor",65),t.qZA(),t.TgZ(15,"td"),t.YNc(16,zo,3,3,"p",66),t.qZA(),t.TgZ(17,"td"),t.YNc(18,nn,5,4,"div",67),t.qZA()()),2&o){const e=a.$implicit,i=t.oxw(2);t.Q6J("pEditableRow",e),t.xp6(2),t.hij(" ",t.lcZ(3,10,e.name)," "),t.xp6(3),t.Q6J("ngIf",e.locations_count>0&&1==e.min_unit_ok),t.xp6(1),t.Q6J("ngIf",0==e.min_unit_ok),t.xp6(2),t.Q6J("ngIf",e.id==i.selectedItem.id),t.xp6(2),t.Q6J("ngIf",e.id==i.selectedItem.id&&i.selectedItem.selling_units),t.xp6(2),t.Q6J("ngIf",e.id==i.selectedItem.id),t.xp6(2),t.Q6J("ngIf",e.id==i.selectedItem.id),t.xp6(2),t.Q6J("ngIf",e.id==i.selectedItem.id),t.xp6(2),t.Q6J("ngIf",e.locations_count>0)}}function an(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"tr",95)(1,"th",96),t._uU(2,"Item "),t.qZA(),t.TgZ(3,"th",96),t._uU(4,"Location "),t.qZA(),t.TgZ(5,"th",57),t._uU(6,"Unit "),t.qZA(),t.TgZ(7,"th",96),t._uU(8,"Qty "),t.qZA(),t.TgZ(9,"th",57),t._uU(10,"Price "),t.qZA(),t.TgZ(11,"th",57),t._uU(12,"Total "),t.qZA(),t._UZ(13,"th",56),t.qZA(),t.TgZ(14,"tr")(15,"th",97)(16,"input",98),t.NdJ("input",function(n){t.CHM(e),t.oxw();const s=t.MAs(19);return t.KtG(s.filter(n.target.value,"item.name","contains"))}),t.qZA()()()}}function ln(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"tr",151)(1,"td"),t._uU(2),t.ALo(3,"titlecase"),t.qZA(),t.TgZ(4,"td")(5,"p-avatarGroup"),t._UZ(6,"p-avatar",195),t.qZA()(),t.TgZ(7,"td"),t._uU(8),t.ALo(9,"titlecase"),t.qZA(),t.TgZ(10,"td"),t._uU(11),t.ALo(12,"number"),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.ALo(15,"number"),t.qZA(),t.TgZ(16,"td"),t._uU(17),t.ALo(18,"number"),t.qZA(),t.TgZ(19,"td")(20,"p-button",244),t.NdJ("onClick",function(){const s=t.CHM(e).$implicit,l=t.oxw(2);return t.KtG(l.confirmDeletePrint(s))}),t.qZA()()()}if(2&o){const e=a.$implicit;t.xp6(2),t.hij(" ",t.lcZ(3,7,e.item.name)," "),t.xp6(4),t.Akn(t.VKq(19,U,e.location.color)),t.xp6(2),t.hij(" ",t.lcZ(9,9,e.unit.unit_name)," "),t.xp6(3),t.hij(" ",t.lcZ(12,11,e.qty)," "),t.xp6(3),t.hij(" ",t.xi3(15,13,e.sp,".2")," "),t.xp6(3),t.hij(" ",t.xi3(18,16,e.qty*e.sp,".2")," ")}}function rn(o,a){if(1&o&&(t.TgZ(0,"div",19)(1,"div",101)(2,"div",102)(3,"div",103)(4,"h3"),t._uU(5),t.ALo(6,"number"),t.qZA()()()()()),2&o){const e=t.oxw(2);t.xp6(5),t.hij("Total: \xa0Ksh ",t.xi3(6,1,e.totalCartAmountPrint,".2"),"")}}function _n(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"div",229)(1,"div",230)(2,"button",245),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.printItemsList())}),t.qZA()()()}}function cn(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"p-dialog",239),t.NdJ("visibleChange",function(n){t.CHM(e);const s=t.oxw();return t.KtG(s.showPrintDialog=n)}),t.TgZ(1,"div",19)(2,"div",157)(3,"div",44)(4,"div",45)(5,"h4",46),t._uU(6," Select item to print "),t.qZA()(),t.TgZ(7,"div",47)(8,"p-table",48,49),t.YNc(10,Eo,20,0,"ng-template",26),t.YNc(11,sn,19,12,"ng-template",27),t.qZA()()()(),t.TgZ(12,"div",158)(13,"div",44)(14,"div",45)(15,"h4",46),t._uU(16," Items selected "),t.qZA()(),t.TgZ(17,"div",47)(18,"p-table",30,31),t.YNc(20,an,17,0,"ng-template",26),t.YNc(21,ln,21,21,"ng-template",27),t.qZA(),t.YNc(22,rn,7,4,"div",0),t.YNc(23,_n,3,0,"div",221),t.qZA()()()(),t.TgZ(24,"p-footer")(25,"button",149),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return n.showPrintDialog=!1,n.totalCartAmountPrint=0,t.KtG(n.ngOnInit())}),t.qZA()(),t.TgZ(26,"ngx-spinner",240),t._UZ(27,"p",14),t.qZA()()}if(2&o){const e=t.oxw();t.Akn(t.DdM(25,Y)),t.Q6J("closable",!1)("visible",e.showPrintDialog)("baseZIndex",1e4),t.xp6(3),t.Q6J("@enter",void 0),t.xp6(5),t.Q6J("value",e.newStock)("rows",15)("showCurrentPageReport",!0)("rowsPerPageOptions",t.DdM(26,R))("paginator",!0)("filterDelay",0)("globalFilterFields",t.DdM(27,O)),t.xp6(5),t.Q6J("@enter",void 0),t.xp6(5),t.Q6J("value",e.printItems)("rowHover",!0)("rows",10)("showCurrentPageReport",!0)("rowsPerPageOptions",t.DdM(28,q))("paginator",!0)("filterDelay",0)("globalFilterFields",t.DdM(29,F)),t.xp6(4),t.Q6J("ngIf",e.totalCartAmountPrint>0),t.xp6(1),t.Q6J("ngIf",e.totalCartAmountPrint>0),t.xp6(3),t.Q6J("fullScreen",!1)}}function pn(o,a){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&o){const e=a.$implicit;t.xp6(1),t.Oqu(e.location.name)}}function dn(o,a){if(1&o&&(t.TgZ(0,"div",77)(1,"div"),t._uU(2),t.qZA()()),2&o){const e=a.$implicit;t.xp6(2),t.Oqu(e.location.name)}}function hn(o,a){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&o){const e=a.$implicit;t.xp6(1),t.Oqu(e.unit_name)}}function un(o,a){if(1&o&&(t.TgZ(0,"div",77)(1,"div"),t._uU(2),t.qZA()()),2&o){const e=a.$implicit;t.xp6(2),t.Oqu(e.unit_name)}}function mn(o,a){if(1&o&&(t.TgZ(0,"small",143),t._uU(1),t.qZA()),2&o){const e=t.oxw(3);t.xp6(1),t.hij(" ",e.quantityError," ")}}function gn(o,a){1&o&&(t.TgZ(0,"small",144),t._uU(1," Selling price is lower than buying price "),t.qZA())}function xn(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"form",119,120),t.NdJ("ngSubmit",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.addToCartPrint())}),t.TgZ(2,"div",19)(3,"div",22)(4,"div",121)(5,"div",122)(6,"label",129),t._uU(7,"Location to sell item"),t.qZA(),t._UZ(8,"br"),t.TgZ(9,"p-dropdown",130),t.NdJ("onChange",function(n){t.CHM(e);const s=t.oxw(2);return t.KtG(s.updateLocationSelected(n))})("ngModelChange",function(n){t.CHM(e);const s=t.oxw(2);return t.KtG(s.itemToSellModel.location=n)}),t.YNc(10,pn,2,1,"ng-template",75),t.YNc(11,dn,3,1,"ng-template",76),t.qZA()(),t.TgZ(12,"div",122)(13,"label",131),t._uU(14,"Unit to sell"),t.qZA(),t._UZ(15,"br"),t.TgZ(16,"p-dropdown",132),t.NdJ("onChange",function(n){t.CHM(e);const s=t.oxw(2);return t.KtG(s.updateUnitSelected(n))})("ngModelChange",function(n){t.CHM(e);const s=t.oxw(2);return t.KtG(s.itemToSellModel.unit=n)}),t.YNc(17,hn,2,1,"ng-template",75),t.YNc(18,un,3,1,"ng-template",76),t.qZA()(),t.TgZ(19,"div",122)(20,"label",123),t._uU(21,"Unit quantity to sell"),t.qZA(),t.TgZ(22,"input",134),t.NdJ("input",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.checkQuantityPrint())})("ngModelChange",function(n){t.CHM(e);const s=t.oxw(2);return t.KtG(s.itemToSellModel.unit_quantity=n)}),t.qZA(),t.YNc(23,mn,2,1,"small",135),t.qZA(),t.TgZ(24,"div",122)(25,"label",123),t._uU(26,"Unit selling price"),t.qZA(),t.TgZ(27,"input",246),t.NdJ("ngModelChange",function(n){t.CHM(e);const s=t.oxw(2);return t.KtG(s.itemToSellModel.unit_price=n)}),t.qZA()(),t.TgZ(28,"div",122)(29,"label",138),t._uU(30,"Total price"),t.qZA(),t._UZ(31,"input",139),t.YNc(32,gn,2,0,"small",137),t.qZA()()()(),t.TgZ(33,"p-footer")(34,"button",125),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.hideSellFormPrint())}),t.qZA(),t._UZ(35,"button",232),t.qZA()()}if(2&o){const e=t.MAs(1),i=t.oxw(2);t.xp6(9),t.Q6J("options",i.itemToSellModel.locations_qty)("ngModel",i.itemToSellModel.location),t.xp6(7),t.Q6J("options",i.itemToSellModel.selling_units)("disabled",!i.activateSellForm)("ngModel",i.itemToSellModel.unit),t.xp6(6),t.Q6J("disabled",!i.activateSellForm||null==i.itemToSellModel.unit)("ngModel",i.itemToSellModel.unit_quantity),t.xp6(1),t.Q6J("ngIf",""!=i.quantityError),t.xp6(4),t.Q6J("ngModel",i.itemToSellModel.unit_price),t.xp6(4),t.Q6J("disabled",!0)("value",i.itemToSellModel.total_price),t.xp6(1),t.Q6J("ngIf",""!=i.priceError),t.xp6(3),t.Q6J("disabled",!e.valid||null==i.itemToSellModel.location||i.itemToSellModel.unit_quantity<1||i.itemToSellModel.unit_price<0||null==i.itemToSellModel.unit||""!=i.priceError||""!=i.priceError2||""!=i.quantityError||""!=i.discountError||!i.activateSellForm)}}function fn(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"p-dialog",32),t.NdJ("visibleChange",function(n){t.CHM(e);const s=t.oxw();return t.KtG(s.displaySellDialogPrint=n)}),t.YNc(1,xn,36,13,"form",11),t.TgZ(2,"ngx-spinner",145),t._UZ(3,"p",14),t.qZA()()}if(2&o){const e=t.oxw();t.Akn(t.DdM(8,N)),t.s9C("header",e.itemToSellModel.name),t.Q6J("closable",!1)("visible",e.displaySellDialogPrint)("baseZIndex",1e4),t.xp6(1),t.Q6J("ngIf",!e.showNotification),t.xp6(1),t.Q6J("fullScreen",!1)}}const Cn=function(){return{width:"500px"}},Tn=function(){return{width:"25vw"}},j=function(){return{width:"70vw"}},Sn=function(){return{width:"90vw"}},yn=function(){return["transaction_code","transaction_total","reversed"]};function y(o){if(!o)return o;let a=o.toLowerCase().split(" ");return a=a.map(e=>e.charAt(0).toUpperCase()+e.slice(1)),a.join(" ")}let An=(()=>{class o{constructor(e,i,n,s,l,_,r,p,h,w){this.spinner=e,this.cryptoSrv=i,this.toastr=n,this.authSrv=s,this.apiSrv=l,this._decimalPipe=_,this.confirmationService=r,this.printSrv=p,this.cdr=h,this.locale=w,this.loading=!0,this.newStock=[],this.showNew=!0,this.selectedLocation="",this.selectedItem={},this.clonedProducts={},this.loaderToShow="",this.productImagesUrl=K.N.imageUrls,this.shopLogoUrl=K.N.shopLogoUrls,this.itemToSellModel={},this.showNotification=!1,this.itemSelected={},this.displaySellDialog=!1,this.displayEditDialog=!1,this.activateSellForm=!1,this.quantityError="",this.priceError="",this.discountError="",this.cartItems=[],this.totalCartAmount=0,this.showPayment=!1,this.waitingCustomers=[],this.duplicatedSales=[],this.myCashCustomers=[],this.cashCustomersPending=!1,this.changeToGive="",this.displayPaymentForm=!1,this.receiptCustomer="",this.displayCustomerName=!1,this.customerToWait="",this.displayWaitingCustomers=!1,this.displayWaitingCustomerSelected=!1,this.totalCartAmountWaiting=0,this.displaySellDialogWaiting=!1,this.displayPaymentFormWaiting=!1,this.displayDuplicatedSales=!1,this.floatDialog=!1,this.floatAmount=0,this.floatAmounts=[],this.displayFloatDialog=!1,this.categories=[],this.showReprintForm=!1,this.reprintItems=[],this.displayItemsDialog=!1,this.userCanAddWaiting=!1,this.userIsAdmin=!1,this.userCanPrintItems=!1,this.displayCashCustomers=!1,this.displayMyCustomersDialog=!1,this.cashCustomerSelected={},this.totalCartAmountCustomer=0,this.displaySellDialogCashCustomer=!1,this.displayPaymentFormCashCustomer=!1,this.displayNewCustomerDialog=!1,this.newCustomerModel={},this.cashCustomerTotalPeriodSales=0,this.filtedCashCustomerSales=[],this.showCashCustomerSales=!1,this.customerSalesFrom=new Date,this.customerSalesTo=new Date,this.today=new Date,this.customerDateSales=[],this.showDateSales=!1,this.dateSelected="",this.paymentModel={},this.showPrintDialog=!1,this.printItems=[],this.displaySellDialogPrint=!1,this.totalCartAmountPrint=0,this.availableUnits=[],this.buttonClicked=!1,this.priceError2="",this.loading2=!1,this.userHasMultipleLocations=!1}ngOnInit(){"admin"===this.cryptoSrv.decryptEncodedText(this.authSrv.getUserDetailToken("role"))&&(this.userIsAdmin=!0),"1"===this.cryptoSrv.decryptEncodedText(this.authSrv.getRoleToken("add_waiting_customer"))&&(this.userCanAddWaiting=!0),"1"===this.cryptoSrv.decryptEncodedText(this.authSrv.getRoleToken("print_items"))&&(this.userCanPrintItems=!0),"1"===this.cryptoSrv.decryptEncodedText(this.authSrv.getRoleToken("sell_cash"))||this.userIsAdmin?(this.changeToGive="0",this.getAllStockNew()):(this.toastr.error("You have no rights to access that page!"),this.authSrv.logout())}getAllStockNew(){this.cashCustomersPending=!1,this.totalCartAmount=0,this.spinner.show();const e={action:this.cryptoSrv.encodeEncryptText("get-stock-and-cart-items-new"),uid:this.authSrv.getUserDetailToken("uid")};this.apiSrv.read(e).then(i=>{if("error"!=i.status)if("error2"!=i.status){this.newStock=i.stock,this.locations=i.locations,this.cartItems=i.cartItems,this.waitingCustomers=i.waiting,this.duplicatedSales=i.duplicated,this.myCashCustomers=i.myCustomers;let n={id:this.cryptoSrv.encodeEncryptText("0"),name:"Cash customer",items:[],total:0};this.myCashCustomers.length>0?this.myCashCustomers.unshift(n):this.myCashCustomers.push(n),this.printItems=i.print_list,this.newStock.forEach(s=>{const l=s.locations.split(",");s.locations_count=l.length,1==s.min_unit_ok&&(s.min_unit_ok=!0)}),this.resetTotals(),this.spinner.hide(),this.spinner.hide("wait"),this.loading=!1}else this.spinner.hide(),this.spinner.hide("wait"),this.toastr.error("Please login again.","Login session expired!"),this.authSrv.logout();else this.spinner.hide(),this.spinner.hide("wait"),this.toastr.error(i.message)}).catch(i=>{this.toastr.error(i),this.spinner.hide(),this.spinner.hide("wait")})}onCategoryChange(e){this.table.filter(e.value,"category","in")}onCategoryChange2(e){this.table2.filter(e.value,"category","in")}showLocationsQuantityNew(e,i){if(e.selling_units)this.itemToViewLocations=e,this.overlay.toggle(i);else{this.loaderToShow=e.id,this.loading2=!0;let n=this.newStock.find(l=>l.id===e.id);this.itemToViewLocations=n;const s={action:this.cryptoSrv.encodeEncryptText("get_item_all_locations_quantity"),item_id:e.id,added_by:this.authSrv.getUserDetailToken("uid")};this.apiSrv.read(s).then(l=>{"error"!=l.status?"error2"!=l.status?(n.selling_units=l.selling_units,n.locations_qty=l.locations_qty,n.total_qty=l.total_qty,n.locations=l.locations,this.overlay.toggle(i),this.loading2=!1,this.loaderToShow=""):(this.loaderToShow="",this.loading2=!1,this.toastr.error("Please login again.","Login session expired!"),this.authSrv.logout()):(this.loaderToShow="",this.loading2=!1,this.toastr.error(l.message))}).catch(l=>{this.toastr.error(l),this.loaderToShow="",this.loading2=!1})}}getUnitPrice(e){return e.markup>0&&(e.recom_selling_price=parseFloat((e.buying_price*(1+e.markup/100)).toFixed(0)),e.markup_discount>0&&(e.min_selling_price=parseFloat((e.buying_price*(1+e.markup_discount/100)).toFixed(0)))),e.recom_selling_price}showLocationsQuantity(e,i){if(e.selling_units)this.itemToViewLocations=e,this.overlay.toggle(i);else{this.loading2=!0;let n=this.allStock.find(l=>l.id===e.id);this.itemToViewLocations=n;const s={action:this.cryptoSrv.encodeEncryptText("get_item_all_locations_quantity"),item_id:e.id,added_by:this.authSrv.getUserDetailToken("uid")};this.apiSrv.read(s).then(l=>{"error"!=l.status?"error2"!=l.status?(n.selling_units=l.selling_units,n.locations_qty=l.locations_qty,n.total_qty=l.total_qty,n.locations=l.locations,this.overlay.toggle(i),this.loading2=!1):(this.loading2=!1,this.toastr.error("Please login again.","Login session expired!"),this.authSrv.logout()):(this.loading2=!1,this.toastr.error(l.message))}).catch(l=>{this.toastr.error(l),this.loading2=!1})}}getLocationUnitQuantity(e,i){const n={};return(i=i.sort((s,l)=>l.unit_quantity-s.unit_quantity)).forEach(s=>{if(e>0){const l=Math.floor(e/s.unit_quantity);n[s.unit_name]=l,e-=l*s.unit_quantity}else n[s.unit_name]=0}),n}updateLocationSelected(e){this.itemToSellModel.location_id=e.value.location.id,this.itemToSellModel.location=e.value,this.displayEditDialog||(this.itemToSellModel.unit_quantity=0),this.itemToSellModel.unit=null,this.checkLockStatus()}updateAvailableUnits(e){const i=this.getLocationUnitQuantity(e,this.itemToSellModel.selling_units);this.availableUnits=Object.entries(i)}onRowEditInit(e,i){if("localhost"==window.location.hostname){this.loaderToShow=i.id,this.clonedProducts[i.id]={...i};const s={action:this.cryptoSrv.encodeEncryptText("get-item-locations"),item_id:i.id,uid:this.authSrv.getUserDetailToken("uid"),right:this.cryptoSrv.encodeEncryptText("sell_cash")};this.apiSrv.read(s).then(l=>{"error"!=l.status?"error2"!=l.status?(this.selectedItem=this.apiSrv.deepCopy(i),this.selectedItem.sell_qty=0,this.selectedItem.sold_price=0,this.selectedItem.locations=l.locations,this.priceError="",this.quantityError="",this.activateSellForm=!0,this.userHasMultipleLocations=this.selectedItem.locations.length>1,this.selectedItem.location=this.selectedItem.locations[0],this.selectedItem.unit=null,this.selectedItem.sell_qty=0,this.checkLockStatusNew(),this.focusNext1(e,"qty2"+this.getName(i.name))):(this.loaderToShow="",this.toastr.error("Please login again.","Login session expired!"),this.authSrv.logout()):(this.loaderToShow="","locked"===l.message?(this.activateSellForm=!1,this.toastr.warning("Item is locked by "+l.user)):(this.activateSellForm=!1,this.toastr.error(l.message)))}).catch(l=>{this.toastr.error(l),this.spinner.hide("sell"),this.spinner.show("sellw")})}else{this.loaderToShow=i.id,this.clonedProducts[i.id]={...i};const s={action:this.cryptoSrv.encodeEncryptText("get-item-locations"),item_id:i.id,uid:this.authSrv.getUserDetailToken("uid"),right:this.cryptoSrv.encodeEncryptText("sell_cash")};this.apiSrv.read(s).then(l=>{"error"!=l.status?"error2"!=l.status?(this.selectedItem=this.apiSrv.deepCopy(i),this.selectedItem.sell_qty=0,this.selectedItem.sold_price=0,this.selectedItem.locations=l.locations,this.priceError="",this.quantityError="",this.activateSellForm=!0,this.userHasMultipleLocations=this.selectedItem.locations.length>1,this.selectedItem.location=this.selectedItem.locations[0],this.selectedItem.unit=null,this.selectedItem.sell_qty=0,this.checkLockStatusNew(),this.focusNext1(e,"qty2"+this.getName(i.name))):(this.loaderToShow="",this.toastr.error("Please login again.","Login session expired!"),this.authSrv.logout()):(this.loaderToShow="","locked"===l.message?(this.activateSellForm=!1,this.toastr.warning("Item is locked by "+l.user)):(this.activateSellForm=!1,this.toastr.error(l.message)))}).catch(l=>{this.toastr.error(l),this.spinner.hide("sell"),this.spinner.show("sellw")})}}onRowEditInitWaiting(e,i){if("localhost"==window.location.hostname){this.loaderToShow=i.id,this.clonedProducts[i.id]={...i};const s={action:this.cryptoSrv.encodeEncryptText("get-item-locations"),item_id:i.id,uid:this.authSrv.getUserDetailToken("uid"),right:this.cryptoSrv.encodeEncryptText("sell_cash")};this.apiSrv.read(s).then(l=>{"error"!=l.status?"error2"!=l.status?(this.selectedItem=this.apiSrv.deepCopy(i),this.selectedItem.sell_qty=0,this.selectedItem.sold_price=0,this.selectedItem.locations=l.locations,this.priceError="",this.quantityError="",this.activateSellForm=!0,this.userHasMultipleLocations=this.selectedItem.locations.length>1,this.selectedItem.location=this.selectedItem.locations[0],this.selectedItem.unit=null,this.selectedItem.sell_qty=0,this.checkLockStatusNew(),this.focusNext1(e,"qty2"+this.getName(i.name))):(this.loaderToShow="",this.toastr.error("Please login again.","Login session expired!"),this.authSrv.logout()):(this.loaderToShow="","locked"===l.message?(this.activateSellForm=!1,this.toastr.warning("Item is locked by "+l.user)):(this.activateSellForm=!1,this.toastr.error(l.message)))}).catch(l=>{this.toastr.error(l),this.spinner.hide("sell"),this.spinner.show("sellw")})}else{this.loaderToShow=i.id,this.clonedProducts[i.id]={...i};const s={action:this.cryptoSrv.encodeEncryptText("get-item-locations"),item_id:i.id,uid:this.authSrv.getUserDetailToken("uid"),right:this.cryptoSrv.encodeEncryptText("sell_cash")};this.apiSrv.read(s).then(l=>{"error"!=l.status?"error2"!=l.status?(this.selectedItem=this.apiSrv.deepCopy(i),this.selectedItem.sell_qty=0,this.selectedItem.sold_price=0,this.selectedItem.locations=l.locations,this.priceError="",this.quantityError="",this.activateSellForm=!0,this.userHasMultipleLocations=this.selectedItem.locations.length>1,this.selectedItem.location=this.selectedItem.locations[0],this.selectedItem.unit=null,this.selectedItem.sell_qty=0,this.checkLockStatusNew(),this.focusNext1(e,"qty2"+this.getName(i.name))):(this.loaderToShow="",this.toastr.error("Please login again.","Login session expired!"),this.authSrv.logout()):(this.loaderToShow="","locked"===l.message?(this.activateSellForm=!1,this.toastr.warning("Item is locked by "+l.user)):(this.activateSellForm=!1,this.toastr.error(l.message)))}).catch(l=>{this.toastr.error(l),this.spinner.hide("sell"),this.spinner.show("sellw")})}}onRowEditInitPrint(e){this.loaderToShow=e.id,this.clonedProducts[e.id]={...e};const i={action:this.cryptoSrv.encodeEncryptText("get-item-locations"),item_id:e.id,uid:this.authSrv.getUserDetailToken("uid"),right:this.cryptoSrv.encodeEncryptText("sell_cash")};this.apiSrv.read(i).then(n=>{"error"!=n.status?"error2"!=n.status?(this.selectedItem=this.apiSrv.deepCopy(e),this.selectedItem.sell_qty=0,this.selectedItem.sold_price=0,this.selectedItem.locations=n.locations,this.priceError="",this.quantityError="",this.activateSellForm=!0,this.loaderToShow=""):(this.loaderToShow="",this.toastr.error("Please login again.","Login session expired!"),this.authSrv.logout()):(this.loaderToShow="","locked"===n.message?(this.activateSellForm=!1,this.toastr.warning("Item is locked by "+n.user)):(this.activateSellForm=!1,this.toastr.error(n.message)))}).catch(n=>{this.toastr.error(n),this.spinner.hide("sell"),this.spinner.show("sellw")})}getName(e){return e.replace(/\s+/g,"-")}newLocationSelected(e){this.selectedItem.location=e.value,this.selectedItem.unit=null,this.selectedItem.sell_qty=0,this.checkLockStatusNew()}newUnitSelected(e,i){this.selectedItem.unit=e.value,this.selectedItem.sell_qty="",this.selectedItem.sell_price=this.selectedItem.unit.recom_selling_price,this.selectedItem.sold_price=this.selectedItem.unit.recom_selling_price,this.focusNext(i)}focusNext1(e,i){e.preventDefault(),e.stopPropagation();const n=document.getElementById(i);n&&n.focus()}focusNext(e){setTimeout(()=>{const i=document.getElementById(e);if(i){const n=i.querySelector(".p-dropdown");if(n){const s=n.__ngContext__[8];s&&s.show?s.show():console.warn(`Dropdown instance for id "${e}" is not found or doesn't support show().`)}else e.indexOf("qty")>-1&&(i.value="",this.selectedItem.sell_qty="",this.quantityError=""),i.focus()}else console.error(`Element with id "${e}" not found.`)},0)}checkLockStatusNew(){this.loaderToShow=this.selectedItem.id;const e={action:this.cryptoSrv.encodeEncryptText("check-lock-status-new"),item_id:this.selectedItem.id,location_id:this.selectedItem.location.location.id,uid:this.authSrv.getUserDetailToken("uid"),right:this.cryptoSrv.encodeEncryptText("sell_cash")};this.apiSrv.read(e).then(i=>{"error"!=i.status?"error2"!=i.status?(this.activateSellForm=!0,this.selectedItem.selling_units=i.units,this.selectedItem.locations.find(({location:s})=>s.id===this.selectedItem.location.location.id).quantity=i.qty,this.loading=!1,this.activateSellForm=!0,this.loaderToShow=""):(this.loaderToShow="",this.toastr.error("Please login again.","Login session expired!"),this.authSrv.logout()):(this.loaderToShow="","locked"===i.message?(this.activateSellForm=!1,this.toastr.warning("Item is locked by "+i.user)):(this.selectedItem.location=null,this.activateSellForm=!1,this.toastr.error(i.message)))}).catch(i=>{this.toastr.error(i),this.activateSellForm=!1,this.loaderToShow=""})}confirmQuantityIsNumber(){return Number.isInteger(+this.selectedItem.sell_qty)&&+this.selectedItem.sell_qty>0}confirmQuantityNew(){const e=parseFloat(this.selectedItem.location.quantity);if(parseInt(this.selectedItem.unit.unit_quantity.toString())*parseInt(this.selectedItem.sell_qty)>e){const n=Math.floor(e/parseInt(this.selectedItem.unit.unit_quantity));this.quantityError="Only "+n+" "+this.selectedItem.unit.unit_name+"s are available"}else this.quantityError=""}confirmSellPrice(){this.priceError=parseFloat(this.selectedItem.sold_price)<this.selectedItem.unit.min_selling_price?"Price cannot be lower than"+this.selectedItem.unit.min_selling_price:""}onRowEditCancel(e,i){this.selectedItem={};const n={action:this.cryptoSrv.encodeEncryptText("unlock-user-items"),uid:this.authSrv.getUserDetailToken("uid")};this.apiSrv.post(n).then(s=>{"error"!=s.status&&("error2"!=s.status||(this.toastr.error("Please login again.","Login session expired!"),this.authSrv.logout()))}).catch(s=>{})}onRowEditSave(e){this.loaderToShow=e.id;const i=parseFloat(this.selectedItem.sell_qty)*parseFloat(this.selectedItem.unit.unit_quantity),n=parseFloat(this.selectedItem.buying_price)*parseFloat(this.selectedItem.unit.unit_quantity),s=parseFloat(this.selectedItem.unit.min_selling_price),l=parseFloat(this.selectedItem.unit.recom_selling_price),_={action:this.cryptoSrv.encodeEncryptText("add-item-to-cart-new"),item_id:this.selectedItem.id,location_id:this.selectedItem.location.location.id,unit_id:this.selectedItem.unit.id,unit_qty:this.cryptoSrv.encodeEncryptText(this.selectedItem.sell_qty.toString()),tt_qty:this.cryptoSrv.encodeEncryptText(i.toString()),unit_bp:this.cryptoSrv.encodeEncryptText(n.toString()),min_sp:this.cryptoSrv.encodeEncryptText(s.toString()),recom_sp:this.cryptoSrv.encodeEncryptText(l.toString()),unit_price:this.cryptoSrv.encodeEncryptText(this.selectedItem.sold_price.toString()),uid:this.authSrv.getUserDetailToken("uid")};this.apiSrv.post(_).then(r=>{"error"!=r.status?"error2"!=r.status?(this.toastr.success("Item added to list!"),this.newStock=r.stock,this.locations=r.locations,this.categories=r.categories,this.cartItems=r.cartItems,this.waitingCustomers=r.waiting,this.printItems=r.print_list,this.availableUnits=[],this.selectedItem={},this.newStock.forEach(p=>{const h=p.locations.split(",");p.locations_count=h.length,1==p.min_unit_ok&&(p.min_unit_ok=!0)}),this.loaderToShow="",this.searchInput.nativeElement.value="",this.searchInput.nativeElement.focus(),this.resetTotals()):(this.spinner.hide("sell"),this.toastr.error("Please login again.","Login session expired!"),this.authSrv.logout()):(this.spinner.hide("sell"),"locked"===r.message?(this.activateSellForm=!1,this.toastr.warning("Item is locked by "+r.user)):this.toastr.error(r.message))}).catch(r=>{this.toastr.error(r),this.spinner.hide("sell")})}onRowEditSaveWaiting(e){this.loaderToShow=e.id;const i=parseFloat(this.selectedItem.sell_qty)*parseFloat(this.selectedItem.unit.unit_quantity),n=parseFloat(this.selectedItem.buying_price)*parseFloat(this.selectedItem.unit.unit_quantity),s=parseFloat(this.selectedItem.unit.min_selling_price),l=parseFloat(this.selectedItem.unit.recom_selling_price),_={action:this.cryptoSrv.encodeEncryptText("add-item-to-cart-waiting-new"),item_id:this.selectedItem.id,customer:this.cryptoSrv.encodeEncryptText(this.waitingCustomerSelected.customer),location_id:this.selectedItem.location.location.id,unit_id:this.selectedItem.unit.id,unit_qty:this.cryptoSrv.encodeEncryptText(this.selectedItem.sell_qty.toString()),tt_qty:this.cryptoSrv.encodeEncryptText(i.toString()),unit_bp:this.cryptoSrv.encodeEncryptText(n.toString()),min_sp:this.cryptoSrv.encodeEncryptText(s.toString()),recom_sp:this.cryptoSrv.encodeEncryptText(l.toString()),unit_price:this.cryptoSrv.encodeEncryptText(this.selectedItem.sold_price.toString()),uid:this.authSrv.getUserDetailToken("uid")};this.apiSrv.post(_).then(r=>{if("error"!=r.status)if("error2"!=r.status){this.newStock=r.stock,this.locations=r.locations,this.categories=r.categories,this.cartItems=r.cartItems,this.waitingCustomers=r.waiting,this.printItems=r.print_list,this.availableUnits=[],this.selectedItem={},this.waitingCustomerSelected=this.waitingCustomers.find(h=>h.customer===this.waitingCustomerSelected.customer),this.totalCartAmountWaiting=0,this.waitingCustomerSelected.items.forEach(h=>{this.totalCartAmountWaiting+=h.qty*h.sp}),this.newStock.forEach(h=>{const w=h.locations.split(",");h.locations_count=w.length,1==h.min_unit_ok&&(h.min_unit_ok=!0)});const p=document.getElementById("searchInput2");p&&(p.value="",p.focus()),this.loaderToShow="",this.toastr.success("Item added to list!"),this.resetTotals()}else this.spinner.hide("sell"),this.toastr.error("Please login again.","Login session expired!"),this.authSrv.logout();else this.spinner.hide("sell"),"locked"===r.message?(this.activateSellForm=!1,this.toastr.warning("Item is locked by "+r.user)):this.toastr.error(r.message)}).catch(r=>{this.toastr.error(r),this.spinner.hide("sell")})}onRowEditSavePrint(e){this.loaderToShow=e.id;const i=parseFloat(this.selectedItem.sell_qty)*parseFloat(this.selectedItem.unit.unit_quantity),n=parseFloat(this.selectedItem.buying_price)*parseFloat(this.selectedItem.unit.unit_quantity),s=parseFloat(this.selectedItem.unit.min_selling_price),l=parseFloat(this.selectedItem.unit.recom_selling_price),_={action:this.cryptoSrv.encodeEncryptText("add-item-to-print-list"),item_id:this.selectedItem.id,location_id:this.selectedItem.location.location.id,unit_id:this.selectedItem.unit.id,unit_qty:this.cryptoSrv.encodeEncryptText(this.selectedItem.sell_qty.toString()),tt_qty:this.cryptoSrv.encodeEncryptText(i.toString()),unit_bp:this.cryptoSrv.encodeEncryptText(n.toString()),min_sp:this.cryptoSrv.encodeEncryptText(s.toString()),recom_sp:this.cryptoSrv.encodeEncryptText(l.toString()),unit_price:this.cryptoSrv.encodeEncryptText(this.selectedItem.sold_price.toString()),uid:this.authSrv.getUserDetailToken("uid")};this.apiSrv.post(_).then(r=>{"error"!=r.status?"error2"!=r.status?(this.toastr.success("Item added to list!"),this.newStock=r.stock,this.locations=r.locations,this.categories=r.categories,this.cartItems=r.cartItems,this.waitingCustomers=r.waiting,this.myCashCustomers=r.myCustomers,this.printItems=r.print_list,this.availableUnits=[],this.selectedItem={},this.newStock.forEach(p=>{const h=p.locations.split(",");p.locations_count=h.length,1==p.min_unit_ok&&(p.min_unit_ok=!0)}),this.loaderToShow="",this.resetTotals()):(this.spinner.hide("sell"),this.toastr.error("Please login again.","Login session expired!"),this.authSrv.logout()):(this.spinner.hide("sell"),"locked"===r.message?(this.activateSellForm=!1,this.toastr.warning("Item is locked by "+r.user)):this.toastr.error(r.message))}).catch(r=>{this.toastr.error(r),this.spinner.hide("sell")})}confirmQuantity(){const e=this.itemToSellModel.location,n=this.itemToSellModel.locations_qty.find(l=>l.id===e.id).location_quantity;if(this.itemToSellModel.unit_quantity*this.itemToSellModel.unit.unit_quantity>n){const l=Math.floor(parseInt(n)/parseInt(this.itemToSellModel.unit.unit_quantity));this.quantityError="You can only sell a max of "+l+" "+this.itemToSellModel.unit.unit_name}else this.itemToSellModel.total_price=parseFloat(this.itemToSellModel.unit_quantity)*parseFloat(this.itemToSellModel.unit_price),this.itemToSellModel.total_price=this._decimalPipe.transform(this.itemToSellModel.total_price,"1.2-2"),this.quantityError=""}updateUnitSelected(e){this.itemToSellModel.unit_id=e.value.id,this.itemToSellModel.unit=e.value,this.itemToSellModel.unit_price=this.itemToSellModel.unit.recom_selling_price,this.displayEditDialog||(this.itemToSellModel.unit_quantity=0),this.checkLockStatus(),this.checkPrice()}checkLockStatus(){this.spinner.show("sell"),this.spinner.show("sellw");const e={action:this.cryptoSrv.encodeEncryptText("check-lock-status"),item_id:this.itemToSellModel.id,location_id:this.itemToSellModel.location.location.id,uid:this.authSrv.getUserDetailToken("uid"),right:this.cryptoSrv.encodeEncryptText("sell_cash")};this.apiSrv.read(e).then(i=>{if("error"!=i.status)if("error2"!=i.status){this.activateSellForm=!0;const n=this.itemToSellModel.locations_qty.find(({location:s})=>s.id===this.itemToSellModel.location.location.id);n&&(n.location_quantity=i.qty),this.displayEditDialog||this.updateAvailableUnits(i.qty),this.loading=!1,this.spinner.hide("sell"),this.spinner.hide("sellw")}else this.spinner.hide("sell"),this.spinner.hide("sellw"),this.toastr.error("Please login again.","Login session expired!"),this.authSrv.logout();else this.spinner.hide("sell"),this.spinner.hide("sellw"),"locked"===i.message?(this.activateSellForm=!1,this.toastr.warning("Item is locked by "+i.user)):(this.activateSellForm=!1,this.toastr.error(i.message))}).catch(i=>{this.toastr.error(i),this.spinner.hide("sell"),this.spinner.show("sellw")})}checkQuantity(){const e=this.itemToSellModel.location,n=this.itemToSellModel.locations_qty.find(l=>l.id===e.id).location_quantity;if(this.itemToSellModel.unit_quantity*this.itemToSellModel.unit.unit_quantity>n){const l=Math.floor(parseInt(n)/parseInt(this.itemToSellModel.unit.unit_quantity));this.quantityError="You can only sell a max of "+l+" "+this.itemToSellModel.unit.unit_name}else this.itemToSellModel.total_price=parseFloat(this.itemToSellModel.unit_quantity)*parseFloat(this.itemToSellModel.unit_price),this.itemToSellModel.total_price=this._decimalPipe.transform(this.itemToSellModel.total_price,"1.2-2"),this.quantityError=""}confirmPrice(){this.itemToSellModel.unit_price<this.itemToSellModel.unit.min_selling_price?this.priceError2="Selling price cannot be below "+this.itemToSellModel.unit.min_selling_price:(this.itemToSellModel.total_price=parseFloat(this.itemToSellModel.unit_quantity)*parseFloat(this.itemToSellModel.unit_price),this.itemToSellModel.total_price=this._decimalPipe.transform(this.itemToSellModel.total_price,"1.2-2"),this.priceError2="")}checkPrice(){const e=parseInt(this.itemToSellModel.buying_price)*this.itemToSellModel.unit.unit_quantity;this.priceError=parseInt(this.itemToSellModel.unit_price)<e?"Selling price is lower than buying price":""}checkDiscountTotal(){const i=(this.itemToSellModel.unit.recom_selling_price-this.itemToSellModel.unit.min_selling_price)*this.itemToSellModel.unit_quantity;this.discountError=this.itemToSellModel.discount>i?"Discount cannot be more than "+i:""}resetTotals(){this.totalCartAmount=0,this.cartItems.forEach(e=>{this.totalCartAmount+=e.qty*e.sp}),this.totalCartAmountPrint=0,this.printItems.forEach(e=>{this.totalCartAmountPrint+=e.qty*e.sp}),this.spinner.hide("sell"),this.showPayment=!0}addToCartWaiting(){this.buttonClicked=!0,this.spinner.show("sellw");const e=parseFloat(this.itemToSellModel.unit_quantity)*parseFloat(this.itemToSellModel.unit.unit_quantity),i=parseFloat(this.itemToSellModel.buying_price)*parseFloat(this.itemToSellModel.unit.unit_quantity),n=parseFloat(this.itemToSellModel.unit.min_selling_price),s=parseFloat(this.itemToSellModel.unit.recom_selling_price);this.itemToSellModel.unit_price=this.itemToSellModel.unit_price-this.itemToSellModel.discount/this.itemToSellModel.unit_quantity;const _={action:this.cryptoSrv.encodeEncryptText("add-item-to-cart-waiting"),item_id:this.itemToSellModel.id,customer:this.cryptoSrv.encodeEncryptText(this.waitingCustomerSelected.customer),location_id:this.itemToSellModel.location.location.id,unit_id:this.itemToSellModel.unit.id,unit_qty:this.cryptoSrv.encodeEncryptText(this.itemToSellModel.unit_quantity.toString()),tt_qty:this.cryptoSrv.encodeEncryptText(e.toString()),unit_bp:this.cryptoSrv.encodeEncryptText(i.toString()),min_sp:this.cryptoSrv.encodeEncryptText(n.toString()),recom_sp:this.cryptoSrv.encodeEncryptText(s.toString()),unit_price:this.cryptoSrv.encodeEncryptText(this.itemToSellModel.unit_price.toString()),uid:this.authSrv.getUserDetailToken("uid")};this.apiSrv.post(_).then(r=>{"error"!=r.status?"error2"!=r.status?(this.activateSellForm=!1,this.displaySellDialogWaiting=!1,this.allStock=r.stock,this.locations=r.locations,this.categories=r.categories,this.cartItems=r.cartItems,this.waitingCustomers=r.waiting,this.printItems=r.print_list,this.waitingCustomerSelected=this.waitingCustomers.find(p=>p.customer===this.waitingCustomerSelected.customer),this.totalCartAmountWaiting=0,this.waitingCustomerSelected.items.forEach(p=>{this.totalCartAmountWaiting+=p.qty*p.sp}),this.availableUnits=[],this.allStock.forEach(p=>{parseInt(p.prices_ok.toString())>0?(p.prices_ok=!1,p.sp_units_ok=!1,p.attention=1):(p.prices_ok=!0,p.sp_units_ok=!0),parseInt(p.min_qty_ok.toString())<1||parseInt(p.min_qty_ok.toString())>1?(p.min_qty_ok=!1,p.min_unit_ok=!1,p.attention=1):(p.min_qty_ok=!0,p.min_unit_ok=!0),p.locations_count=parseInt(p.locations_count.toString()),p.category=this.categories.find(h=>h.id===p.category_id)}),this.resetTotals(),this.toastr.success("Item added to list!"),this.spinner.hide("sellw")):(this.spinner.hide("sell"),this.toastr.error("Please login again.","Login session expired!"),this.authSrv.logout()):(this.spinner.hide("sellw"),"locked"===r.message?(this.activateSellForm=!1,this.toastr.warning("Item is locked by "+r.user)):this.toastr.error(r.message))}).catch(r=>{this.toastr.error(r),this.spinner.hide("sellw")})}hideSellForm(){this.displaySellDialog=!1,this.displayEditDialog=!1,this.unLockItem(this.itemToSellModel)}hideSellFormWaiting(){this.displaySellDialogWaiting=!1,this.displayEditDialog=!1,this.unLockItem(this.itemToSellModel)}unLockItem(e){if(this.itemToSellModel.location){this.spinner.show();const i={action:this.cryptoSrv.encodeEncryptText("unlock-item"),item_id:this.itemToSellModel.id,location_id:this.itemToSellModel.location.id,user_id:this.authSrv.getUserDetailToken("uid")};this.apiSrv.read(i).then(n=>{"error"!=n.status?"error2"!=n.status?(this.loading=!1,this.spinner.hide()):(this.spinner.hide(),this.toastr.error("Please login again.","Login session expired!"),this.authSrv.logout()):(this.spinner.hide(),"locked"===n.message?this.toastr.warning("Item is locked by "+n.user):this.toastr.error(n.message))}).catch(n=>{this.toastr.error(n),this.spinner.hide()})}else this.displaySellDialog=!1,this.itemToSellModel={}}selectEditItem(e){this.checkEditLockStatus(e)}checkEditLockStatus(e){this.spinner.show();const i={action:this.cryptoSrv.encodeEncryptText("check-edit-lock-status"),item_id:e.item.id,location_id:e.location.id,uid:this.authSrv.getUserDetailToken("uid"),right:this.cryptoSrv.encodeEncryptText("sell_cash")};this.apiSrv.read(i).then(n=>{"error"!=n.status?"error2"!=n.status?(this.itemToSellModel=e.item,this.itemToSellModel.cart_id=e.id,this.showNotification=!1,this.itemToSellModel.unit_price=parseFloat(e.sp.toString()),this.itemToSellModel.unit_quantity=parseFloat(e.qty.toString()),this.itemToSellModel.discount=0,this.itemToSellModel.total_price=0,this.availableUnits=[],this.buttonClicked=!1,this.activateSellForm=!0,this.itemToSellModel.selling_units=n.units,this.itemToSellModel.locations_qty=n.locations,this.itemToSellModel.location=this.itemToSellModel.locations_qty.find(({location:s})=>s.id===e.location.id),this.itemToSellModel.location_id=this.itemToSellModel.location.id,this.itemToSellModel.unit=this.itemToSellModel.selling_units.find(s=>s.id===e.unit.id),this.updateAvailableUnits(parseInt(n.qty)),this.displaySellDialog=!0,this.displayEditDialog=!0,this.loading=!1,this.spinner.hide()):(this.spinner.hide(),this.toastr.error("Please login again.","Login session expired!"),this.authSrv.logout()):(this.spinner.hide(),"locked"===n.message?(this.activateSellForm=!1,this.toastr.warning("Item is locked by "+n.user)):(this.activateSellForm=!1,this.toastr.error(n.message)))}).catch(n=>{this.toastr.error(n),this.spinner.hide()})}updateCartItem(){this.spinner.show("sell");const e=parseFloat(this.itemToSellModel.unit_quantity)*parseFloat(this.itemToSellModel.unit.unit_quantity),i=parseFloat(this.itemToSellModel.buying_price)*parseFloat(this.itemToSellModel.unit.unit_quantity),n=parseFloat(this.itemToSellModel.unit.min_selling_price),s=parseFloat(this.itemToSellModel.unit.recom_selling_price);this.itemToSellModel.unit_price=this.itemToSellModel.unit_price-this.itemToSellModel.discount/this.itemToSellModel.unit_quantity;const _={action:this.cryptoSrv.encodeEncryptText("update-item-cart"),cart_id:this.itemToSellModel.cart_id,item_id:this.itemToSellModel.id,location_id:this.itemToSellModel.location.location.id,unit_id:this.itemToSellModel.unit.id,unit_qty:this.cryptoSrv.encodeEncryptText(this.itemToSellModel.unit_quantity.toString()),tt_qty:this.cryptoSrv.encodeEncryptText(e.toString()),unit_bp:this.cryptoSrv.encodeEncryptText(i.toString()),min_sp:this.cryptoSrv.encodeEncryptText(n.toString()),recom_sp:this.cryptoSrv.encodeEncryptText(s.toString()),unit_price:this.cryptoSrv.encodeEncryptText(this.itemToSellModel.unit_price.toString()),uid:this.authSrv.getUserDetailToken("uid")};this.apiSrv.post(_).then(r=>{"error"!=r.status?"error2"!=r.status?(this.activateSellForm=!1,this.displaySellDialog=!1,this.displayEditDialog=!1,this.toastr.success("Item updated!"),this.ngOnInit()):(this.spinner.hide("sell"),this.toastr.error("Please login again.","Login session expired!"),this.authSrv.logout()):(this.spinner.hide("sell"),"locked"===r.message?(this.activateSellForm=!1,this.toastr.warning("Item is locked by "+r.user)):this.toastr.error(r.message))}).catch(r=>{this.toastr.error(r),this.spinner.hide("sell")})}updateCartItemWaiting(){this.spinner.show("sellw");const e=parseFloat(this.itemToSellModel.unit_quantity)*parseFloat(this.itemToSellModel.unit.unit_quantity),i=parseFloat(this.itemToSellModel.buying_price)*parseFloat(this.itemToSellModel.unit.unit_quantity),n=parseFloat(this.itemToSellModel.unit.min_selling_price),s=parseFloat(this.itemToSellModel.unit.recom_selling_price);this.itemToSellModel.unit_price=this.itemToSellModel.unit_price-this.itemToSellModel.discount/this.itemToSellModel.unit_quantity;const _={action:this.cryptoSrv.encodeEncryptText("update-item-cart-waiting"),cart_id:this.itemToSellModel.cart_id,item_id:this.itemToSellModel.id,location_id:this.itemToSellModel.location.location.id,unit_id:this.itemToSellModel.unit.id,unit_qty:this.cryptoSrv.encodeEncryptText(this.itemToSellModel.unit_quantity.toString()),tt_qty:this.cryptoSrv.encodeEncryptText(e.toString()),unit_bp:this.cryptoSrv.encodeEncryptText(i.toString()),min_sp:this.cryptoSrv.encodeEncryptText(n.toString()),recom_sp:this.cryptoSrv.encodeEncryptText(s.toString()),unit_price:this.cryptoSrv.encodeEncryptText(this.itemToSellModel.unit_price.toString()),uid:this.authSrv.getUserDetailToken("uid")};this.apiSrv.post(_).then(r=>{"error"!=r.status?"error2"!=r.status?(this.activateSellForm=!1,this.displaySellDialogWaiting=!1,this.displayEditDialog=!1,this.toastr.success("Item updated!"),this.newStock=r.stock,this.locations=r.locations,this.categories=r.categories,this.cartItems=r.cartItems,this.waitingCustomers=r.waiting,this.printItems=r.print_list,this.availableUnits=[],this.selectedItem={},this.waitingCustomerSelected=this.waitingCustomers.find(p=>p.customer===this.waitingCustomerSelected.customer),this.totalCartAmountWaiting=0,this.waitingCustomerSelected.items.forEach(p=>{this.totalCartAmountWaiting+=p.qty*p.sp}),this.newStock.forEach(p=>{const h=p.locations.split(",");p.locations_count=h.length,1==p.min_unit_ok&&(p.min_unit_ok=!0)}),this.resetTotals(),this.spinner.hide("sellw")):(this.spinner.hide("sellw"),this.toastr.error("Please login again.","Login session expired!"),this.authSrv.logout()):(this.spinner.hide("sellw"),"locked"===r.message?(this.activateSellForm=!1,this.toastr.warning("Item is locked by "+r.user)):this.toastr.error(r.message))}).catch(r=>{this.toastr.error(r),this.spinner.hide("sellw")})}confirmDelete(e){this.confirmationService.confirm({message:"Are you sure you want to delete item from list?",acceptButtonStyleClass:"btn btn-primary",rejectButtonStyleClass:"btn btn-danger",accept:()=>{this.spinner.show(),this.showPayment=!1;const i=e.unit.unit_quantity*e.qty,n={action:this.cryptoSrv.encodeEncryptText("delete-item-from-cart-new"),id:e.id,item_id:e.item.id,tt_qty:this.cryptoSrv.encodeEncryptText(i.toString()),location_id:e.location.id,added_by:this.authSrv.getUserDetailToken("uid")};this.apiSrv.post(n).then(s=>{"error"!=s.status?"error2"!=s.status?(this.toastr.success("Item deleted"),this.newStock=s.stock,this.locations=s.locations,this.cartItems=s.cartItems,this.waitingCustomers=s.waiting,this.printItems=s.print_list,this.newStock.forEach(l=>{const _=l.locations.split(",");l.locations_count=_.length,1==l.min_unit_ok&&(l.min_unit_ok=!0)}),this.resetTotals(),this.spinner.hide()):(this.toastr.error("Please login again.","Login session expired!"),this.authSrv.logout(),this.spinner.hide()):(this.spinner.hide(),"locked"===s.message?(this.activateSellForm=!1,this.toastr.warning("Item is locked by "+s.user)):this.toastr.error(s.message))}).catch(s=>{this.toastr.error(s),this.spinner.hide()})},reject:()=>{}})}confirmDeleteWaiting(e){this.confirmationService.confirm({message:"Are you sure you want to delete item from list?",acceptButtonStyleClass:"btn btn-primary",rejectButtonStyleClass:"btn btn-danger",accept:()=>{this.spinner.show("waiting"),this.showPayment=!1;const i=e.unit.unit_quantity*e.qty,n={action:this.cryptoSrv.encodeEncryptText("delete-item-from-cart-waiting-new"),id:e.id,customer:this.cryptoSrv.encodeEncryptText(this.waitingCustomerSelected.customer),item_id:e.item.id,tt_qty:this.cryptoSrv.encodeEncryptText(i.toString()),location_id:e.location.id,added_by:this.authSrv.getUserDetailToken("uid")};this.apiSrv.post(n).then(s=>{if("error"!=s.status)if("error2"!=s.status){this.newStock=s.stock,this.locations=s.locations,this.cartItems=s.cartItems,this.waitingCustomers=s.waiting,this.printItems=s.print_list,this.newStock.forEach(_=>{const r=_.locations.split(",");_.locations_count=r.length,1==_.min_unit_ok&&(_.min_unit_ok=!0)}),this.resetTotals(),this.changeToGive="0";const l=this.waitingCustomers.find(_=>_.customer===this.waitingCustomerSelected.customer);null!=l?(this.waitingCustomerSelected=l,this.totalCartAmountWaiting=0,this.waitingCustomerSelected.items.forEach(_=>{this.totalCartAmountWaiting+=_.qty*_.sp})):(this.displayWaitingCustomerSelected=!1,this.waitingCustomers.length<1&&(this.displayWaitingCustomers=!1),this.totalCartAmountWaiting=0),this.toastr.success("Item deleted"),this.spinner.hide("waiting")}else this.toastr.error("Please login again.","Login session expired!"),this.authSrv.logout(),this.spinner.hide("waiting");else this.spinner.hide("waiting"),"locked"===s.message?(this.activateSellForm=!1,this.toastr.warning("Item is locked by "+s.user)):this.toastr.error(s.message)}).catch(s=>{this.toastr.error(s),this.spinner.hide("waiting")})},reject:()=>{}})}confirmDeletePrint(e){this.confirmationService.confirm({message:"Are you sure you want to delete item from list?",acceptButtonStyleClass:"btn btn-primary",rejectButtonStyleClass:"btn btn-danger",accept:()=>{this.spinner.show("print");const i=e.unit.unit_quantity*e.qty,n={action:this.cryptoSrv.encodeEncryptText("delete-item-from-print-list"),id:e.id,item_id:e.item.id,tt_qty:this.cryptoSrv.encodeEncryptText(i.toString()),location_id:e.location.id,added_by:this.authSrv.getUserDetailToken("uid")};this.apiSrv.post(n).then(s=>{"error"!=s.status?"error2"!=s.status?(this.toastr.success("Item deleted"),this.newStock=s.stock,this.locations=s.locations,this.cartItems=s.cartItems,this.waitingCustomers=s.waiting,this.myCashCustomers=s.myCustomers,this.printItems=s.print_list,this.newStock.forEach(l=>{const _=l.locations.split(",");l.locations_count=_.length,1==l.min_unit_ok&&(l.min_unit_ok=!0)}),this.resetTotals(),this.spinner.hide("print")):(this.toastr.error("Please login again.","Login session expired!"),this.authSrv.logout(),this.spinner.hide("print")):(this.spinner.hide("print"),"locked"===s.message?(this.activateSellForm=!1,this.toastr.warning("Item is locked by "+s.user)):this.toastr.error(s.message))}).catch(s=>{this.toastr.error(s),this.spinner.hide("print")})},reject:()=>{}})}checkChangeToGive(e){const i=parseFloat(document.getElementById("cashreceived").value);this.changeToGive=isNaN(i)?"0":this._decimalPipe.transform(i-this.totalCartAmount,"1.2-2")}checkChangeToGiveWaiting(e){const i=parseFloat(document.getElementById("cashreceived").value);this.changeToGive=isNaN(i)?"0":this._decimalPipe.transform(i-this.totalCartAmountWaiting,"1.2-2")}addToWaitingList(){this.spinner.show("waiting");const e={action:this.cryptoSrv.encodeEncryptText("add-waiting-customer"),added_by:this.authSrv.getUserDetailToken("uid"),customer:this.cryptoSrv.encodeEncryptText(this.customerToWait)};this.apiSrv.post(e).then(i=>{"error"!=i.status?"error2"!=i.status?(this.showNotification=!0,setTimeout(()=>{this.ngOnInit(),this.displayCustomerName=!1},1500),this.spinner.hide("waiting")):(this.spinner.hide("waiting"),this.toastr.error("Please login again.","Login session expired!"),this.authSrv.logout()):(this.spinner.hide("waiting"),this.toastr.error(i.message))}).catch(i=>{this.toastr.error(i),this.spinner.hide("waiting")})}showPaymentForm(){const e=this.cryptoSrv.decryptEncodedText(this.authSrv.getRoleToken("admin")).toLowerCase(),i=this.cryptoSrv.decryptEncodedText(this.authSrv.getRoleToken("stock_count"));"admin"===e&&"1"===i?this.toastr.info("First complete the stock taking","Pending stock taking!"):this.displayPaymentForm=!0}showPaymentFormWaiting(){const e=this.cryptoSrv.decryptEncodedText(this.authSrv.getRoleToken("admin")).toLowerCase(),i=this.cryptoSrv.decryptEncodedText(this.authSrv.getRoleToken("stock_count"));"admin"===e&&"1"===i?this.toastr.info("First complete the stock taking","Pending stock taking!"):this.displayPaymentFormWaiting=!0}paymentStatus(e){e.status?(this.receiptCustomer=e.customerName,this.shopDetail=e.shopDetail,this.displayPaymentForm=!1,e.printReceipt?(this.paymentModel=e.paymentModel,this.printTest(),e.printDeliveryReceipt&&this.printDeliveryTest(),setTimeout(()=>{this.ngOnInit()},3e3)):e.printDeliveryReceipt?(this.paymentModel=e.paymentModel,this.printDeliveryTest(),this.ngOnInit()):this.ngOnInit()):this.displayPaymentForm=!1}paymentStatusWaiting(e){e.status?(this.receiptCustomer=e.customerName,this.shopDetail=e.shopDetail,this.displayPaymentFormWaiting=!1,this.displayWaitingCustomerSelected=!1,this.spinner.show("wait"),e.printReceipt?(this.paymentModel=e.paymentModel,this.printTestWaiting(),e.printDeliveryReceipt&&this.printTestWaitingDelivery(),setTimeout(()=>{this.ngOnInit()},3e3)):(e.printDeliveryReceipt&&(this.paymentModel=e.paymentModel,this.printTestWaitingDelivery()),this.ngOnInit())):this.displayPaymentFormWaiting=!1}showWaitingCustomer(e){this.totalCartAmountWaiting=0,this.waitingCustomerSelected=e,this.waitingCustomerSelected.items.forEach(i=>{this.totalCartAmountWaiting+=i.qty*i.sp}),this.displayWaitingCustomerSelected=!0}showMyCustomer(e){this.cashCustomerSelected=e,this.totalCartAmountCustomer=this.cashCustomerSelected.total,this.displayMyCustomersDialog=!0}selectItemCashCustomer(e){if(e.selling_units)this.itemToSellModel.location=null,this.showNotification=!1,this.activateSellForm=!1,this.itemToSellModel=e,this.itemToSellModel.location=null,this.itemToSellModel.unit=e.selling_units[0],this.itemToSellModel.unit_price=this.itemToSellModel.unit.recom_selling_price,this.itemToSellModel.discount=0,this.itemToSellModel.total_price=0,this.availableUnits=[],this.buttonClicked=!1,this.displaySellDialogCashCustomer=!0;else{this.loading2=!0;let i=this.allStock.find(s=>s.id===e.id);this.itemToViewLocations=i;const n={action:this.cryptoSrv.encodeEncryptText("get_item_all_locations_quantity"),item_id:e.id,added_by:this.authSrv.getUserDetailToken("uid")};this.apiSrv.read(n).then(s=>{"error"!=s.status?"error2"!=s.status?(i.selling_units=s.selling_units,i.locations_qty=s.locations_qty,i.total_qty=s.total_qty,i.locations=s.locations,this.itemToSellModel.location=null,this.showNotification=!1,this.activateSellForm=!1,this.itemToSellModel=e,this.itemToSellModel.location=null,this.itemToSellModel.unit=e.selling_units[0],this.itemToSellModel.unit_price=this.itemToSellModel.unit.recom_selling_price,this.itemToSellModel.discount=0,this.itemToSellModel.total_price=0,this.availableUnits=[],this.buttonClicked=!1,this.displaySellDialogCashCustomer=!0,this.checkPrice(),this.loading2=!1):(this.loading2=!1,this.toastr.error("Please login again.","Login session expired!"),this.authSrv.logout()):(this.loading2=!1,this.toastr.error(s.message))}).catch(s=>{this.toastr.error(s),this.loading2=!1})}}addToCartCustomer(){this.buttonClicked=!0,this.spinner.show("sellw");const e=parseFloat(this.itemToSellModel.unit_quantity)*parseFloat(this.itemToSellModel.unit.unit_quantity),i=parseFloat(this.itemToSellModel.buying_price)*parseFloat(this.itemToSellModel.unit.unit_quantity),n=parseFloat(this.itemToSellModel.unit.min_selling_price),s=parseFloat(this.itemToSellModel.unit.recom_selling_price);this.itemToSellModel.unit_price=this.itemToSellModel.unit_price-this.itemToSellModel.discount/this.itemToSellModel.unit_quantity;const _={action:this.cryptoSrv.encodeEncryptText("add-item-to-cart-cash-customer"),item_id:this.itemToSellModel.id,customer_id:this.cashCustomerSelected.id,location_id:this.itemToSellModel.location.location.id,unit_id:this.itemToSellModel.unit.id,unit_qty:this.cryptoSrv.encodeEncryptText(this.itemToSellModel.unit_quantity.toString()),tt_qty:this.cryptoSrv.encodeEncryptText(e.toString()),unit_bp:this.cryptoSrv.encodeEncryptText(i.toString()),min_sp:this.cryptoSrv.encodeEncryptText(n.toString()),recom_sp:this.cryptoSrv.encodeEncryptText(s.toString()),unit_price:this.cryptoSrv.encodeEncryptText(this.itemToSellModel.unit_price.toString()),uid:this.authSrv.getUserDetailToken("uid")};this.apiSrv.post(_).then(r=>{if("error"!=r.status)if("error2"!=r.status){this.activateSellForm=!1,this.displaySellDialogCashCustomer=!1,this.toastr.success("Item added to list!"),this.allStock=r.stock,this.locations=r.locations,this.categories=r.categories,this.cartItems=r.cartItems,this.waitingCustomers=r.waiting,this.printItems=r.print_list,this.availableUnits=[],this.allStock.forEach(h=>{parseInt(h.prices_ok.toString())>0?(h.prices_ok=!1,h.sp_units_ok=!1,h.attention=1):(h.prices_ok=!0,h.sp_units_ok=!0),parseInt(h.min_qty_ok.toString())<1||parseInt(h.min_qty_ok.toString())>1?(h.min_qty_ok=!1,h.min_unit_ok=!1,h.attention=1):(h.min_qty_ok=!0,h.min_unit_ok=!0),h.locations_count=parseInt(h.locations_count.toString()),h.category=this.categories.find(w=>w.id===h.category_id)}),this.resetTotals();const p=this.myCashCustomers.find(h=>h.id===this.cashCustomerSelected.id);null!=p?(this.cashCustomerSelected=p,this.totalCartAmountCustomer=0,this.cashCustomerSelected.items.forEach(h=>{this.totalCartAmountCustomer+=h.qty*h.sp})):this.totalCartAmountCustomer=0,this.spinner.hide("sellw")}else this.spinner.hide("sellw"),this.toastr.error("Please login again.","Login session expired!"),this.authSrv.logout();else this.spinner.hide("sellw"),"locked"===r.message?(this.activateSellForm=!1,this.toastr.warning("Item is locked by "+r.user)):this.toastr.error(r.message)}).catch(r=>{this.toastr.error(r),this.spinner.hide("sell")})}hideSellFormCashCustomer(){this.displaySellDialogCashCustomer=!1,this.unLockItem(this.itemToSellModel)}confirmDeleteCashCustomer(e){this.confirmationService.confirm({message:"Are you sure you want to delete item from list?",acceptButtonStyleClass:"btn btn-primary",rejectButtonStyleClass:"btn btn-danger",accept:()=>{this.spinner.show("waiting");const i=e.unit.unit_quantity*e.qty,n={action:this.cryptoSrv.encodeEncryptText("delete-item-from-cart"),id:e.id,customer:this.cryptoSrv.encodeEncryptText(this.cashCustomerSelected.id),item_id:e.item.id,tt_qty:this.cryptoSrv.encodeEncryptText(i.toString()),location_id:e.location.id,added_by:this.authSrv.getUserDetailToken("uid")};this.apiSrv.post(n).then(s=>{if("error"!=s.status)if("error2"!=s.status){this.allStock=s.stock,this.locations=s.locations,this.categories=s.categories,this.cartItems=s.cartItems,this.waitingCustomers=s.waiting,this.myCashCustomers=s.myCustomers,this.printItems=s.print_list,this.allStock.forEach(_=>{parseInt(_.prices_ok.toString())>0?(_.prices_ok=!1,_.sp_units_ok=!1,_.attention=1):(_.prices_ok=!0,_.sp_units_ok=!0),parseInt(_.min_qty_ok.toString())<1||parseInt(_.min_qty_ok.toString())>1?(_.min_qty_ok=!1,_.min_unit_ok=!1,_.attention=1):(_.min_qty_ok=!0,_.min_unit_ok=!0),_.locations_count=parseInt(_.locations_count.toString()),_.category=this.categories.find(r=>r.id===_.category_id)}),this.resetTotals();const l=this.myCashCustomers.find(_=>_.id===this.cashCustomerSelected.id);null!=l&&(this.cashCustomerSelected=l,this.totalCartAmountCustomer=0,this.cashCustomerSelected.items.forEach(_=>{this.totalCartAmountCustomer+=_.qty*_.sp})),this.toastr.success("Item deleted"),this.spinner.hide("waiting")}else this.toastr.error("Please login again.","Login session expired!"),this.authSrv.logout(),this.spinner.hide("waiting");else this.spinner.hide("waiting"),"locked"===s.message?(this.activateSellForm=!1,this.toastr.warning("Item is locked by "+s.user)):this.toastr.error(s.message)}).catch(s=>{this.toastr.error(s),this.spinner.hide("waiting")})},reject:()=>{}})}checkChangeToGiveCashCustomer(e){const i=parseFloat(document.getElementById("cashreceived").value);this.changeToGive=isNaN(i)?"0":this._decimalPipe.transform(i-this.totalCartAmountCustomer,"1.2-2")}showPaymentFormCashCustomer(){this.displayPaymentFormCashCustomer=!0}paymentStatusCashCustomer(e){e.status?(this.receiptCustomer=e.customerName,this.shopDetail=e.shopDetail,this.displayPaymentFormCashCustomer=!1,this.displayMyCustomersDialog=!1,e.printReceipt?(this.paymentModel=e.paymentModel,this.printTestCashCustomer(),setTimeout(()=>{this.ngOnInit()},3e3),document.getElementById("cashreceived").value=""):this.ngOnInit()):this.displayPaymentFormCashCustomer=!1}showNewCustomerForm(){this.showNotification=!1,this.displayNewCustomerDialog=!0,this.newCustomerModel={}}addNewCustomer(){this.spinner.show("newcustomer");const e={action:this.cryptoSrv.encodeEncryptText("add_new_cash_customer"),name:this.cryptoSrv.encodeEncryptText(this.newCustomerModel.name),added_by:this.authSrv.getUserDetailToken("uid")};this.apiSrv.post(e).then(i=>{"error"!=i.status?"error2"!=i.status?(this.showNotification=!0,setTimeout(()=>{this.displayNewCustomerDialog=!1,this.newCustomerModel={},this.ngOnInit()},1500)):(this.toastr.error("Please login again.","Login session expired!"),this.authSrv.logout()):this.toastr.error(i.message),this.spinner.hide("newcustomer")}).catch(i=>{this.toastr.error(i),this.spinner.hide("newcustomer")})}showCustomerSales(e){this.spinner.show("newcustomer"),this.spinner.show("date");const i={action:this.cryptoSrv.encodeEncryptText("get_cash_customer_sales"),cid:e.id,added_by:this.authSrv.getUserDetailToken("uid")};this.apiSrv.post(i).then(n=>{"error"!=n.status?"error2"!=n.status?(this.cashCustomerSelected=e,this.cashCustomerSelected.date_sales=n.sales,this.filtedCashCustomerSales=n.sales,this.cashCustomerTotalPeriodSales=n.total,n.sales.length>0&&(this.customerSalesTo=new Date(n.sales[0].date),this.customerSalesFrom=new Date(n.sales[n.sales.length-1].date)),this.showCashCustomerSales=!0):(this.toastr.error("Please login again.","Login session expired!"),this.authSrv.logout()):this.toastr.error(n.message),this.spinner.hide("newcustomer"),this.spinner.hide("date")}).catch(n=>{this.toastr.error(n),this.spinner.hide("newcustomer"),this.spinner.hide("date")})}filterCustomerSales(){this.spinner.show("date");const e={action:this.cryptoSrv.encodeEncryptText("get_cash_customer_periodic_sales"),cid:this.cashCustomerSelected.id,from:this.cryptoSrv.encodeEncryptText(this.customerSalesFrom.toLocaleString("sv-SE",{hour12:!1})),to:this.cryptoSrv.encodeEncryptText(this.customerSalesTo.toLocaleString("sv-SE",{hour12:!1})),added_by:this.authSrv.getUserDetailToken("uid")};this.apiSrv.post(e).then(i=>{"error"!=i.status?"error2"!=i.status?(this.filtedCashCustomerSales=i.sales,this.cashCustomerTotalPeriodSales=i.total):(this.toastr.error("Please login again.","Login session expired!"),this.authSrv.logout()):this.toastr.error(i.message),this.spinner.hide("date")}).catch(i=>{this.toastr.error(i),this.spinner.hide("date")})}showCustomerDateTransactions(e){this.dateSelected=e,this.spinner.show("date");const i={action:this.cryptoSrv.encodeEncryptText("get_cash_customer_date_sales"),cid:this.cashCustomerSelected.id,date:this.cryptoSrv.encodeEncryptText(e),added_by:this.authSrv.getUserDetailToken("uid")};this.apiSrv.post(i).then(n=>{"error"!=n.status?"error2"!=n.status?(this.customerDateSales=n.sales,this.showDateSales=!0):(this.toastr.error("Please login again.","Login session expired!"),this.authSrv.logout()):this.toastr.error(n.message),this.spinner.hide("date")}).catch(n=>{this.toastr.error(n),this.spinner.hide("date")})}showReceiptItems(e){this.transactionToView=e,this.spinner.show("newcustomer");const i={action:this.cryptoSrv.encodeEncryptText("get-cash-transaction-code-items"),code:this.cryptoSrv.encodeEncryptText(e.transaction_code)};this.apiSrv.post(i).then(n=>{"error"!=n.status?"error2"!=n.status?(this.transactionToView.items=n.items,this.displayItemsDialog=!0):(this.toastr.error("Please login again.","Login session expired!"),this.authSrv.logout()):this.toastr.error(n.message),this.spinner.hide("newcustomer")}).catch(n=>{this.toastr.error(n),this.spinner.hide("newcustomer")})}deleteDebtor(e){this.confirmationService.confirm({message:"Are you sure you want to delete this customer?",acceptButtonStyleClass:"p-button-primary p-button-sm",rejectButtonStyleClass:"p-button-danger p-button-sm",acceptLabel:"Yes",rejectLabel:"No",accept:()=>{this.spinner.show("newcustomer");const i={action:this.cryptoSrv.encodeEncryptText("delete-cash-customer"),customer_id:e.id,added_by:this.authSrv.getUserDetailToken("uid")};this.apiSrv.post(i).then(n=>{"error"!=n.status?"error2"!=n.status?(this.toastr.success("Customer deleted!"),this.myCashCustomers=this.myCashCustomers.filter(s=>s.id!=e.id),this.spinner.hide("newcustomer")):(this.spinner.hide("newcustomer"),this.toastr.error("Please login again.","Login session expired!"),this.authSrv.logout()):(this.spinner.hide("newcustomer"),this.toastr.error(n.message))}).catch(n=>{this.toastr.error(n),this.spinner.hide("newcustomer")})},reject:()=>{}})}showFloat(){this.floatAmount=0,this.floatDialog=!0}addFloat(){this.spinner.show("float");const e={action:this.cryptoSrv.encodeEncryptText("add-float"),float:this.cryptoSrv.encodeEncryptText(this.floatAmount.toString()),uid:this.authSrv.getUserDetailToken("uid")};this.apiSrv.post(e).then(i=>{"error"!=i.status?"error2"!=i.status?(this.floatDialog=!1,this.spinner.hide("float"),this.toastr.success("Float added!"),this.floatAmounts.push({id:i.id,amount:this.floatAmount})):(this.spinner.hide("float"),this.toastr.error("Please login again.","Login session expired!"),this.authSrv.logout()):(this.spinner.hide("float"),"locked"===i.message?(this.activateSellForm=!1,this.toastr.warning("Item is locked by "+i.user)):this.toastr.error(i.message))}).catch(i=>{this.toastr.error(i),this.spinner.hide("sell")})}getAllFloats(){this.spinner.show();const e={action:this.cryptoSrv.encodeEncryptText("get-user-today-floats"),uid:this.authSrv.getUserDetailToken("uid")};this.apiSrv.read(e).then(i=>{"error"!=i.status?"error2"!=i.status?(this.floatAmounts=i.float,this.spinner.hide(),this.displayFloatDialog=!0,this.loading=!1):(this.spinner.hide(),this.toastr.error("Please login again.","Login session expired!"),this.authSrv.logout()):(this.spinner.hide(),this.toastr.error(i.message))}).catch(i=>{this.toastr.error(i),this.spinner.hide()})}deleteFloat(e){this.spinner.show("float");const i={action:this.cryptoSrv.encodeEncryptText("delete-float"),uid:this.authSrv.getUserDetailToken("uid"),id:e.id};this.apiSrv.post(i).then(n=>{"error"!=n.status?"error2"!=n.status?(this.toastr.success("Amount deleted!"),this.floatAmounts=this.floatAmounts.filter(s=>s.id!==e.id)):(this.toastr.error("Please login again.","Login session expired!"),this.authSrv.logout()):this.toastr.error(n.message),this.spinner.hide("float")}).catch(n=>{this.toastr.error(n),this.spinner.hide("float")})}selectItemPrint(e){if(e.selling_units)this.itemToSellModel.location=null,this.showNotification=!1,this.activateSellForm=!1,this.itemToSellModel=e,this.itemToSellModel.location=null,this.itemToSellModel.unit=e.selling_units[0],this.itemToSellModel.unit_price=this.itemToSellModel.unit.recom_selling_price,this.itemToSellModel.discount=0,this.itemToSellModel.total_price=0,this.displaySellDialogPrint=!0;else{this.loading2=!0;let i=this.allStock.find(s=>s.id===e.id);this.itemToViewLocations=i;const n={action:this.cryptoSrv.encodeEncryptText("get_item_all_locations_quantity"),item_id:e.id,added_by:this.authSrv.getUserDetailToken("uid")};this.apiSrv.read(n).then(s=>{"error"!=s.status?"error2"!=s.status?(i.selling_units=s.selling_units,i.locations_qty=s.locations_qty,i.total_qty=s.total_qty,i.locations=s.locations,this.itemToSellModel.location=null,this.showNotification=!1,this.activateSellForm=!1,this.itemToSellModel=e,this.itemToSellModel.location=null,this.itemToSellModel.unit=e.selling_units[0],this.itemToSellModel.unit_price=this.itemToSellModel.unit.recom_selling_price,this.itemToSellModel.discount=0,this.itemToSellModel.total_price=0,this.displaySellDialogPrint=!0,this.checkPrice(),this.loading2=!1):(this.loading2=!1,this.toastr.error("Please login again.","Login session expired!"),this.authSrv.logout()):(this.loading2=!1,this.toastr.error(s.message))}).catch(s=>{this.toastr.error(s),this.loading2=!1})}}addToCartPrint(){this.spinner.show("sellw");const e=parseFloat(this.itemToSellModel.unit_quantity)*parseFloat(this.itemToSellModel.unit.unit_quantity),i=parseFloat(this.itemToSellModel.buying_price)*e,n=parseFloat(this.itemToSellModel.unit.min_selling_price),s=parseFloat(this.itemToSellModel.unit.recom_selling_price);this.itemToSellModel.unit_price=this.itemToSellModel.unit_price-this.itemToSellModel.discount/this.itemToSellModel.unit_quantity;const _={action:this.cryptoSrv.encodeEncryptText("add-item-to-print-list"),item_id:this.itemToSellModel.id,location_id:this.itemToSellModel.location.location.id,unit_id:this.itemToSellModel.unit.id,unit_qty:this.cryptoSrv.encodeEncryptText(this.itemToSellModel.unit_quantity.toString()),tt_qty:this.cryptoSrv.encodeEncryptText(e.toString()),unit_bp:this.cryptoSrv.encodeEncryptText(i.toString()),min_sp:this.cryptoSrv.encodeEncryptText(n.toString()),recom_sp:this.cryptoSrv.encodeEncryptText(s.toString()),unit_price:this.cryptoSrv.encodeEncryptText(this.itemToSellModel.unit_price.toString()),uid:this.authSrv.getUserDetailToken("uid")};this.apiSrv.post(_).then(r=>{"error"!=r.status?"error2"!=r.status?(this.activateSellForm=!1,this.displaySellDialogPrint=!1,this.toastr.success("Item added to list!"),this.allStock=r.stock,this.locations=r.locations,this.categories=r.categories,this.cartItems=r.cartItems,this.waitingCustomers=r.waiting,this.myCashCustomers=r.myCustomers,this.printItems=r.print_list,this.allStock.forEach(p=>{parseInt(p.prices_ok.toString())>0?(p.prices_ok=!1,p.sp_units_ok=!1,p.attention=1):(p.prices_ok=!0,p.sp_units_ok=!0),parseInt(p.min_qty_ok.toString())<1||parseInt(p.min_qty_ok.toString())>1?(p.min_qty_ok=!1,p.min_unit_ok=!1,p.attention=1):(p.min_qty_ok=!0,p.min_unit_ok=!0),p.locations_count=parseInt(p.locations_count.toString()),p.category=this.categories.find(h=>h.id===p.category_id)}),this.resetTotals(),this.spinner.hide("sellw")):(this.spinner.hide("sellw"),this.toastr.error("Please login again.","Login session expired!"),this.authSrv.logout()):(this.spinner.hide("sellw"),"locked"===r.message?(this.activateSellForm=!1,this.toastr.warning("Item is locked by "+r.user)):this.toastr.error(r.message))}).catch(r=>{this.toastr.error(r),this.spinner.hide("sell")})}confirmDeletePrintItem(e){this.spinner.show("print");const i=e.unit.unit_quantity*e.qty,n={action:this.cryptoSrv.encodeEncryptText("delete-item-from-print-list"),id:e.id,item_id:e.item.id,tt_qty:this.cryptoSrv.encodeEncryptText(i.toString()),location_id:e.location.id,added_by:this.authSrv.getUserDetailToken("uid")};this.apiSrv.post(n).then(s=>{"error"!=s.status?"error2"!=s.status?(this.allStock=s.stock,this.locations=s.locations,this.cartItems=s.cartItems,this.waitingCustomers=s.waiting,this.myCashCustomers=s.myCustomers,this.printItems=s.print_list,this.allStock.forEach(l=>{parseInt(l.prices_ok.toString())>0?(l.prices_ok=!1,l.sp_units_ok=!1,l.attention=1):(l.prices_ok=!0,l.sp_units_ok=!0),parseInt(l.min_qty_ok.toString())<1||parseInt(l.min_qty_ok.toString())>1?(l.min_qty_ok=!1,l.min_unit_ok=!1,l.attention=1):(l.min_qty_ok=!0,l.min_unit_ok=!0),l.locations_count=parseInt(l.locations_count.toString()),l.category=this.categories.find(_=>_.id===l.category_id)}),this.resetTotals(),this.toastr.success("Item deleted"),this.spinner.hide("print")):(this.toastr.error("Please login again.","Login session expired!"),this.authSrv.logout(),this.spinner.hide("print")):(this.spinner.hide("print"),"locked"===s.message?(this.activateSellForm=!1,this.toastr.warning("Item is locked by "+s.user)):this.toastr.error(s.message))}).catch(s=>{this.toastr.error(s),this.spinner.hide("waiting")})}checkQuantityPrint(){this.itemToSellModel.total_price=parseFloat(this.itemToSellModel.unit_quantity)*parseFloat(this.itemToSellModel.unit_price),this.itemToSellModel.total_price=this._decimalPipe.transform(this.itemToSellModel.total_price,"1.2-2")}hideSellFormPrint(){this.displaySellDialogPrint=!1,this.unLockItem(this.itemToSellModel)}printItemsList(){this.spinner.show("print"),new Date;const i={action:this.cryptoSrv.encodeEncryptText("complete-print-list"),added_by:this.authSrv.getUserDetailToken("uid")};this.apiSrv.post(i).then(n=>{"error"!=n.status?"error2"!=n.status?(this.receiptCustomer="Invoice",this.shopDetail=n.Shop,this.printTestPrint(),this.spinner.hide("print")):(this.spinner.hide("print"),this.toastr.error("Please login again.","Login session expired!"),this.authSrv.logout()):(this.spinner.hide("print"),"locked"===n.message?this.toastr.warning("Item is locked by "+n.user):this.toastr.error(n.message))}).catch(n=>{this.toastr.error(n),this.spinner.hide()})}getReprintData(){this.spinner.show();const e={action:this.cryptoSrv.encodeEncryptText("get-user-reprint-cash-transactions"),uid:this.authSrv.getUserDetailToken("uid")};this.apiSrv.read(e).then(i=>{"error"!=i.status?"error2"!=i.status?(this.reprintItems=i.transactions,this.spinner.hide(),this.reprintItems.forEach(n=>{n.transaction_code=this.cryptoSrv.decryptEncodedText(n.transaction_code)}),this.showReprintForm=!0,this.loading=!1):(this.spinner.hide(),this.toastr.error("Please login again.","Login session expired!"),this.authSrv.logout()):(this.spinner.hide(),this.toastr.error(i.message))}).catch(i=>{this.toastr.error(i),this.spinner.hide()})}getTimeValue(e){return new Date(e).toLocaleString("en-US",{hour12:!0}).split(", ")[1]}selectReceipt(e,i,n){this.transactionToView=e,this.spinner.show("reprint");const s={code:this.cryptoSrv.encodeEncryptText(this.transactionToView.transaction_code),uid:this.authSrv.getUserDetailToken("uid")};i||n?(this.receiptCustomer=e.customer.name,s.action=this.cryptoSrv.encodeEncryptText("get-user-cash-reprint-items")):s.action=this.cryptoSrv.encodeEncryptText("get-cash-transaction-code-items"),this.apiSrv.read(s).then(l=>{"error"!=l.status?"error2"!=l.status?(this.spinner.hide("reprint"),i||n?(this.totalCartAmount=0,this.shopDetail=l.Shop,this.cartItems=l.items,this.cartItems.forEach(_=>{this.totalCartAmount+=_.qty*_.sp}),i&&this.printTest(),n&&this.printDeliveryTest()):(this.transactionToView.items=l.items,this.displayItemsDialog=!0),this.loading=!1):(this.spinner.hide("reprint"),this.toastr.error("Please login again.","Login session expired!"),this.authSrv.logout()):(this.spinner.hide("reprint"),this.toastr.error(l.message))}).catch(l=>{this.toastr.error(l),this.spinner.hide("reprint")})}createPrintData(){let e={};e.name=this.cryptoSrv.decryptEncodedText(this.shopDetail.name),e.tcode=this.cryptoSrv.decryptEncodedText(this.shopDetail.tcode),e.username=this.cryptoSrv.decryptEncodedText(this.shopDetail.username),e.location=this.cryptoSrv.decryptEncodedText(this.shopDetail.location),e.description=this.cryptoSrv.decryptEncodedText(this.shopDetail.description),e.contacts=[],this.shopDetail.contacts.forEach(c=>{let x=this.cryptoSrv.decryptEncodedText(c);e.contacts.push(x)}),e.receipt_options={},e.receipt_options.till=this.cryptoSrv.decryptEncodedText(this.shopDetail.receipt_options.till),e.receipt_options.paybill=this.cryptoSrv.decryptEncodedText(this.shopDetail.receipt_options.paybill),e.receipt_options.paybill_account=this.cryptoSrv.decryptEncodedText(this.shopDetail.receipt_options.paybill_account),e.receipt_options.mpesa_business_name=this.cryptoSrv.decryptEncodedText(this.shopDetail.receipt_options.mpesa_business_name),e.receipt_options.footer_message=this.cryptoSrv.decryptEncodedText(this.shopDetail.receipt_options.footer_message),e.receipt_options.image_url=this.cryptoSrv.decryptEncodedText(this.shopDetail.receipt_options.image_url);var i="";i+="\x1b!\0";let s=0,l=0,_=0;this.cartItems.forEach(c=>{const x=c.unit.unit_name.length+c.unit.unit_quantity.toString().length;s=Math.max(s,x);const A=c.qty.toString().length;l=Math.max(l,A);const S=c.sp.toString().length;_=Math.max(_,S)});const r="UNIT",h="@PRICE",T=l-"QTY".length+6,k=_-h.length+3,v=r+" ".repeat(s-r.length+5)+"QTY"+" ".repeat(T)+h+" ".repeat(k)+"TOTAL";i+="\x1bE\r",i+="-----------------------------------------------\n",i+=v+"\n",i+="-----------------------------------------------\n\n",i+="\x1bE\n",this.cartItems.forEach(c=>{i+=c.item.name+"  -  "+c.location.name+"\n";const x=y(c.unit.unit_name)+"("+(0,d.uf)(c.unit.unit_quantity,this.locale,".0")+")   x",A=(0,d.uf)(c.qty,this.locale,".0"),S=(0,d.uf)(c.sp,this.locale,".2"),J=(0,d.uf)(parseFloat(c.sp.toString())*parseFloat(c.qty.toString()),this.locale,".2"),Q=l-A.length+6,G=_-S.length+3;i+=x+" ".repeat(s-x.length+5)+A+" ".repeat(Q)+S+" ".repeat(G)+J+"\n",i+="\n\n",i+="\x1ba0"});var f="";f+="\x1bE\r",""!==e.receipt_options.till&&(f+="LIPA NA MPESA TILL NUMBER: "+e.receipt_options.till+"\n",""===e.receipt_options.paybill&&(f+="\n")),""!==e.receipt_options.paybill&&(""!==e.receipt_options.till&&(f+="\n"),f+="M-PESA PAYBILL NUMBER: "+e.receipt_options.paybill+"\n",f+="PAYBILL ACCOUNT: "+e.receipt_options.paybill_account+"\n",f+="\n"),(""!==e.receipt_options.paybill||""!==e.receipt_options.till)&&(f+="\x1bE\n",f+="M-PESA BUSINESS NAME: "+e.receipt_options.mpesa_business_name+"\n",f+="\n"),new Date;var M=new d.uU("en-US");const b=Date.now(),E=M.transform(b,"medium"),C=e.name.toUpperCase();this.receiptCustomer=y(this.receiptCustomer);var g=function(c){return String.fromCharCode(c)},u="\x1dh"+g(70)+"\x1df"+g(0)+"\x1dk"+g(69)+g(e.tcode.length)+e.tcode+g(0);let m="";if(this.showReprintForm?(m+="Cash:     "+(0,d.uf)(this.transactionToView.payment.cash,this.locale,".2")+"\n",m+="Mpesa:    "+(0,d.uf)(this.transactionToView.payment.mpesa,this.locale,".2")+"\n",m+="Bank:     "+(0,d.uf)(this.transactionToView.payment.bank,this.locale,".2")+"\n\n"):(m+="Cash:     "+(0,d.uf)(this.paymentModel.cash_amount,this.locale,".2")+"\n",m+="Mpesa:    "+(0,d.uf)(this.paymentModel.mpesa_amount,this.locale,".2")+"\n",m+="Bank:     "+(0,d.uf)(this.paymentModel.bank_amount,this.locale,".2")+"\n",0!=parseInt(this.changeToGive)&&"cash"===this.paymentModel.pay_method?m+="Change:   "+(0,d.uf)(parseInt(this.changeToGive),this.locale,".2")+"\n\n":m+="\n",this.changeToGive="0"),""!==e.receipt_options.image_url){const c=(0,d.uf)(this.totalCartAmount,this.locale,".2");let x="";return this.shopDetail.contacts.forEach(S=>{x+=this.cryptoSrv.decryptEncodedText(S)+", "}),["\x1b@","\x1ba1","\x1d!\x10","\x1bE\r","\x1d!\x10",C+"\n","\n",{type:"raw",format:"image",flavor:"file",data:this.shopLogoUrl+this.cryptoSrv.decryptEncodedText(this.shopDetail.receipt_options.image_url),options:{language:"ESCPOS",dotDensity:"single"}},"\x1bE\n","\x1d!\0","\x1d!\0","\n",e.description+"\n",e.location+"\n","FOR ENQUIRIES CALL: "+x+"\n","\n","\x1ba0","\x1bE\r","\n","ORDER FOR; "+this.receiptCustomer+"\n","\x1bE\n","\n",i+"\n","-----------------------------------------------\n","\x1bE\r","\x1d!\x10","TOTAL     "+c,"\n","\x1d!\0","-----------------------------------------------\n",m,"\x1ba1","\x1bE\n",this.showReprintForm?"":u+"\n",f,"\x1bE\r","THIS RECEIPT IS NOT VALID FOR GOODS FOR\n","LATER COLLECTION\n","\x1bE\n","** THANK YOU AND WELCOME AGAIN **\n","RECEIPT # "+this.shopDetail.tcode+"  "+E+"\n\n","Served by "+y(e.username),"\n","\n\n\n\n\n\n\n","\x1dV\0"]}{const c=(0,d.uf)(this.totalCartAmount,this.locale,".2");let x="";return this.shopDetail.contacts.forEach(S=>{x+=this.cryptoSrv.decryptEncodedText(S)+", "}),["\x1b@","\x1ba1","\x1d!\x10","\x1bE\r",C+"\n","\x1bE\n","\x1d!\0","\x1d!\0","\n",e.description+"\n",e.location+"\n","FOR ENQUIRIES CALL: "+x+"\n","\n","\x1ba0","\x1bE\r","ORDER FOR; "+this.receiptCustomer+"\n","\x1bE\n","\n",i+"\n","-----------------------------------------------\n","\x1bE\r","\x1d!\x10","TOTAL     "+c,"\n","\x1bE\n","\x1d!\0","-----------------------------------------------\n",m,"\x1ba1",this.showReprintForm?"":u,f,"\x1bE\r","THIS RECEIPT IS NOT VALID FOR GOODS FOR\n","LATER COLLECTION\n","\x1bE\n","** THANK YOU AND WELCOME AGAIN **\n","RECEIPT # "+e.tcode+"  "+E+"\n\n","Served by "+y(e.username),"\n","\n\n\n\n\n\n\n","\x1dV\0"]}}createPrintDataDelivery(){let e={};e.name=this.cryptoSrv.decryptEncodedText(this.shopDetail.name),e.tcode=this.cryptoSrv.decryptEncodedText(this.shopDetail.tcode),e.username=this.cryptoSrv.decryptEncodedText(this.shopDetail.username),e.location=this.cryptoSrv.decryptEncodedText(this.shopDetail.location),e.description=this.cryptoSrv.decryptEncodedText(this.shopDetail.description),e.contacts=[],this.shopDetail.contacts.forEach(g=>{let u=this.cryptoSrv.decryptEncodedText(g);e.contacts.push(u)}),e.receipt_options={},e.receipt_options.till=this.cryptoSrv.decryptEncodedText(this.shopDetail.receipt_options.till),e.receipt_options.paybill=this.cryptoSrv.decryptEncodedText(this.shopDetail.receipt_options.paybill),e.receipt_options.paybill_account=this.cryptoSrv.decryptEncodedText(this.shopDetail.receipt_options.paybill_account),e.receipt_options.mpesa_business_name=this.cryptoSrv.decryptEncodedText(this.shopDetail.receipt_options.mpesa_business_name),e.receipt_options.footer_message=this.cryptoSrv.decryptEncodedText(this.shopDetail.receipt_options.footer_message),e.receipt_options.image_url=this.cryptoSrv.decryptEncodedText(this.shopDetail.receipt_options.image_url);var i="";i+="\x1b!\0";let s=0,l=0,_=0;this.cartItems.forEach(g=>{const u=g.unit.unit_name.length+g.unit.unit_quantity.toString().length;s=Math.max(s,u);const m=g.qty.toString().length;l=Math.max(l,m);const c=g.sp.toString().length;_=Math.max(_,c)});const r="UNIT",w=l-"QTY".length+6,I=r+" ".repeat(s-r.length+5)+"QTY"+" ".repeat(w);i+="\x1bE\r",i+="-----------------------------------------------\n",i+=I+"\n",i+="-----------------------------------------------\n\n",i+="\x1bE\n",this.cartItems.forEach(g=>{i+=g.item.name+"  -  "+g.location.name+"\n";const u=y(g.unit.unit_name)+"("+(0,d.uf)(g.unit.unit_quantity,this.locale,".0")+")   x",m=(0,d.uf)(g.qty,this.locale,".0"),x=l-m.length+6;i+=u+" ".repeat(s-u.length+5)+m+" ".repeat(x)+" \n",i+="\n\n",i+="\x1ba0"}),new Date;var v=new d.uU("en-US");const f=Date.now(),D=v.transform(f,"medium"),M=e.name.toUpperCase();this.receiptCustomer=y(this.receiptCustomer);var b=function(g){return String.fromCharCode(g)};b(70),b(0),b(69),b(e.tcode.length),b(0);let C="";if(this.showReprintForm?(C+="Cash:     "+(0,d.uf)(this.transactionToView.payment.cash,this.locale,".2")+"\n",C+="Mpesa:    "+(0,d.uf)(this.transactionToView.payment.mpesa,this.locale,".2")+"\n",C+="Bank:     "+(0,d.uf)(this.transactionToView.payment.bank,this.locale,".2")+"\n\n"):(C+="Cash:     "+(0,d.uf)(this.paymentModel.cash_amount,this.locale,".2")+"\n",C+="Mpesa:    "+(0,d.uf)(this.paymentModel.mpesa_amount,this.locale,".2")+"\n",C+="Bank:     "+(0,d.uf)(this.paymentModel.bank_amount,this.locale,".2")+"\n",0!=parseInt(this.changeToGive)&&"cash"===this.paymentModel.pay_method?C+="Change:   "+(0,d.uf)(parseInt(this.changeToGive),this.locale,".2")+"\n\n":C+="\n",this.changeToGive="0"),""!==e.receipt_options.image_url){(0,d.uf)(this.totalCartAmount,this.locale,".2");let u="";return this.shopDetail.contacts.forEach(c=>{u+=this.cryptoSrv.decryptEncodedText(c)+", "}),["\x1b@","\x1ba1","\x1d!\x10","\x1bE\r","\x1d!\x10",M+"\n","\n",{type:"raw",format:"image",flavor:"file",data:this.shopLogoUrl+this.cryptoSrv.decryptEncodedText(this.shopDetail.receipt_options.image_url),options:{language:"ESCPOS",dotDensity:"single"}},"\x1bE\n","\x1d!\0","\x1d!\0","\n",e.description+"\n",e.location+"\n","FOR ENQUIRIES CALL: "+u+"\n","\n","\x1bE\r","\x1d!\x10","DELIVERY NOTE\n","\n","\x1d!\0","\x1ba0","ORDER FOR; "+this.receiptCustomer+"\n","\x1bE\n","\n",i+"\n","\x1bE\r","\x1d!\x10","\n","\x1d!\0","\x1ba1","\x1bE\n","\x1bE\r","Received by __________________________________________\n\n","Sign  ___________________________________________\n\n","Date  ___________________________________________\n\n","\x1bE\n","** THANK YOU AND WELCOME AGAIN **\n","RECEIPT # "+e.tcode+"  "+D+"\n\n","Served by "+y(e.username),"\n","\n\n\n\n\n\n\n","\x1dV\0"]}{(0,d.uf)(this.totalCartAmount,this.locale,".2");let u="";return this.shopDetail.contacts.forEach(c=>{u+=this.cryptoSrv.decryptEncodedText(c)+", "}),["\x1b@","\x1ba1","\x1d!\x10","\x1bE\r","\x1d!\x10",M+"\n","\n","\x1bE\n","\x1d!\0","\x1d!\0","\n",e.description+"\n",e.location+"\n","FOR ENQUIRIES CALL: "+u+"\n","\n","\x1bE\r","\x1d!\x10","DELIVERY NOTE\n","\n","\x1d!\0","\x1ba0","ORDER FOR; "+this.receiptCustomer+"\n","\x1bE\n","\n",i+"\n","\x1bE\r","\x1d!\x10","\n","\x1d!\0","\x1ba1","\x1bE\n","\x1bE\r","Received by __________________________________________\n\n","Sign  ___________________________________________\n\n","Date  ___________________________________________\n\n","\x1bE\n","** THANK YOU AND WELCOME AGAIN **\n","RECEIPT # "+e.tcode+"  "+D+"\n\n","Served by "+y(e.username),"\n","\n\n\n\n\n\n\n","\x1dV\0"]}}createPrintDataWaiting(){let e={};e.name=this.cryptoSrv.decryptEncodedText(this.shopDetail.name),e.tcode=this.cryptoSrv.decryptEncodedText(this.shopDetail.tcode),e.username=this.cryptoSrv.decryptEncodedText(this.shopDetail.username),e.location=this.cryptoSrv.decryptEncodedText(this.shopDetail.location),e.description=this.cryptoSrv.decryptEncodedText(this.shopDetail.description),e.contacts=[],this.shopDetail.contacts.forEach(c=>{let x=this.cryptoSrv.decryptEncodedText(c);e.contacts.push(x)}),e.receipt_options={},e.receipt_options.till=this.cryptoSrv.decryptEncodedText(this.shopDetail.receipt_options.till),e.receipt_options.paybill=this.cryptoSrv.decryptEncodedText(this.shopDetail.receipt_options.paybill),e.receipt_options.paybill_account=this.cryptoSrv.decryptEncodedText(this.shopDetail.receipt_options.paybill_account),e.receipt_options.mpesa_business_name=this.cryptoSrv.decryptEncodedText(this.shopDetail.receipt_options.mpesa_business_name),e.receipt_options.footer_message=this.cryptoSrv.decryptEncodedText(this.shopDetail.receipt_options.footer_message),e.receipt_options.image_url=this.cryptoSrv.decryptEncodedText(this.shopDetail.receipt_options.image_url);var i="";i+="\x1b!\0";let s=0,l=0,_=0;this.waitingCustomerSelected.items.forEach(c=>{const x=c.unit.unit_name.length+c.unit.unit_quantity.toString().length;s=Math.max(s,x);const A=c.qty.toString().length;l=Math.max(l,A);const S=c.sp.toString().length;_=Math.max(_,S)});const r="UNIT",h="@PRICE",T=l-"QTY".length+6,k=_-h.length+3,v=r+" ".repeat(s-r.length+5)+"QTY"+" ".repeat(T)+h+" ".repeat(k)+"TOTAL";i+="\x1bE\r",i+="-----------------------------------------------\n",i+=v+"\n",i+="-----------------------------------------------\n\n",i+="\x1bE\n",this.waitingCustomerSelected.items.forEach(c=>{i+=c.item.name+"  -  "+c.location.name+"\n";const x=y(c.unit.unit_name)+"("+(0,d.uf)(c.unit.unit_quantity,this.locale,".0")+")   x",A=(0,d.uf)(c.qty,this.locale,".0"),S=(0,d.uf)(c.sp,this.locale,".2"),J=(0,d.uf)(parseFloat(c.sp.toString())*parseFloat(c.qty.toString()),this.locale,".2"),Q=l-A.length+6,G=_-S.length+3;i+=x+" ".repeat(s-x.length+5)+A+" ".repeat(Q)+S+" ".repeat(G)+J+"\n",i+="\n\n",i+="\x1ba0"});var f="";f+="\x1bE\r",""!==e.receipt_options.till&&(f+="LIPA NA MPESA TILL NUMBER: "+e.receipt_options.till+"\n",""===e.receipt_options.paybill&&(f+="\n")),""!==e.receipt_options.paybill&&(""!==e.receipt_options.till&&(f+="\n"),f+="M-PESA PAYBILL NUMBER: "+e.receipt_options.paybill+"\n",f+="PAYBILL ACCOUNT: "+e.receipt_options.paybill_account+"\n",f+="\n"),(""!==e.receipt_options.paybill||""!==e.receipt_options.till)&&(f+="\x1bE\n",f+="M-PESA BUSINESS NAME: "+e.receipt_options.mpesa_business_name+"\n",f+="\n"),new Date;var M=new d.uU("en-US");const b=Date.now(),E=M.transform(b,"medium"),C=e.name.toUpperCase();this.receiptCustomer=y(this.waitingCustomerSelected.customer);var g=function(c){return String.fromCharCode(c)},u="\x1dh"+g(70)+"\x1df"+g(0)+"\x1dk"+g(69)+g(e.tcode.length)+e.tcode+g(0);let m="";if(this.showReprintForm?(m+="Cash:     "+(0,d.uf)(this.transactionToView.payment.cash,this.locale,".2")+"\n",m+="Mpesa:    "+(0,d.uf)(this.transactionToView.payment.mpesa,this.locale,".2")+"\n",m+="Bank:     "+(0,d.uf)(this.transactionToView.payment.bank,this.locale,".2")+"\n\n"):(m+="Cash:     "+(0,d.uf)(this.paymentModel.cash_amount,this.locale,".2")+"\n",m+="Mpesa:    "+(0,d.uf)(this.paymentModel.mpesa_amount,this.locale,".2")+"\n",m+="Bank:     "+(0,d.uf)(this.paymentModel.bank_amount,this.locale,".2")+"\n",0!=parseInt(this.changeToGive)&&"cash"===this.paymentModel.pay_method?m+="Change:   "+(0,d.uf)(parseInt(this.changeToGive),this.locale,".2")+"\n\n":m+="\n",this.changeToGive="0"),""!==e.receipt_options.image_url){const c=(0,d.uf)(this.totalCartAmountWaiting,this.locale,".2");let x="";return this.shopDetail.contacts.forEach(S=>{x+=this.cryptoSrv.decryptEncodedText(S)+", "}),["\x1b@","\x1ba1","\x1d!\x10","\x1bE\r","\x1d!\x10",C+"\n","\n",{type:"raw",format:"image",flavor:"file",data:this.shopLogoUrl+this.cryptoSrv.decryptEncodedText(this.shopDetail.receipt_options.image_url),options:{language:"ESCPOS",dotDensity:"single"}},"\x1bE\n","\x1d!\0","\x1d!\0","\n",e.description+"\n",e.location+"\n","FOR ENQUIRIES CALL: "+x+"\n","\n","\x1ba0","\x1bE\r","ORDER FOR; "+this.receiptCustomer+"\n","\x1bE\n","\n",i+"\n","-----------------------------------------------\n","\x1bE\r","\x1d!\x10","TOTAL     "+c,"\n","\x1bE\n","\x1d!\0","-----------------------------------------------\n",m,"\x1ba1",this.showReprintForm?"":u,f,"\x1bE\r","THIS RECEIPT IS NOT VALID FOR GOODS FOR\n","LATER COLLECTION\n","\x1bE\n","** THANK YOU AND WELCOME AGAIN **\n","RECEIPT # "+e.tcode+"  "+E+"\n\n","Served by "+y(e.username),"\n","\n\n\n\n\n\n\n","\x1dV\0"]}{const c=(0,d.uf)(this.totalCartAmountWaiting,this.locale,".2");let x="";return this.shopDetail.contacts.forEach(S=>{x+=this.cryptoSrv.decryptEncodedText(S)+", "}),["\x1b@","\x1ba1","\x1d!\x10","\x1bE\r",C+"\n","\x1bE\n","\x1d!\0","\x1d!\0","\n",e.description+"\n",e.location+"\n","FOR ENQUIRIES CALL: "+x+"\n","\n","\x1ba0","\x1bE\r","ORDER FOR; "+this.receiptCustomer+"\n","\x1bE\n","\n",i+"\n","-----------------------------------------------\n","\x1bE\r","\x1d!\x10","TOTAL     "+c,"\n","\x1bE\n","\x1d!\0","-----------------------------------------------\n",m,"\x1ba1",this.showReprintForm?"":u,f,"\x1bE\r","THIS RECEIPT IS NOT VALID FOR GOODS FOR\n","LATER COLLECTION\n","\x1bE\n","** THANK YOU AND WELCOME AGAIN **\n","RECEIPT # "+e.tcode+"  "+E+"\n\n","Served by "+y(e.username),"\n","\n\n\n\n\n\n\n","\x1dV\0"]}}createPrintDataWaitingDelivery(){let e={};e.name=this.cryptoSrv.decryptEncodedText(this.shopDetail.name),e.tcode=this.cryptoSrv.decryptEncodedText(this.shopDetail.tcode),e.username=this.cryptoSrv.decryptEncodedText(this.shopDetail.username),e.location=this.cryptoSrv.decryptEncodedText(this.shopDetail.location),e.description=this.cryptoSrv.decryptEncodedText(this.shopDetail.description),e.contacts=[],this.shopDetail.contacts.forEach(g=>{let u=this.cryptoSrv.decryptEncodedText(g);e.contacts.push(u)}),e.receipt_options={},e.receipt_options.till=this.cryptoSrv.decryptEncodedText(this.shopDetail.receipt_options.till),e.receipt_options.paybill=this.cryptoSrv.decryptEncodedText(this.shopDetail.receipt_options.paybill),e.receipt_options.paybill_account=this.cryptoSrv.decryptEncodedText(this.shopDetail.receipt_options.paybill_account),e.receipt_options.mpesa_business_name=this.cryptoSrv.decryptEncodedText(this.shopDetail.receipt_options.mpesa_business_name),e.receipt_options.footer_message=this.cryptoSrv.decryptEncodedText(this.shopDetail.receipt_options.footer_message),e.receipt_options.image_url=this.cryptoSrv.decryptEncodedText(this.shopDetail.receipt_options.image_url);var i="";i+="\x1b!\0";let s=0,l=0,_=0;this.waitingCustomerSelected.items.forEach(g=>{const u=g.unit.unit_name.length+g.unit.unit_quantity.toString().length;s=Math.max(s,u);const m=g.qty.toString().length;l=Math.max(l,m);const c=g.sp.toString().length;_=Math.max(_,c)});const r="UNIT",w=l-"QTY".length+6,I=r+" ".repeat(s-r.length+5)+"QTY"+" ".repeat(w)+" ";i+="\x1bE\r",i+="-----------------------------------------------\n",i+=I+"\n",i+="-----------------------------------------------\n\n",i+="\x1bE\n",this.waitingCustomerSelected.items.forEach(g=>{i+=g.item.name+"  -  "+g.location.name+"\n";const u=y(g.unit.unit_name)+"("+(0,d.uf)(g.unit.unit_quantity,this.locale,".0")+")   x",m=(0,d.uf)(g.qty,this.locale,".0"),x=l-m.length+6;i+=u+" ".repeat(s-u.length+5)+m+" ".repeat(x)+" \n",i+="\n\n",i+="\x1ba0"}),new Date;var v=new d.uU("en-US");const f=Date.now(),D=v.transform(f,"medium"),M=e.name.toUpperCase();this.receiptCustomer=y(this.waitingCustomerSelected.customer);var b=function(g){return String.fromCharCode(g)};b(70),b(0),b(69),b(e.tcode.length),b(0);let C="";if(this.showReprintForm?(C+="Cash:     "+(0,d.uf)(this.transactionToView.payment.cash,this.locale,".2")+"\n",C+="Mpesa:    "+(0,d.uf)(this.transactionToView.payment.mpesa,this.locale,".2")+"\n",C+="Bank:     "+(0,d.uf)(this.transactionToView.payment.bank,this.locale,".2")+"\n\n"):(C+="Cash:     "+(0,d.uf)(this.paymentModel.cash_amount,this.locale,".2")+"\n",C+="Mpesa:    "+(0,d.uf)(this.paymentModel.mpesa_amount,this.locale,".2")+"\n",C+="Bank:     "+(0,d.uf)(this.paymentModel.bank_amount,this.locale,".2")+"\n",0!=parseInt(this.changeToGive)&&"cash"===this.paymentModel.pay_method?C+="Change:   "+(0,d.uf)(parseInt(this.changeToGive),this.locale,".2")+"\n\n":C+="\n",this.changeToGive="0"),""!==this.shopDetail.receipt_options.image_url){(0,d.uf)(this.totalCartAmountWaiting,this.locale,".2");let u="";return this.shopDetail.contacts.forEach(c=>{u+=this.cryptoSrv.decryptEncodedText(c)+", "}),["\x1b@","\x1ba1","\x1d!\x10","\x1bE\r","\x1d!\x10",M+"\n","\n",{type:"raw",format:"image",flavor:"file",data:this.shopLogoUrl+this.cryptoSrv.decryptEncodedText(this.shopDetail.receipt_options.image_url),options:{language:"ESCPOS",dotDensity:"single"}},"\x1bE\n","\x1d!\0","\x1d!\0","\n",e.description+"\n",e.location+"\n","FOR ENQUIRIES CALL: "+u+"\n","\n","\x1bE\r","\x1d!\x10","DELIVERY NOTE\n","\n","\x1d!\0","\x1ba0","ORDER FOR; "+this.receiptCustomer+"\n","\x1bE\n","\n",i+"\n","\x1bE\r","\x1d!\x10","\n","\x1bE\n","\x1d!\0","\x1ba1","\x1bE\r","Received by __________________________________________\n\n","Sign  ___________________________________________\n\n","Date  ___________________________________________\n\n","\x1bE\n","** THANK YOU AND WELCOME AGAIN **\n","RECEIPT # "+e.tcode+"  "+D+"\n\n","Served by "+y(e.username),"\n","\n\n\n\n\n\n\n","\x1dV\0"]}{(0,d.uf)(this.totalCartAmountWaiting,this.locale,".2");let u="";return this.shopDetail.contacts.forEach(c=>{u+=this.cryptoSrv.decryptEncodedText(c)+", "}),["\x1b@","\x1ba1","\x1d!\x10","\x1bE\r","\x1d!\x10",M+"\n","\n","\x1bE\n","\x1d!\0","\x1d!\0","\n",e.description+"\n",e.location+"\n","FOR ENQUIRIES CALL: "+u+"\n","\n","\x1bE\r","\x1d!\x10","DELIVERY NOTE\n","\n","\x1d!\0","\x1ba0","ORDER FOR; "+this.receiptCustomer+"\n","\x1bE\n","\n",i+"\n","\x1bE\r","\x1d!\x10","\n","\x1bE\n","\x1d!\0","\x1ba1","\x1bE\r","Received by __________________________________________\n\n","Sign  ___________________________________________\n\n","Date  ___________________________________________\n\n","\x1bE\n","** THANK YOU AND WELCOME AGAIN **\n","RECEIPT # "+e.tcode+"  "+D+"\n\n","Served by "+y(e.username),"\n","\n\n\n\n\n\n\n","\x1dV\0"]}}createPrintDataCashCustomer(){let e={};e.name=this.cryptoSrv.decryptEncodedText(this.shopDetail.name),e.tcode=this.cryptoSrv.decryptEncodedText(this.shopDetail.tcode),e.username=this.cryptoSrv.decryptEncodedText(this.shopDetail.username),e.location=this.cryptoSrv.decryptEncodedText(this.shopDetail.location),e.description=this.cryptoSrv.decryptEncodedText(this.shopDetail.description),e.contacts=[],this.shopDetail.contacts.forEach(c=>{let x=this.cryptoSrv.decryptEncodedText(c);e.contacts.push(x)}),e.receipt_options={},e.receipt_options.till=this.cryptoSrv.decryptEncodedText(this.shopDetail.receipt_options.till),e.receipt_options.paybill=this.cryptoSrv.decryptEncodedText(this.shopDetail.receipt_options.paybill),e.receipt_options.paybill_account=this.cryptoSrv.decryptEncodedText(this.shopDetail.receipt_options.paybill_account),e.receipt_options.mpesa_business_name=this.cryptoSrv.decryptEncodedText(this.shopDetail.receipt_options.mpesa_business_name),e.receipt_options.footer_message=this.cryptoSrv.decryptEncodedText(this.shopDetail.receipt_options.footer_message),e.receipt_options.image_url=this.cryptoSrv.decryptEncodedText(this.shopDetail.receipt_options.image_url);var i="";i+="\x1b!\0";let s=0,l=0,_=0;this.cashCustomerSelected.items.forEach(c=>{const x=c.unit.unit_name.length+c.unit.unit_quantity.toString().length;s=Math.max(s,x);const A=c.qty.toString().length;l=Math.max(l,A);const S=c.sp.toString().length;_=Math.max(_,S)});const r="UNIT",h="@PRICE",T=l-"QTY".length+8,k=_-h.length+5,v=r+" ".repeat(s-r.length+5)+"QTY"+" ".repeat(T)+h+" ".repeat(k)+"TOTAL";i+="\x1bE\r",i+="-----------------------------------------------\n",i+=v+"\n",i+="-----------------------------------------------\n\n",i+="\x1bE\n",this.cashCustomerSelected.items.forEach(c=>{i+=c.item.name+"  -  "+c.location.name+"\n";const x=y(c.unit.unit_name)+"("+(0,d.uf)(c.unit.unit_quantity,this.locale,".0")+")   x",A=(0,d.uf)(c.qty,this.locale,".0"),S=(0,d.uf)(c.sp,this.locale,".2"),J=(0,d.uf)(parseFloat(c.sp.toString())*parseFloat(c.qty.toString()),this.locale,".2"),Q=l-A.length+8,G=_-S.length+5;i+=x+" ".repeat(s-x.length+5)+A+" ".repeat(Q)+S+" ".repeat(G)+J+"\n",i+="\n\n",i+="\x1ba0"});var f="";f+="\x1bE\r",""!==e.receipt_options.till&&(f+="LIPA NA MPESA TILL NUMBER: "+e.receipt_options.till+"\n",""===e.receipt_options.paybill&&(f+="\n")),""!==e.receipt_options.paybill&&(""!==e.receipt_options.till&&(f+="\n"),f+="M-PESA PAYBILL NUMBER: "+e.receipt_options.paybill+"\n",f+="PAYBILL ACCOUNT: "+e.receipt_options.paybill_account+"\n",f+="\n"),(""!==e.receipt_options.paybill||""!==e.receipt_options.till)&&(f+="\x1bE\n",f+="M-PESA BUSINESS NAME: "+e.receipt_options.mpesa_business_name+"\n",f+="\n"),new Date;var M=new d.uU("en-US");const b=Date.now(),E=M.transform(b,"medium"),C=e.name.toUpperCase();this.receiptCustomer=y(this.cashCustomerSelected.name);var g=function(c){return String.fromCharCode(c)},u="\x1dh"+g(70)+"\x1df"+g(0)+"\x1dk"+g(69)+g(e.tcode.length)+e.tcode+g(0);let m="";if(this.showReprintForm?(m+="Cash:     "+(0,d.uf)(this.transactionToView.payment.cash,this.locale,".2")+"\n",m+="Mpesa:    "+(0,d.uf)(this.transactionToView.payment.mpesa,this.locale,".2")+"\n",m+="Bank:     "+(0,d.uf)(this.transactionToView.payment.bank,this.locale,".2")+"\n\n"):(m+="Cash:     "+(0,d.uf)(this.paymentModel.cash_amount,this.locale,".2")+"\n",m+="Mpesa:    "+(0,d.uf)(this.paymentModel.mpesa_amount,this.locale,".2")+"\n",m+="Bank:     "+(0,d.uf)(this.paymentModel.bank_amount,this.locale,".2")+"\n\n"),""!==e.receipt_options.image_url){const c=(0,d.uf)(this.totalCartAmountCustomer,this.locale,".2");let x="";return this.shopDetail.contacts.forEach(S=>{x+=this.cryptoSrv.decryptEncodedText(S)+", "}),["\x1b@","\x1ba1","\x1d!\x10","\x1bE\r","\x1d!\x10",C+"\n","\n",{type:"raw",format:"image",flavor:"file",data:this.shopLogoUrl+this.cryptoSrv.decryptEncodedText(this.shopDetail.receipt_options.image_url),options:{language:"ESCPOS",dotDensity:"single"}},"\x1bE\n","\x1d!\0","\x1d!\0","\n",e.description+"\n",e.location+"\n","FOR ENQUIRIES CALL: "+x+"\n","\n","\x1ba0","\x1bE\r","ORDER FOR; "+this.receiptCustomer+"\n","\x1bE\n","\n",i+"\n","-----------------------------------------------\n","\x1bE\r","\x1d!\x10","TOTAL     "+c,"\n","\x1bE\n","\x1d!\0","-----------------------------------------------\n",m,"\x1ba1",this.showReprintForm?"":u,f,"\x1bE\r","THIS RECEIPT IS NOT VALID FOR GOODS FOR\n","LATER COLLECTION\n","\x1bE\n","** THANK YOU AND WELCOME AGAIN **\n","RECEIPT # "+e.tcode+"  "+E+"\n\n","Served by "+y(e.username),"\n","\n\n\n\n\n\n\n","\x1dV\0"]}{const c=(0,d.uf)(this.totalCartAmountCustomer,this.locale,".2");let x="";return this.shopDetail.contacts.forEach(S=>{x+=this.cryptoSrv.decryptEncodedText(S)+", "}),["\x1b@","\x1ba1","\x1d!\x10","\x1bE\r",C+"\n","\x1bE\n","\x1d!\0","\x1d!\0","\n",e.description+"\n",e.location+"\n","FOR ENQUIRIES CALL: "+x+"\n","\n","\x1ba0","\x1bE\r","ORDER FOR; "+this.receiptCustomer+"\n","\x1bE\n","\n",i+"\n","-----------------------------------------------\n","\x1bE\r","\x1d!\x10","TOTAL     "+c,"\n","\x1bE\n","\x1d!\0","-----------------------------------------------\n",m,"\x1ba1",this.showReprintForm?"":u,f,"\x1bE\r","THIS RECEIPT IS NOT VALID FOR GOODS FOR\n","LATER COLLECTION\n","\x1bE\n","** THANK YOU AND WELCOME AGAIN **\n","RECEIPT # "+e.tcode+"  "+E+"\n\n","Served by "+y(e.username),"\n","\n\n\n\n\n\n\n","\x1dV\0"]}}createPrintDataPrint(){this.shopDetail.name=this.cryptoSrv.decryptEncodedText(this.shopDetail.name),this.shopDetail.tcode=this.cryptoSrv.decryptEncodedText(this.shopDetail.tcode),this.shopDetail.username=this.cryptoSrv.decryptEncodedText(this.shopDetail.username),this.shopDetail.location=this.cryptoSrv.decryptEncodedText(this.shopDetail.location),this.shopDetail.description=this.cryptoSrv.decryptEncodedText(this.shopDetail.description),this.shopDetail.contacts.forEach(u=>{u=this.cryptoSrv.decryptEncodedText(u)}),this.shopDetail.receipt_options.till=this.cryptoSrv.decryptEncodedText(this.shopDetail.receipt_options.till),this.shopDetail.receipt_options.paybill=this.cryptoSrv.decryptEncodedText(this.shopDetail.receipt_options.paybill),this.shopDetail.receipt_options.paybill_account=this.cryptoSrv.decryptEncodedText(this.shopDetail.receipt_options.paybill_account),this.shopDetail.receipt_options.mpesa_business_name=this.cryptoSrv.decryptEncodedText(this.shopDetail.receipt_options.mpesa_business_name),this.shopDetail.receipt_options.footer_message=this.cryptoSrv.decryptEncodedText(this.shopDetail.receipt_options.footer_message),this.shopDetail.receipt_options.image_url=this.cryptoSrv.decryptEncodedText(this.shopDetail.receipt_options.image_url);var e="";e+="\x1b!\0";let n=0,s=0,l=0;this.printItems.forEach(u=>{const m=u.unit.unit_name.length+u.unit.unit_quantity.toString().length;n=Math.max(n,m);const c=u.qty.toString().length;s=Math.max(s,c);const x=u.sp.toString().length;l=Math.max(l,x)});const _="UNIT",p="@PRICE",I=s-"QTY".length+4,T=l-p.length+3,k=_+" ".repeat(n-_.length+5)+"QTY"+" ".repeat(I)+p+" ".repeat(T)+"TOTAL";e+="\x1bE\r",e+="-----------------------------------------------\n",e+=k+"\n",e+="-----------------------------------------------\n\n",e+="\x1bE\n",this.printItems.forEach(u=>{e+=u.item.name+"  -  "+u.location.name+"\n";const m=y(u.unit.unit_name)+"("+(0,d.uf)(u.unit.unit_quantity,this.locale,".0")+")   x",c=(0,d.uf)(u.qty,this.locale,".0"),x=(0,d.uf)(u.sp,this.locale,".2"),A=(0,d.uf)(parseFloat(u.sp.toString())*parseFloat(u.qty.toString()),this.locale,".2"),J=s-c.length+4,P=l-x.length+3;e+=m+" ".repeat(n-m.length+5)+c+" ".repeat(J)+x+" ".repeat(P)+A+"\n",e+="\n\n",e+="\x1ba0"});var v="";v+="\x1bE\r",""!==this.shopDetail.receipt_options.till&&(v+="LIPA NA MPESA TILL NUMBER: "+this.shopDetail.receipt_options.till+"\n",""===this.shopDetail.receipt_options.paybill&&(v+="\n")),""!==this.shopDetail.receipt_options.paybill&&(""!==this.shopDetail.receipt_options.till&&(v+="\n"),v+="M-PESA PAYBILL NUMBER: "+this.shopDetail.receipt_options.paybill+"\n",v+="PAYBILL ACCOUNT: "+this.shopDetail.receipt_options.paybill_account+"\n",v+="\n"),(""!==this.shopDetail.receipt_options.paybill||""!==this.shopDetail.receipt_options.till)&&(v+="\x1bE\n",v+="M-PESA BUSINESS NAME: "+this.shopDetail.receipt_options.mpesa_business_name+"\n",v+="\n"),new Date;var D=new d.uU("en-US");const M=Date.now(),b=D.transform(M,"medium"),E=this.shopDetail.name.toUpperCase();this.receiptCustomer=y(this.receiptCustomer);var C=function(u){return String.fromCharCode(u)};if(C(70),C(0),C(69),C(this.shopDetail.tcode.length),C(0),""!==this.cryptoSrv.decryptEncodedText(this.shopDetail.receipt_options.image_url)){const u=(0,d.uf)(this.totalCartAmountPrint,this.locale,".2");let m="";return this.shopDetail.contacts.forEach(x=>{m+=this.cryptoSrv.decryptEncodedText(x)+", "}),["\x1b@","\x1ba1","\x1d!\x10","\x1bE\r","\x1d!\x10",E+"\n","\n",{type:"raw",format:"image",flavor:"file",data:this.shopLogoUrl+this.cryptoSrv.decryptEncodedText(this.shopDetail.receipt_options.image_url),options:{language:"ESCPOS",dotDensity:"single"}},"\x1bE\n","\x1d!\0","\x1d!\0","\n",this.shopDetail.description+"\n",this.shopDetail.location+"\n","FOR ENQUIRIES CALL: "+m+"\n","\n","\x1ba0","\x1bE\r","\n","ORDER FOR; "+this.receiptCustomer+"\n","\x1bE\n","\n",e+"\n","-----------------------------------------------\n","\x1bE\r","\x1d!\x10","TOTAL     "+u,"\n","\x1d!\0","-----------------------------------------------\n","\x1ba1","\x1bE\n",v,"\x1bE\r","THIS RECEIPT IS NOT VALID FOR GOODS FOR\n","LATER COLLECTION\n","\x1bE\n","** THANK YOU AND WELCOME AGAIN **\n","RECEIPT # "+this.shopDetail.tcode+"  "+b+"\n\n","Served by "+y(this.shopDetail.username),"\n","\n\n\n\n\n\n\n","\x1dV\0"]}{const u=(0,d.uf)(this.totalCartAmountPrint,this.locale,".2");let m="";return this.shopDetail.contacts.forEach(x=>{m+=this.cryptoSrv.decryptEncodedText(x)+", "}),["\x1b@","\x1ba1","\x1d!\x10","\x1bE\r",E+"\n","\x1bE\n","\x1d!\0","\x1d!\0","\n",this.shopDetail.description+"\n",this.shopDetail.location+"\n","FOR ENQUIRIES CALL: "+m+"\n","\n","\x1ba0","\x1bE\r","QUOTATION ORDER; \n","\x1bE\n","\n",e+"\n","-----------------------------------------------\n","\x1bE\r","\x1d!\x10","TOTAL     "+u,"\n","\x1bE\n","\x1d!\0","-----------------------------------------------\n","\x1ba1",v,"\x1bE\r","THIS RECEIPT IS NOT VALID FOR GOODS FOR\n","LATER COLLECTION\n","\x1bE\n","** THANK YOU AND WELCOME AGAIN **\n","QUOTATION RECEIPT PROVIDED ON: "+b+"\n\n","Served by "+y(this.shopDetail.username),"\n","\n\n\n\n\n\n\n","\x1dV\0"]}}printTest(){this.printSrv.printtest2(this.createPrintData()),this.cryptoSrv.decryptEncodedText(this.shopDetail.name).toLowerCase().includes("ryden")&&setTimeout(()=>{this.printSrv.printtest2(this.createPrintData())},1500),this.showReprintForm?(this.displayItemsDialog=!1,this.receiptCustomer=""):(this.displayItemsDialog=!1,document.getElementById("cashreceived").value="",this.receiptCustomer="")}printDeliveryTest(){this.printSrv.printtest2(this.createPrintDataDelivery()),this.showReprintForm?(this.displayItemsDialog=!1,this.receiptCustomer=""):(this.displayItemsDialog=!1,document.getElementById("cashreceived").value="",this.receiptCustomer="")}printTestWaiting(){this.printSrv.printtest2(this.createPrintDataWaiting()),this.cryptoSrv.decryptEncodedText(this.shopDetail.name).toLowerCase().includes("ryden")&&setTimeout(()=>{this.printSrv.printtest2(this.createPrintDataWaiting())},1500),document.getElementById("cashreceived").value="",this.receiptCustomer=""}printTestWaitingDelivery(){this.printSrv.printtest2(this.createPrintDataWaitingDelivery()),document.getElementById("cashreceived").value="",this.receiptCustomer=""}printTestCashCustomer(){this.printSrv.printtest2(this.createPrintDataCashCustomer()),this.cryptoSrv.decryptEncodedText(this.shopDetail.name).toLowerCase().includes("ryden")&&setTimeout(()=>{this.printSrv.printtest2(this.createPrintDataCashCustomer())},1500),this.ngOnInit(),document.getElementById("cashreceived").value="",this.receiptCustomer=""}printTestPrint(){this.printSrv.printtest2(this.createPrintDataPrint()),this.showPrintDialog=!1,this.receiptCustomer="",this.ngOnInit()}getImage(e){this.getBase64ImageFromURL(e).subscribe(i=>{this.base64TrimmedURL=i,this.printSrv.printtest2(this.createPrintData()),this.showReprintForm?(this.displayItemsDialog=!1,this.receiptCustomer=""):(this.ngOnInit(),this.displayPaymentForm=!1,this.toastr.success("Payment completed!"),document.getElementById("cashreceived").value="")})}getImageWaiting(e){this.getBase64ImageFromURL(e).subscribe(i=>{this.base64TrimmedURL=i,this.printSrv.printtest2(this.createPrintDataWaiting()),this.ngOnInit(),this.toastr.success("Payment completed!"),document.getElementById("cashreceived").value=""})}getBase64ImageFromURL(e){return X.y.create(i=>{let n=new Image;n.crossOrigin="Anonymous",n.src=e,n.complete?(i.next(this.getBase64Image(n)),i.complete()):(n.onload=()=>{i.next(this.getBase64Image(n)),i.complete()},n.onerror=s=>{i.error(s)})})}getBase64Image(e){var i=document.createElement("canvas");i.width=e.width,i.height=e.height,i.getContext("2d").drawImage(e,-5,0);let s=i.toDataURL("image/png");return this.base64DefaultURL=s,s.replace(/^data:image\/(png|jpg);base64,/,"")}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(tt.t2),t.Y36(et.$),t.Y36(it._W),t.Y36(ot.e),t.Y36(nt.s),t.Y36(d.JJ),t.Y36(st.YP),t.Y36(at.$),t.Y36(t.sBO),t.Y36(t.soG))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-cash-sale"]],viewQuery:function(e,i){if(1&e&&(t.Gf(lt,5),t.Gf(rt,5),t.Gf(_t,5),t.Gf(ct,5)),2&e){let n;t.iGM(n=t.CRH())&&(i.table=n.first),t.iGM(n=t.CRH())&&(i.table2=n.first),t.iGM(n=t.CRH())&&(i.overlay=n.first),t.iGM(n=t.CRH())&&(i.searchInput=n.first)}},decls:59,vars:106,consts:[["class","row",4,"ngIf"],["appendTo","body","modal","true","header","Cash float",3,"closable","visible","style","baseZIndex","visibleChange",4,"ngIf"],["appendTo","body","modal","true",3,"header","closable","visible","style","baseZIndex","visibleChange",4,"ngIf"],["appendTo","body","modal","true","header","Payment",3,"closable","visible","style","baseZIndex","visibleChange",4,"ngIf"],["appendTo","body","modal","true","header","Customers in waiting",3,"closable","visible","style","baseZIndex","visibleChange",4,"ngIf"],["appendTo","body","modal","true","header","Duplicated sales",3,"closable","visible","style","baseZIndex","visibleChange",4,"ngIf"],["appendTo","body","modal","true","header","",3,"closable","visible","style","baseZIndex","visibleChange",4,"ngIf"],[3,"showCloseIcon"],["op",""],["pTemplate",""],["appendTo","body","modal","true","header","",3,"closable","visible","baseZIndex","visibleChange"],["autocomplete","off",3,"ngSubmit",4,"ngIf"],[3,"message","showNotification",4,"ngIf"],["bdOpacity","#fff","name","waiting","bdColor","rgba(255,255,255,0.76)","size","medium","color","#02926e","type","ball-clip-rotate",3,"fullScreen"],[2,"color","#02926e"],["appendTo","body","modal","true","header","",3,"closable","visible","baseZIndex","visibleChange","onHide"],["styleClass","p-datatable-customers","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"value","rowHover","rows","showCurrentPageReport","rowsPerPageOptions","paginator","filterDelay","globalFilterFields",4,"ngIf"],["bdOpacity","#fff","name","reprint","bdColor","rgba(255,255,255,0.76)","size","medium","color","#02926e","type","ball-clip-rotate",3,"fullScreen"],["appendTo","body","modal","true",3,"header","closable","visible","baseZIndex","blockScroll","visibleChange","onHide"],[1,"row"],[1,"col-md-12","text-right"],["label","Reprint","icon","pi pi-print","iconPos","right","styleClass","p-button-sm p-button-help",3,"click"],[1,"col-md-12"],["appendTo","body","modal","true","header","",3,"closable","visible","style","baseZIndex","blockScroll","visibleChange",4,"ngIf"],["styleClass","p-datatable-customers","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"value","rowHover","rows","showCurrentPageReport","rowsPerPageOptions","loading","paginator","filterDelay","globalFilterFields"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["bdOpacity","#fff","bdColor","rgba(255,255,255,0.76)","size","medium","name","date","color","#02926e","type","ball-clip-rotate",3,"fullScreen"],["styleClass","p-datatable-customers","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"value","rowHover","rows","showCurrentPageReport","rowsPerPageOptions","paginator","filterDelay","globalFilterFields"],["dt12",""],["appendTo","body","modal","true",3,"header","closable","visible","baseZIndex","visibleChange"],["bdOpacity","#fff","name","newcustomer","bdColor","rgba(255,255,255,0.76)","size","medium","color","#02926e","type","ball-clip-rotate",3,"fullScreen"],["appendTo","body","modal","true","header","Print items",3,"closable","visible","style","baseZIndex","visibleChange",4,"ngIf"],["header","Confirm","icon","pi pi-exclamation-triangle","appendTo","body",3,"baseZIndex"],["bdOpacity","#fff","bdColor","rgba(255,255,255,0.76)","size","medium","color","#02926e","type","ball-clip-rotate",3,"fullScreen"],[1,"col-md-12","mt-1","text-right"],["label","My customers","icon","fa fa-users","styleClass","p-button-sm p-button-help mr-5","badgeClass","p-badge-black",3,"click"],["label","Customers in waiting","icon","pi pi-users","styleClass","p-button-sm p-button-warning mr-5","class","animate-flicker","badgeClass","p-badge-black",3,"badge","click",4,"ngIf"],["label","Print items","icon","pi pi-print","styleClass","p-button-sm p-button-help p-button-outlined mr-5",3,"click",4,"ngIf"],["label","Cash float","icon","fas fa-money-bill-1-wave","styleClass","p-button-sm p-button-primary mr-5","pTooltip","Click to view cash float","tooltipPosition","left",3,"click"],["label","Reprint a receipt","icon","fas fa-print","styleClass","p-button-sm p-button-outlined p-button-secondary","pTooltip","Click to reprint items for a receipt","tooltipPosition","left",3,"click"],[1,"col-md-8","ml-0","pl-0"],[1,"card"],[1,"card-header"],[1,"card-title","mb-4"],[1,"card-body","p-0","m-0"],["styleClass","p-datatable-customers","dataKey","id","editMode","row","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"value","rows","showCurrentPageReport","rowsPerPageOptions","paginator","filterDelay","globalFilterFields"],["dt1",""],[1,"col-md-4","ml-0","pl-0","mr-0","pr-0"],["class","row px-2",4,"ngIf"],["class","row py-2 px-2",4,"ngIf"],["class","card px-2 py-2",4,"ngIf"],["label","Customers in waiting","icon","pi pi-users","styleClass","p-button-sm p-button-warning mr-5","badgeClass","p-badge-black",1,"animate-flicker",3,"badge","click"],["label","Print items","icon","pi pi-print","styleClass","p-button-sm p-button-help p-button-outlined mr-5",3,"click"],[2,"width","15rem"],[2,"width","10rem"],["style","width: 10rem",4,"ngIf"],[2,"width","20rem"],["pInputText","","type","text","placeholder","Search item...",1,"ui-column-filter",3,"input"],["searchInput",""],[2,"word-wrap","normal",3,"pEditableRow"],[3,"click",4,"ngIf"],["class","animate-flicker warning",4,"ngIf"],[4,"ngIf"],["class","pt-2",4,"ngIf"],["class","flex align-items-center justify-content-center gap-0",4,"ngIf"],[3,"click"],["label","","shape","circle",3,"style",4,"ngFor","ngForOf"],["label","","shape","circle"],[1,"animate-flicker","warning"],["pTemplate","input"],["pTemplate","output"],["placeholder","Select location","name","unit","appendTo","body","optionLabel","location.name",3,"options","disabled","ngModel","filter","onChange","ngModelChange","keydown.enter"],["pTemplate","selectedItem"],["pTemplate","item"],[1,"ui-helper-clearfix"],["placeholder","Select unit","name","unit","appendTo","body","optionLabel","",3,"options","disabled","ngModel","filter","onChange","ngModelChange"],["pInputText","","autocomplete","off","type","text","name","qty",2,"width","6rem",3,"id","ngModel","ngModelChange","input","keydown.enter"],["class","m-0 p-0 animate-flicker",4,"ngIf"],[1,"m-0","p-0","animate-flicker"],[2,"font-size","12px"],[1,"text-danger"],["pInputText","","autocomplete","off","type","text",2,"width","6rem",3,"disabled","id","ngModel","ngModelChange","input","keydown.enter"],[1,"pt-2"],[1,"flex","align-items-center","justify-content-center","gap-0"],["pButton","","pRipple","","type","button","pInitEditableRow","","icon","pi pi-pencil","class","p-button-rounded p-button-text",3,"click",4,"ngIf"],["pButton","","pRipple","","type","button","pSaveEditableRow","","icon","pi pi-check","class","p-button-rounded p-button-sm p-button-success m-0 p-0",3,"id","disabled","click",4,"ngIf"],["pButton","","pRipple","","type","button","pCancelEditableRow","","icon","pi pi-times","class","p-button-rounded p-button-text p-button-sm p-button-danger m-0 p-0",3,"click",4,"ngIf"],["class","loader",4,"ngIf"],["pButton","","pRipple","","type","button","pInitEditableRow","","icon","pi pi-pencil",1,"p-button-rounded","p-button-text",3,"click"],["pButton","","pRipple","","type","button","pSaveEditableRow","","icon","pi pi-check",1,"p-button-rounded","p-button-sm","p-button-success","m-0","p-0",3,"id","disabled","click"],["pButton","","pRipple","","type","button","pCancelEditableRow","","icon","pi pi-times",1,"p-button-rounded","p-button-text","p-button-sm","p-button-danger","m-0","p-0",3,"click"],[1,"loader"],[1,"ui-selectable-row"],[2,"width","5rem"],["colspan","7"],["pInputText","","type","text","placeholder","Search item name",1,"ui-column-filter",3,"input"],["label","","icon","pi pi-pencil","iconPos","right","pTooltip","Click to edit","tooltipPosition","left","styleClass","p-button-success p-button-outlined p-button-sm",3,"onClick"],["label","","icon","pi pi-trash","iconPos","right","pTooltip","Click to delete","tooltipPosition","top","styleClass","p-button-danger p-button-outlined p-button-sm float-right",3,"onClick"],[1,"col-md-12","text-center"],[1,"card","bg-white","text-center"],[1,"card-content","text-center"],[1,"row","px-2"],[1,"p-col-12","col-md-6","px-2"],[1,"p-inputgroup"],[1,"p-inputgroup-addon"],["type","text","placeholder","...","pInputText","","name","cash_rec","id","cashreceived",3,"keyup"],[1,"p-col-12","col-md-6"],["type","text","name","change","pInputText","","disabled","",2,"font-weight","bold",3,"ngModel","ngModelChange"],[1,"row","py-2","px-2"],[1,"col-md-12","pt-2","pr-3"],["pButton","","type","button","icon","pi pi-users","label","Add to waiting","class","p-button-outlined p-button-help p-button-sm float-right small pr-2",3,"click",4,"ngIf"],["pButton","","type","button","icon","pi pi-users","label","Add to waiting",1,"p-button-outlined","p-button-help","p-button-sm","float-right","small","pr-2",3,"click"],[1,"card","px-2","py-2"],[3,"totalCartAmount","myCashCustomers","status"],["appendTo","body","modal","true","header","Cash float",3,"closable","visible","baseZIndex","visibleChange"],["bdOpacity","#fff","name","float","bdColor","rgba(255,255,255,0.76)","size","medium","color","#02926e","type","ball-clip-rotate",3,"fullScreen"],["autocomplete","off",3,"ngSubmit"],["form2","ngForm"],[1,"ui-fluid"],[1,"p-field","pb-3"],["for","unitq"],["id","float","name","float","required","","type","number","pattern","[0-9]+","pInputNumber","",1,"form-control",3,"ngModel","ngModelChange"],["type","button","pButton","","icon","pi pi-times","label","Cancel",1,"p-button-danger","p-button-sm","float-right",3,"click"],["type","submit","pButton","","icon","pi pi-check","label","Save",1,"p-button-success","p-button-sm","mr-3","float-right",3,"disabled"],["bdOpacity","#fff","name","sell","bdColor","rgba(255,255,255,0.76)","size","medium","color","#02926e","type","ball-clip-rotate",3,"fullScreen"],[1,"col-6"],["for","location"],["placeholder","Select location","name","location","appendTo","body","optionLabel","location.name","filter","true",3,"options","ngModel","onChange","ngModelChange"],["for","unit"],["placeholder","Select item unit","name","unit","appendTo","body","optionLabel","unit_name","filter","true",3,"options","disabled","ngModel","onChange","ngModelChange"],["class","col-6",4,"ngIf"],["id","unitq","name","unit_quantity","required","","type","number","pattern","[0-9]+","pInputNumber","",1,"form-control",3,"disabled","ngModel","input","ngModelChange"],["id","unitq-help","class","p-error block",4,"ngIf"],["id","unitsp","name","unit_price","required","","type","number","pInputNumber","",1,"form-control",3,"disabled","ngModel","input","ngModelChange"],["id","disc-help","class","p-error block animate-flicker",4,"ngIf"],["for","totalp"],["id","totalp","name","total_price","required","","type","text","pInputText","",1,"form-control",3,"disabled","value"],["type","submit","pButton","","icon","pi pi-check",1,"p-button-success","p-button-sm","mr-3","float-right",3,"disabled","label"],["selectionMode","single","responsiveLayout","scroll",3,"value","paginator","rows"],["colspan","2"],["id","unitq-help",1,"p-error","block"],["id","disc-help",1,"p-error","block","animate-flicker"],["bdOpacity","#fff","name","sellw","bdColor","rgba(255,255,255,0.76)","size","medium","color","#02926e","type","ball-clip-rotate",3,"fullScreen"],["appendTo","body","modal","true","header","Payment",3,"closable","visible","baseZIndex","visibleChange"],["appendTo","body","modal","true","header","Customers in waiting",3,"closable","visible","baseZIndex","visibleChange"],["dt22",""],["type","button","pButton","","icon","pi pi-times","label","Close",1,"p-button-danger","p-button-sm","float-right",3,"click"],["bdOpacity","#fff","name","wait","bdColor","rgba(255,255,255,0.76)","size","medium","color","#02926e","type","ball-clip-rotate",3,"fullScreen"],[2,"word-wrap","normal"],[2,"white-space","nowrap"],["pButton","","type","button","icon","pi pi-list","label","View items",1,"p-button-raised","p-button-info","small",3,"click"],["colspan","3",2,"text-align","center"],["appendTo","body","modal","true","header","Duplicated sales",3,"closable","visible","baseZIndex","visibleChange"],["bdOpacity","#fff","bdColor","rgba(255,255,255,0.76)","size","medium","name","waiting","color","#02926e","type","ball-clip-rotate",3,"fullScreen"],[1,"col-md-8"],[1,"col-md-4"],["dt2",""],["class","card pt-2",4,"ngIf"],["pSortableColumn","name",2,"width","10rem"],["field","name"],["label","","icon","pi pi-trash","iconPos","right","styleClass","p-button-danger p-button-outlined p-button-sm",3,"onClick"],[1,"card","pt-2"],[3,"totalCartAmount","waitingCustomer","myCashCustomers","status"],["label","Add cash float","icon","fas fa-money-bill-1-wave","styleClass","p-button-sm p-button-primary",3,"click"],["label","Delete","icon","pi pi-trash","iconPos","right","styleClass","p-button-danger p-button-outlined p-button-sm float-right",3,"onClick"],[4,"ngFor","ngForOf"],[1,"p-o","m-0"],[1,"small"],[1,"row","py-3"],[1,"ui-fluid","px-2"],[1,"p-field"],["for","username2"],["id","username2","name","cname","type","username","required","","aria-describedby","username2-help","pInputText","",1,"ng-invalid","ng-dirty",3,"ngModel","ngModelChange"],["type","button","pButton","","icon","pi pi-times","label","Cancel","styleClass","p-button-sm",1,"p-button-danger","float-right","small",3,"click"],["type","submit","pButton","","icon","pi pi-check","label","Save","styleClass","p-button-sm",1,"p-button-success","small",3,"disabled"],[3,"message","showNotification"],["dtr",""],["pSortableColumn","customer",2,"width","15rem"],[2,"width","25rem"],["colspan","8"],["pInputText","","type","text","placeholder","Search...",1,"ui-column-filter",3,"input"],[3,"pTooltip","tooltipPosition"],["label","Show items","icon","pi pi-list","iconPos","right","styleClass","p-button-info p-button-sm mr-3",3,"onClick",4,"ngIf"],["ngbDropdown","","class","d-inline-block","container","body","placement","bottom-start",4,"ngIf"],["label","Show items","icon","pi pi-list","iconPos","right","styleClass","p-button-info p-button-sm mr-3",3,"onClick"],["ngbDropdown","","container","body","placement","bottom-start",1,"d-inline-block"],["type","button","pButton","","id","dropdownBasic1","ngbDropdownToggle","",1,"p-button-primary","p-button-sm","p-button-outlined"],["ngbDropdownMenu","","aria-labelledby","dropdownBasic1",1,"dropdown-menu",2,"right","auto !important","left","0 !important"],["ngbDropdownItem","",3,"click"],[1,"pi","pi-print","mr-2"],["dtr2",""],["colspan","6"],["shape","circle"],["appendTo","body","modal","true","header","",3,"closable","visible","baseZIndex","blockScroll","visibleChange"],[1,"col-md-12","py-2"],["label","Add new customer","icon","pi pi-plus","styleClass","float-right p-button-raised p-button-success p-button-sm",3,"click",4,"ngIf"],[1,"col-md-12","p-0","m-0"],["label","Add new customer","icon","pi pi-plus","styleClass","float-right p-button-raised p-button-success p-button-sm",3,"click"],["pSortableColumn","total"],["colspan","3"],["style","word-wrap: normal;",4,"ngIf"],["pButton","","type","button","icon","pi pi-arrow-right","iconPos","right","label","Show sales",1,"p-button-primary","p-button-sm",3,"click"],["pButton","","type","button","class","float-right p-button-danger p-button-sm","icon","pi pi-trash","iconPos","right","label","Delete",3,"click",4,"ngIf"],["pButton","","type","button","icon","pi pi-trash","iconPos","right","label","Delete",1,"float-right","p-button-danger","p-button-sm",3,"click"],["appendTo","body","name","start_date","required","","placeholder","From..","readonlyInput","true",3,"ngModel","maxDate","touchUI","monthNavigator","ngModelChange"],["appendTo","body","name","end_date","required","","placeholder","To..","readonlyInput","true",1,"ml-3",3,"ngModel","minDate","maxDate","touchUI","monthNavigator","ngModelChange"],["pButton","","type","button","icon","pi pi-arrow-right","label","Show period sales",1,"ml-2","p-button-sm","p-button-outlined","p-button-success",3,"click"],["styleClass","ml-3 pl-0 pr-3"],[1,"bg-primary","w-4rem","h-3rem","flex","align-items-center","justify-content-center"],[1,"ml-2","font-medium"],["pButton","","type","button","icon","pi pi-list","iconPos","right","label","Show all",1,"ml-2","p-button-sm","p-button-outlined","p-button-success","float-right",3,"click"],["pButton","","type","button","icon","pi pi-list","label","Show transactions",1,"p-button-sm","p-button-outlined","p-button-info",3,"click"],["colspan","7",2,"text-align","center"],["colspan","5"],["pInputText","","type","text","placeholder","Search ...",1,"ui-column-filter",3,"input"],["label","Show receipt items","icon","pi pi-list","iconPos","right","styleClass","p-button-success p-button-outlined p-button-sm",3,"onClick"],[1,"col-md-6"],["dt288",""],["class","row text-center py-3",4,"ngIf"],["pSortableColumn","name",2,"width","15rem"],["pSortableColumn","category.name",2,"width","15rem"],["field","category.name"],["appendTo","body","placeholder","All","styleClass","ui-column-filter","optionLabel","name",3,"options","onChange"],[1,"ui-multiselect-representative-option",2,"display","grid"],["label","Select","icon","pi pi-arrow-right","iconPos","right","styleClass","p-button-primary p-button-outlined p-button-sm",3,"loading","onClick",4,"ngIf"],["label","Select","icon","pi pi-arrow-right","iconPos","right","styleClass","p-button-primary p-button-outlined p-button-sm",3,"loading","onClick"],[1,"row","text-center","py-3"],[1,"col-md-8","text-center","pt-2","offset-md-2"],["pButton","","type","button","icon","pi pi-check","label","Pay",1,"p-button-raised","p-button-success",3,"click"],["type","submit","pButton","","icon","pi pi-check","label","Add to list",1,"p-button-success","p-button-sm","mr-3","float-right",3,"disabled"],[3,"totalCartAmount","cashCustomer","myCashCustomers","status"],["form3","ngForm"],["for","cname",2,"text-transform","none"],["id","cname","name","name","type","username","required","","aria-describedby","cname-help","pInputText","",1,"form-control",3,"ngModel","ngModelChange"],["type","button","pButton","","icon","pi pi-times","label","Close","styleClass","p-button-sm",1,"p-button-danger","float-right","small",3,"click"],["type","submit","pButton","","icon","pi pi-check","label","Save","styleClass","p-button-sm",1,"p-button-success","small","ml-3",3,"disabled"],["appendTo","body","modal","true","header","Print items",3,"closable","visible","baseZIndex","visibleChange"],["bdOpacity","#fff","bdColor","rgba(255,255,255,0.76)","size","medium","name","print","color","#02926e","type","ball-clip-rotate",3,"fullScreen"],["placeholder","Select unit","name","unit","appendTo","body","optionLabel","",3,"options","disabled","ngModel","filter","onChange","ngModelChange","keydown.enter"],["pInputText","","autocomplete","off","type","text","name","qty",2,"width","6rem",3,"id","ngModel","ngModelChange","keydown.enter"],["pInputText","","autocomplete","off","type","text",2,"width","6rem",3,"disabled","id","ngModel","ngModelChange","keydown.enter"],["label","","icon","pi pi-trash","iconPos","right","styleClass","p-button-danger p-button-outlined p-button-sm float-right",3,"onClick"],["pButton","","type","button","icon","pi pi-print","label","Print",1,"p-button-raised","p-button-success",3,"click"],["id","unitsp","name","unit_price","required","","type","number","pInputNumber","",1,"form-control",3,"ngModel","ngModelChange"]],template:function(e,i){1&e&&(t.YNc(0,Vt,31,30,"div",0),t.YNc(1,Xt,4,8,"p-dialog",1),t.YNc(2,pe,4,9,"p-dialog",2),t.YNc(3,ve,4,9,"p-dialog",2),t.YNc(4,be,2,8,"p-dialog",3),t.YNc(5,Ee,10,17,"p-dialog",4),t.YNc(6,Ue,10,17,"p-dialog",5),t.YNc(7,Ci,7,11,"p-dialog",2),t.YNc(8,Ti,2,9,"p-dialog",3),t.YNc(9,Ai,13,17,"p-dialog",6),t.TgZ(10,"p-overlayPanel",7,8),t.YNc(12,Mi,3,3,"ng-template",9),t.qZA(),t.TgZ(13,"p-dialog",10),t.NdJ("visibleChange",function(s){return i.displayCustomerName=s}),t.YNc(14,Ei,13,2,"form",11),t.YNc(15,Ii,1,2,"app-notification",12),t.TgZ(16,"ngx-spinner",13),t._UZ(17,"p",14),t.qZA()(),t.TgZ(18,"p-dialog",15),t.NdJ("visibleChange",function(s){return i.showReprintForm=s})("onHide",function(){return i.showReprintForm=!1,i.ngOnInit()}),t.YNc(19,Fi,4,10,"p-table",16),t.TgZ(20,"ngx-spinner",17),t._UZ(21,"p",14),t.qZA()(),t.TgZ(22,"p-dialog",18),t.NdJ("visibleChange",function(s){return i.displayItemsDialog=s})("onHide",function(){return i.displayItemsDialog=!1}),t.TgZ(23,"div",19)(24,"h3",20)(25,"p-button",21),t.NdJ("click",function(){return i.selectReceipt(i.transactionToView,!0,!1)}),t.qZA()(),t.TgZ(26,"div",22),t.YNc(27,Qi,4,10,"p-table",16),t.qZA()(),t.TgZ(28,"ngx-spinner",17),t._UZ(29,"p",14),t.qZA()(),t.YNc(30,Ki,13,19,"p-dialog",23),t.TgZ(31,"p-dialog",18),t.NdJ("visibleChange",function(s){return i.showCashCustomerSales=s})("onHide",function(){return i.showCashCustomerSales=!1}),t.ALo(32,"titlecase"),t.TgZ(33,"p-table",24,25),t.YNc(35,Wi,21,12,"ng-template",26),t.YNc(36,$i,12,11,"ng-template",27),t.YNc(37,ji,3,0,"ng-template",28),t.qZA(),t.TgZ(38,"ngx-spinner",29),t._UZ(39,"p",14),t.qZA()(),t.TgZ(40,"p-dialog",18),t.NdJ("visibleChange",function(s){return i.showDateSales=s})("onHide",function(){return i.showDateSales=!1}),t.ALo(41,"date"),t.TgZ(42,"p-table",30,31),t.YNc(44,Vi,13,0,"ng-template",26),t.YNc(45,zi,14,12,"ng-template",27),t.qZA()(),t.YNc(46,ho,30,33,"p-dialog",2),t.YNc(47,wo,4,9,"p-dialog",2),t.YNc(48,Zo,2,9,"p-dialog",3),t.TgZ(49,"p-dialog",32),t.NdJ("visibleChange",function(s){return i.displayNewCustomerDialog=s}),t.YNc(50,qo,12,2,"form",11),t.YNc(51,Mo,1,2,"app-notification",12),t.TgZ(52,"ngx-spinner",33),t._UZ(53,"p",14),t.qZA()(),t.YNc(54,cn,28,30,"p-dialog",34),t.YNc(55,fn,4,9,"p-dialog",2),t._UZ(56,"p-confirmDialog",35),t.TgZ(57,"ngx-spinner",36),t._UZ(58,"p",14),t.qZA()),2&e&&(t.Q6J("ngIf",!i.loading&&i.showNew),t.xp6(1),t.Q6J("ngIf",i.floatDialog),t.xp6(1),t.Q6J("ngIf",i.displaySellDialog),t.xp6(1),t.Q6J("ngIf",i.displaySellDialogWaiting),t.xp6(1),t.Q6J("ngIf",i.displayPaymentForm),t.xp6(1),t.Q6J("ngIf",i.displayWaitingCustomers),t.xp6(1),t.Q6J("ngIf",i.displayDuplicatedSales),t.xp6(1),t.Q6J("ngIf",i.displayWaitingCustomerSelected),t.xp6(1),t.Q6J("ngIf",i.displayPaymentFormWaiting),t.xp6(1),t.Q6J("ngIf",i.displayFloatDialog),t.xp6(1),t.Akn(t.DdM(94,Cn)),t.Q6J("@enter",void 0)("showCloseIcon",!1),t.xp6(3),t.Akn(t.DdM(95,Tn)),t.Q6J("closable",!1)("visible",i.displayCustomerName)("baseZIndex",1e4),t.xp6(1),t.Q6J("ngIf",!i.showNotification),t.xp6(1),t.Q6J("ngIf",i.showNotification),t.xp6(1),t.Q6J("fullScreen",!1),t.xp6(2),t.Akn(t.DdM(96,Y)),t.Q6J("closable",!0)("visible",i.showReprintForm)("baseZIndex",1e4),t.xp6(1),t.Q6J("ngIf",i.showReprintForm),t.xp6(1),t.Q6J("fullScreen",!0),t.xp6(2),t.Akn(t.DdM(97,j)),t.Q6J("header",i.displayItemsDialog?i.transactionToView.transaction_code:"")("closable",!0)("visible",i.displayItemsDialog)("baseZIndex",1e4)("blockScroll",!0),t.xp6(5),t.Q6J("ngIf",i.displayItemsDialog),t.xp6(1),t.Q6J("fullScreen",!0),t.xp6(2),t.Q6J("ngIf",i.displayCashCustomers),t.xp6(1),t.Akn(t.DdM(98,Sn)),t.Q6J("header",i.showCashCustomerSales?"Sales for "+t.lcZ(32,90,i.cashCustomerSelected.name):"")("closable",!0)("visible",i.showCashCustomerSales)("baseZIndex",1e4)("blockScroll",!0),t.xp6(2),t.Q6J("value",i.filtedCashCustomerSales)("rowHover",!0)("rows",10)("showCurrentPageReport",!0)("rowsPerPageOptions",t.DdM(99,q))("loading",i.loading)("paginator",!0)("filterDelay",0)("globalFilterFields",t.DdM(100,O)),t.xp6(5),t.Q6J("fullScreen",!0),t.xp6(2),t.Akn(t.DdM(101,j)),t.Q6J("header",i.showDateSales?"Transactions for the date: "+t.lcZ(41,92,i.dateSelected):"")("closable",!0)("visible",i.showDateSales)("closable",!0)("baseZIndex",1e4)("blockScroll",!0),t.xp6(2),t.Q6J("value",i.customerDateSales)("rowHover",!0)("rows",10)("showCurrentPageReport",!0)("rowsPerPageOptions",t.DdM(102,q))("paginator",!0)("filterDelay",0)("globalFilterFields",t.DdM(103,yn)),t.xp6(4),t.Q6J("ngIf",i.displayMyCustomersDialog),t.xp6(1),t.Q6J("ngIf",i.displaySellDialogCashCustomer),t.xp6(1),t.Q6J("ngIf",i.displayPaymentFormCashCustomer),t.xp6(1),t.Akn(t.DdM(104,N)),t.Q6J("header",i.showNotification?"":"New daily customer")("closable",!1)("visible",i.displayNewCustomerDialog)("baseZIndex",1e4),t.xp6(1),t.Q6J("ngIf",!i.showNotification),t.xp6(1),t.Q6J("ngIf",i.showNotification),t.xp6(1),t.Q6J("fullScreen",!1),t.xp6(2),t.Q6J("ngIf",i.showPrintDialog),t.xp6(1),t.Q6J("ngIf",i.displaySellDialogPrint),t.xp6(1),t.Akn(t.DdM(105,N)),t.Q6J("baseZIndex",1e4),t.xp6(1),t.Q6J("fullScreen",!0))},styles:["label[_ngcontent-%COMP%]{text-transform:none}.dropdown[_ngcontent-%COMP%]{z-index:20000!important}.loader[_ngcontent-%COMP%]{width:30px;aspect-ratio:2;--_g: no-repeat radial-gradient(circle closest-side,#02926e 90%,#ffffff);background:var(--_g) 0% 50%,var(--_g) 50% 50%,var(--_g) 100% 50%;background-size:33.3333333333% 50%;animation:l3 1s infinite linear}@keyframes l3{20%{background-position:0% 0%,50% 50%,100% 50%}40%{background-position:0% 100%,50% 0%,100% 50%}60%{background-position:0% 50%,50% 100%,100% 0%}80%{background-position:0% 50%,50% 50%,100% 100%}}[_nghost-%COMP%]     p-colorpicker .p-colorpicker .p-colorpicker-preview{border-radius:30px}[_nghost-%COMP%]     p-dialog .p-dialog-header{border-radius:30px!important}[_nghost-%COMP%]     .p-dialog .p-dialog-footer{border-bottom-right-radius:30px}"],data:{animation:[(0,B.X$)("enter",[(0,B.eR)("void => *",[(0,B.oB)({opacity:0}),(0,B.jt)(1e3,(0,B.oB)({opacity:1}))])])]}}),o})()}}]);